<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [deepamehta-svn] r202 - in branches/eschnepel: . ant ant/bin	ant/etc ant/etc/checkstyle ant/lib	develop/src/de/deepamehta/service/db	develop/src/de/deepamehta/service/web install/config	install/db/db-specific install/examples/artfacts	install/examples/dm-browser install/examples/dm-search	install/examples/dm-topicmapviewer install/examples/dm-web	install/examples/knoppixforum install/examples/kompetenzstern	install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern	install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics	install/examples/ldap install/examples/messageboard	install/examples/movies install/examples/musicforum
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/deepamehta-svn/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:deepamehta-svn%40lists.berlios.de?Subject=Re%3A%20%5Bdeepamehta-svn%5D%20r202%20-%20in%20branches/eschnepel%3A%20.%20ant%20ant/bin%0A%09ant/etc%20ant/etc/checkstyle%20ant/lib%0A%09develop/src/de/deepamehta/service/db%0A%09develop/src/de/deepamehta/service/web%20install/config%0A%09install/db/db-specific%20install/examples/artfacts%0A%09install/examples/dm-browser%20install/examples/dm-search%0A%09install/examples/dm-topicmapviewer%20install/examples/dm-web%0A%09install/examples/knoppixforum%20install/examples/kompetenzstern%0A%09install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern%0A%09install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics%0A%09install/examples/ldap%20install/examples/messageboard%0A%09install/examples/movies%20install/examples/musicforum&In-Reply-To=%3C200709171847.l8HIlfB2028429%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000046.html">
   <LINK REL="Next"  HREF="000048.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[deepamehta-svn] r202 - in branches/eschnepel: . ant ant/bin	ant/etc ant/etc/checkstyle ant/lib	develop/src/de/deepamehta/service/db	develop/src/de/deepamehta/service/web install/config	install/db/db-specific install/examples/artfacts	install/examples/dm-browser install/examples/dm-search	install/examples/dm-topicmapviewer install/examples/dm-web	install/examples/knoppixforum install/examples/kompetenzstern	install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern	install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics	install/examples/ldap install/examples/messageboard	install/examples/movies install/examples/musicforum</H1>
    <B>eschnepel at BerliOS</B> 
    <A HREF="mailto:deepamehta-svn%40lists.berlios.de?Subject=Re%3A%20%5Bdeepamehta-svn%5D%20r202%20-%20in%20branches/eschnepel%3A%20.%20ant%20ant/bin%0A%09ant/etc%20ant/etc/checkstyle%20ant/lib%0A%09develop/src/de/deepamehta/service/db%0A%09develop/src/de/deepamehta/service/web%20install/config%0A%09install/db/db-specific%20install/examples/artfacts%0A%09install/examples/dm-browser%20install/examples/dm-search%0A%09install/examples/dm-topicmapviewer%20install/examples/dm-web%0A%09install/examples/knoppixforum%20install/examples/kompetenzstern%0A%09install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern%0A%09install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics%0A%09install/examples/ldap%20install/examples/messageboard%0A%09install/examples/movies%20install/examples/musicforum&In-Reply-To=%3C200709171847.l8HIlfB2028429%40sheep.berlios.de%3E"
       TITLE="[deepamehta-svn] r202 - in branches/eschnepel: . ant ant/bin	ant/etc ant/etc/checkstyle ant/lib	develop/src/de/deepamehta/service/db	develop/src/de/deepamehta/service/web install/config	install/db/db-specific install/examples/artfacts	install/examples/dm-browser install/examples/dm-search	install/examples/dm-topicmapviewer install/examples/dm-web	install/examples/knoppixforum install/examples/kompetenzstern	install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern	install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics	install/examples/ldap install/examples/messageboard	install/examples/movies install/examples/musicforum">eschnepel at mail.berlios.de
       </A><BR>
    <I>Mon Sep 17 20:47:41 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000046.html">[deepamehta-svn] r201 - in trunk: develop/src/de/deepamehta	develop/src/de/deepamehta/topics install/db/patches
</A></li>
        <LI>Next message: <A HREF="000048.html">[deepamehta-svn] r203 - in branches/eschnepel:	develop/src/de/deepamehta develop/src/de/deepamehta/client	develop/src/de/deepamehta/topics install install/db	install/db/patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47">[ date ]</a>
              <a href="thread.html#47">[ thread ]</a>
              <a href="subject.html#47">[ subject ]</a>
              <a href="author.html#47">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: eschnepel
Date: 2007-09-17 20:46:21 +0200 (Mon, 17 Sep 2007)
New Revision: 202

Added:
   branches/eschnepel/ant/
   branches/eschnepel/ant/LICENSE
   branches/eschnepel/ant/LICENSE.dom
   branches/eschnepel/ant/LICENSE.sax
   branches/eschnepel/ant/LICENSE.xerces
   branches/eschnepel/ant/NOTICE
   branches/eschnepel/ant/README
   branches/eschnepel/ant/bin/
   branches/eschnepel/ant/bin/ant
   branches/eschnepel/ant/bin/ant.bat
   branches/eschnepel/ant/bin/ant.cmd
   branches/eschnepel/ant/bin/antRun
   branches/eschnepel/ant/bin/antRun.bat
   branches/eschnepel/ant/bin/antRun.pl
   branches/eschnepel/ant/bin/antenv.cmd
   branches/eschnepel/ant/bin/complete-ant-cmd.pl
   branches/eschnepel/ant/bin/envset.cmd
   branches/eschnepel/ant/bin/lcp.bat
   branches/eschnepel/ant/bin/runant.pl
   branches/eschnepel/ant/bin/runant.py
   branches/eschnepel/ant/bin/runrc.cmd
   branches/eschnepel/ant/etc/
   branches/eschnepel/ant/etc/ant-bootstrap.jar
   branches/eschnepel/ant/etc/changelog.xsl
   branches/eschnepel/ant/etc/checkstyle/
   branches/eschnepel/ant/etc/checkstyle/checkstyle-frames.xsl
   branches/eschnepel/ant/etc/checkstyle/checkstyle-text.xsl
   branches/eschnepel/ant/etc/checkstyle/checkstyle-xdoc.xsl
   branches/eschnepel/ant/etc/coverage-frames.xsl
   branches/eschnepel/ant/etc/jdepend-frames.xsl
   branches/eschnepel/ant/etc/jdepend.xsl
   branches/eschnepel/ant/etc/junit-frames-xalan1.xsl
   branches/eschnepel/ant/etc/junit-frames.xsl
   branches/eschnepel/ant/etc/junit-noframes.xsl
   branches/eschnepel/ant/etc/log.xsl
   branches/eschnepel/ant/etc/maudit-frames.xsl
   branches/eschnepel/ant/etc/mmetrics-frames.xsl
   branches/eschnepel/ant/etc/tagdiff.xsl
   branches/eschnepel/ant/lib/
   branches/eschnepel/ant/lib/README
   branches/eschnepel/ant/lib/ant-antlr.jar
   branches/eschnepel/ant/lib/ant-apache-bcel.jar
   branches/eschnepel/ant/lib/ant-apache-bsf.jar
   branches/eschnepel/ant/lib/ant-apache-log4j.jar
   branches/eschnepel/ant/lib/ant-apache-oro.jar
   branches/eschnepel/ant/lib/ant-apache-regexp.jar
   branches/eschnepel/ant/lib/ant-apache-resolver.jar
   branches/eschnepel/ant/lib/ant-commons-logging.jar
   branches/eschnepel/ant/lib/ant-commons-net.jar
   branches/eschnepel/ant/lib/ant-contrib-1.0b3.jar
   branches/eschnepel/ant/lib/ant-jai.jar
   branches/eschnepel/ant/lib/ant-javamail.jar
   branches/eschnepel/ant/lib/ant-jdepend.jar
   branches/eschnepel/ant/lib/ant-jmf.jar
   branches/eschnepel/ant/lib/ant-jsch.jar
   branches/eschnepel/ant/lib/ant-junit.jar
   branches/eschnepel/ant/lib/ant-launcher.jar
   branches/eschnepel/ant/lib/ant-netrexx.jar
   branches/eschnepel/ant/lib/ant-nodeps.jar
   branches/eschnepel/ant/lib/ant-starteam.jar
   branches/eschnepel/ant/lib/ant-stylebook.jar
   branches/eschnepel/ant/lib/ant-swing.jar
   branches/eschnepel/ant/lib/ant-testutil.jar
   branches/eschnepel/ant/lib/ant-trax.jar
   branches/eschnepel/ant/lib/ant-weblogic.jar
   branches/eschnepel/ant/lib/ant.jar
   branches/eschnepel/ant/lib/libraries.properties
   branches/eschnepel/ant/lib/xercesImpl.jar
   branches/eschnepel/ant/lib/xml-apis.jar
   branches/eschnepel/install/db/db-specific/createdb-ask.xml
   branches/eschnepel/run.bat
   branches/eschnepel/run.sh
Modified:
   branches/eschnepel/
   branches/eschnepel/README.txt
   branches/eschnepel/build-development.xml
   branches/eschnepel/build.properties
   branches/eschnepel/build.xml
   branches/eschnepel/config.xml
   branches/eschnepel/develop/src/de/deepamehta/service/db/DatabaseSweeper.java
   branches/eschnepel/develop/src/de/deepamehta/service/web/DeepaMehtaServlet.java
   branches/eschnepel/install/config/
   branches/eschnepel/install/config/build-derby-intern.properties
   branches/eschnepel/install/config/build-hsqldb-intern.properties
   branches/eschnepel/install/config/build-mysql.properties
   branches/eschnepel/install/config/dm-mysql.properties
   branches/eschnepel/install/db/db-specific/createdb-CONNECT.xml
   branches/eschnepel/install/db/db-specific/createdb-EMPTY.xml
   branches/eschnepel/install/db/db-specific/createdb-sql92.xml
   branches/eschnepel/install/db/db-specific/dropdb-ask.xml
   branches/eschnepel/install/db/db-specific/dropdb-derby.xml
   branches/eschnepel/install/db/db-specific/dropdb-hsqldb.xml
   branches/eschnepel/install/db/db-specific/dropdb-sql92.xml
   branches/eschnepel/install/examples/artfacts/build.xml
   branches/eschnepel/install/examples/dm-browser/
   branches/eschnepel/install/examples/dm-browser/build.xml
   branches/eschnepel/install/examples/dm-search/
   branches/eschnepel/install/examples/dm-search/build.xml
   branches/eschnepel/install/examples/dm-topicmapviewer/
   branches/eschnepel/install/examples/dm-topicmapviewer/build.xml
   branches/eschnepel/install/examples/dm-web/
   branches/eschnepel/install/examples/dm-web/build.xml
   branches/eschnepel/install/examples/knoppixforum/
   branches/eschnepel/install/examples/knoppixforum/build.xml
   branches/eschnepel/install/examples/kompetenzstern/
   branches/eschnepel/install/examples/kompetenzstern/build.xml
   branches/eschnepel/install/examples/kompetenzstern/businesscheck.sql
   branches/eschnepel/install/examples/kompetenzstern/kompetenzstern.sql
   branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/KS.java
   branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics/KompetenzsternTopic.java
   branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics/KriteriumTopic.java
   branches/eschnepel/install/examples/ldap/
   branches/eschnepel/install/examples/ldap/build.xml
   branches/eschnepel/install/examples/messageboard/build.xml
   branches/eschnepel/install/examples/movies/build.xml
   branches/eschnepel/install/examples/musicforum/
   branches/eschnepel/install/examples/musicforum/build.xml
Log:
global rework of the build system
integrated ant 1.7 including ant-contrib into the dm-structure
there is a new main build tool instad of ant ... run.sh or run.bat (depending on your os; windows needs to be tested)



Property changes on: branches/eschnepel
___________________________________________________________________
Name: svn:ignore
   + buildrun.properties
config.properties


Modified: branches/eschnepel/README.txt
===================================================================
--- branches/eschnepel/README.txt	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/README.txt	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,5 +1,5 @@
 
-DeepaMehta 2.0b7 
+DeepaMehta 2.0b8
 ================
 
 README
@@ -41,11 +41,14 @@
 
   * Java 1.4 Standard Edition
       <A HREF="http://java.sun.com/">http://java.sun.com/</A>
+
+Optional Software
+
+  * Apache Ant 1.7
+      <A HREF="http://ant.apache.org/">http://ant.apache.org/</A>
   * MySQL 4
       <A HREF="http://www.mysql.com/">http://www.mysql.com/</A>
-  * Apache Ant 1.6
-      <A HREF="http://ant.apache.org/">http://ant.apache.org/</A>
-  * Optional: Apache Tomcat or another servlet engine
+  * Apache Tomcat or another servlet engine
       <A HREF="http://tomcat.apache.org/">http://tomcat.apache.org/</A>
 
 Hardware
@@ -68,36 +71,29 @@
 Step 1: Unzip
 -------------
 
-1) Create the DeepaMehta home directory at a suitable location, e.g.
+a) Create the DeepaMehta home directory at a suitable location, e.g.
 
-   * Windows:     C:\Applications\DeepaMehta-2.0b7
-   * Mac OS X:    /Macintosh HD/Applications/DeepaMehta-2.0b7
-   * Linux:       /usr/local/deepamehta-2.0b7
+   * Windows:     C:\Program Files\DeepaMehta-2.0b8
+   * Mac OS X:    /Macintosh HD/Applications/DeepaMehta-2.0b8
+   * Linux:       /usr/local/deepamehta-2.0b8
 
-2) Unzip &quot;deepamehta-2.0b7.zip&quot; to a the just created directory.
+b) Unzip &quot;deepamehta-2.0b8.zip&quot; to the just created directory.
    The structure of the DeepaMehta installation looks like this:
 
-   README.txt     this text
-   install/       the software to run DeepaMehta
-   develop/       you can delete this folder if you do no DeepaMehta development
-   libs/          3rd party libraries
-   build.xml      buildfile for ant
-   config.xml     configurations read by the buildfile
+   README.txt         this text
+   ant/               this might be deleted if you have your own ant installation
+                      if you dont know what that means - just leave it there
+   install/           the software to run DeepaMehta
+   libs/              3rd party libraries
+   build.xml          buildfile for ant
+   config.xml         configurations read by the buildfile
+   build.properties   some basic configuration options
 
 
-Step 2: Configure 
+Step 2: Configure
 -----------------
 
-1) At the very minimum configuration effort you must add the directory /&lt;Ant&gt;/bin to your
-   environment, so you can start the ant tool from a console window.
-
-   * Windows:            set the PATH environment variable
-   * Linux / Mac OS X:   create a symbolic link in /usr/bin
-
-   To test the ant installation type &quot;ant -version&quot;. A short message about the ant version
-   should appear.
-
-2) Optional: change the default DeepaMehta configuration by editing the file &quot;config.xml&quot;
+1) Optional: change the default DeepaMehta configuration by editing the file &quot;build.properties&quot;
    with a text editor.
 
    a) You are strongly advised to change the password for the DeepaMehta database user by
@@ -110,26 +106,28 @@
       If you change the password here, you must set it in install/client/dms.rc too.
       The password is part of the connection parameters of the &quot;default&quot; instance.
 
-   b) If you want use the example web applications you must set the four &quot;web.*&quot;
-      properties to point to your servlet engine installation
+   b) If you want use the example web applications you must set the &quot;tomcat.root&quot;
+      property to point to your servlet engine installation
 
-         &lt;!-- Servlet Engine --&gt;
-         &lt;property name=&quot;web.deploy.dir&quot;  value=&quot;/usr/local/tomcat/webapps&quot;/&gt;
-         &lt;property name=&quot;web.lib.dir&quot;     value=&quot;/usr/local/tomcat/shared/lib&quot;/&gt;
-         &lt;property name=&quot;web.classes.dir&quot; value=&quot;/usr/local/tomcat/shared/classes&quot;/&gt;
-         &lt;property name=&quot;web.servlet.lib&quot; value=&quot;/usr/local/tomcat/common/lib/servlet-api.jar&quot;/&gt;
+          # Servlet Engine
+          tomcat.root			=/usr/local/tomcat
 
    c) If you want deploy 3rd party DeepaMehta applications, e.g. &quot;Kiezatlas&quot; add them to
       the &quot;dmapps&quot; path element.
 
-         &lt;!-- DeepaMehta Applications --&gt;
-         &lt;property name=&quot;appspath&quot; location=&quot;/Users/fred/My DeepaMehta Applications&quot;/&gt;
-         &lt;path id=&quot;dmapps&quot;&gt;
-            ...
-            &lt;pathelement location=&quot;${appspath}/Kiez-Atlas/kiezatlas.jar&quot;/&gt;
-         &lt;/path&gt;
+      within build.properties
 
+          # DeepaMehta Applications
+          appspath			=/Users/fred/My DeepaMehta Applications
 
+      within build.xml
+      
+          &lt;!-- DeepaMehta Applications --&gt;
+          &lt;path id=&quot;dmapps&quot;&gt;
+              ...
+              &lt;pathelement location=&quot;${appspath}/Kiez-Atlas/kiezatlas.jar&quot;/&gt;
+          &lt;/path&gt;
+
 Step 3: Install
 ---------------
 

Added: branches/eschnepel/ant/LICENSE
===================================================================
--- branches/eschnepel/ant/LICENSE	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/LICENSE	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,203 @@
+/*
+ *                                 Apache License
+ *                           Version 2.0, January 2004
+ *                        <A HREF="http://www.apache.org/licenses/">http://www.apache.org/licenses/</A>
+ *
+ *   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
+ *
+ *   1. Definitions.
+ *
+ *      &quot;License&quot; shall mean the terms and conditions for use, reproduction,
+ *      and distribution as defined by Sections 1 through 9 of this document.
+ *
+ *      &quot;Licensor&quot; shall mean the copyright owner or entity authorized by
+ *      the copyright owner that is granting the License.
+ *
+ *      &quot;Legal Entity&quot; shall mean the union of the acting entity and all
+ *      other entities that control, are controlled by, or are under common
+ *      control with that entity. For the purposes of this definition,
+ *      &quot;control&quot; means (i) the power, direct or indirect, to cause the
+ *      direction or management of such entity, whether by contract or
+ *      otherwise, or (ii) ownership of fifty percent (50%) or more of the
+ *      outstanding shares, or (iii) beneficial ownership of such entity.
+ *
+ *      &quot;You&quot; (or &quot;Your&quot;) shall mean an individual or Legal Entity
+ *      exercising permissions granted by this License.
+ *
+ *      &quot;Source&quot; form shall mean the preferred form for making modifications,
+ *      including but not limited to software source code, documentation
+ *      source, and configuration files.
+ *
+ *      &quot;Object&quot; form shall mean any form resulting from mechanical
+ *      transformation or translation of a Source form, including but
+ *      not limited to compiled object code, generated documentation,
+ *      and conversions to other media types.
+ *
+ *      &quot;Work&quot; shall mean the work of authorship, whether in Source or
+ *      Object form, made available under the License, as indicated by a
+ *      copyright notice that is included in or attached to the work
+ *      (an example is provided in the Appendix below).
+ *
+ *      &quot;Derivative Works&quot; shall mean any work, whether in Source or Object
+ *      form, that is based on (or derived from) the Work and for which the
+ *      editorial revisions, annotations, elaborations, or other modifications
+ *      represent, as a whole, an original work of authorship. For the purposes
+ *      of this License, Derivative Works shall not include works that remain
+ *      separable from, or merely link (or bind by name) to the interfaces of,
+ *      the Work and Derivative Works thereof.
+ *
+ *      &quot;Contribution&quot; shall mean any work of authorship, including
+ *      the original version of the Work and any modifications or additions
+ *      to that Work or Derivative Works thereof, that is intentionally
+ *      submitted to Licensor for inclusion in the Work by the copyright owner
+ *      or by an individual or Legal Entity authorized to submit on behalf of
+ *      the copyright owner. For the purposes of this definition, &quot;submitted&quot;
+ *      means any form of electronic, verbal, or written communication sent
+ *      to the Licensor or its representatives, including but not limited to
+ *      communication on electronic mailing lists, source code control systems,
+ *      and issue tracking systems that are managed by, or on behalf of, the
+ *      Licensor for the purpose of discussing and improving the Work, but
+ *      excluding communication that is conspicuously marked or otherwise
+ *      designated in writing by the copyright owner as &quot;Not a Contribution.&quot;
+ *
+ *      &quot;Contributor&quot; shall mean Licensor and any individual or Legal Entity
+ *      on behalf of whom a Contribution has been received by Licensor and
+ *      subsequently incorporated within the Work.
+ *
+ *   2. Grant of Copyright License. Subject to the terms and conditions of
+ *      this License, each Contributor hereby grants to You a perpetual,
+ *      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
+ *      copyright license to reproduce, prepare Derivative Works of,
+ *      publicly display, publicly perform, sublicense, and distribute the
+ *      Work and such Derivative Works in Source or Object form.
+ *
+ *   3. Grant of Patent License. Subject to the terms and conditions of
+ *      this License, each Contributor hereby grants to You a perpetual,
+ *      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
+ *      (except as stated in this section) patent license to make, have made,
+ *      use, offer to sell, sell, import, and otherwise transfer the Work,
+ *      where such license applies only to those patent claims licensable
+ *      by such Contributor that are necessarily infringed by their
+ *      Contribution(s) alone or by combination of their Contribution(s)
+ *      with the Work to which such Contribution(s) was submitted. If You
+ *      institute patent litigation against any entity (including a
+ *      cross-claim or counterclaim in a lawsuit) alleging that the Work
+ *      or a Contribution incorporated within the Work constitutes direct
+ *      or contributory patent infringement, then any patent licenses
+ *      granted to You under this License for that Work shall terminate
+ *      as of the date such litigation is filed.
+ *
+ *   4. Redistribution. You may reproduce and distribute copies of the
+ *      Work or Derivative Works thereof in any medium, with or without
+ *      modifications, and in Source or Object form, provided that You
+ *      meet the following conditions:
+ *
+ *      (a) You must give any other recipients of the Work or
+ *          Derivative Works a copy of this License; and
+ *
+ *      (b) You must cause any modified files to carry prominent notices
+ *          stating that You changed the files; and
+ *
+ *      (c) You must retain, in the Source form of any Derivative Works
+ *          that You distribute, all copyright, patent, trademark, and
+ *          attribution notices from the Source form of the Work,
+ *          excluding those notices that do not pertain to any part of
+ *          the Derivative Works; and
+ *
+ *      (d) If the Work includes a &quot;NOTICE&quot; text file as part of its
+ *          distribution, then any Derivative Works that You distribute must
+ *          include a readable copy of the attribution notices contained
+ *          within such NOTICE file, excluding those notices that do not
+ *          pertain to any part of the Derivative Works, in at least one
+ *          of the following places: within a NOTICE text file distributed
+ *          as part of the Derivative Works; within the Source form or
+ *          documentation, if provided along with the Derivative Works; or,
+ *          within a display generated by the Derivative Works, if and
+ *          wherever such third-party notices normally appear. The contents
+ *          of the NOTICE file are for informational purposes only and
+ *          do not modify the License. You may add Your own attribution
+ *          notices within Derivative Works that You distribute, alongside
+ *          or as an addendum to the NOTICE text from the Work, provided
+ *          that such additional attribution notices cannot be construed
+ *          as modifying the License.
+ *
+ *      You may add Your own copyright statement to Your modifications and
+ *      may provide additional or different license terms and conditions
+ *      for use, reproduction, or distribution of Your modifications, or
+ *      for any such Derivative Works as a whole, provided Your use,
+ *      reproduction, and distribution of the Work otherwise complies with
+ *      the conditions stated in this License.
+ *
+ *   5. Submission of Contributions. Unless You explicitly state otherwise,
+ *      any Contribution intentionally submitted for inclusion in the Work
+ *      by You to the Licensor shall be under the terms and conditions of
+ *      this License, without any additional terms or conditions.
+ *      Notwithstanding the above, nothing herein shall supersede or modify
+ *      the terms of any separate license agreement you may have executed
+ *      with Licensor regarding such Contributions.
+ *
+ *   6. Trademarks. This License does not grant permission to use the trade
+ *      names, trademarks, service marks, or product names of the Licensor,
+ *      except as required for reasonable and customary use in describing the
+ *      origin of the Work and reproducing the content of the NOTICE file.
+ *
+ *   7. Disclaimer of Warranty. Unless required by applicable law or
+ *      agreed to in writing, Licensor provides the Work (and each
+ *      Contributor provides its Contributions) on an &quot;AS IS&quot; BASIS,
+ *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
+ *      implied, including, without limitation, any warranties or conditions
+ *      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
+ *      PARTICULAR PURPOSE. You are solely responsible for determining the
+ *      appropriateness of using or redistributing the Work and assume any
+ *      risks associated with Your exercise of permissions under this License.
+ *
+ *   8. Limitation of Liability. In no event and under no legal theory,
+ *      whether in tort (including negligence), contract, or otherwise,
+ *      unless required by applicable law (such as deliberate and grossly
+ *      negligent acts) or agreed to in writing, shall any Contributor be
+ *      liable to You for damages, including any direct, indirect, special,
+ *      incidental, or consequential damages of any character arising as a
+ *      result of this License or out of the use or inability to use the
+ *      Work (including but not limited to damages for loss of goodwill,
+ *      work stoppage, computer failure or malfunction, or any and all
+ *      other commercial damages or losses), even if such Contributor
+ *      has been advised of the possibility of such damages.
+ *
+ *   9. Accepting Warranty or Additional Liability. While redistributing
+ *      the Work or Derivative Works thereof, You may choose to offer,
+ *      and charge a fee for, acceptance of support, warranty, indemnity,
+ *      or other liability obligations and/or rights consistent with this
+ *      License. However, in accepting such obligations, You may act only
+ *      on Your own behalf and on Your sole responsibility, not on behalf
+ *      of any other Contributor, and only if You agree to indemnify,
+ *      defend, and hold each Contributor harmless for any liability
+ *      incurred by, or claims asserted against, such Contributor by reason
+ *      of your accepting any such warranty or additional liability.
+ *
+ *   END OF TERMS AND CONDITIONS
+ *
+ *   APPENDIX: How to apply the Apache License to your work.
+ *
+ *      To apply the Apache License to your work, attach the following
+ *      boilerplate notice, with the fields enclosed by brackets &quot;[]&quot;
+ *      replaced with your own identifying information. (Don't include
+ *      the brackets!)  The text should be enclosed in the appropriate
+ *      comment syntax for the file format. We also recommend that a
+ *      file or class name and description of purpose be included on the
+ *      same &quot;printed page&quot; as the copyright notice for easier
+ *      identification within third-party archives.
+ *
+ *   Copyright [yyyy] [name of copyright owner]
+ *
+ *   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
+ *   you may not use this file except in compliance with the License.
+ *   You may obtain a copy of the License at
+ *
+ *       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+ *
+ *   Unless required by applicable law or agreed to in writing, software
+ *   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ *   See the License for the specific language governing permissions and
+ *   limitations under the License.
+ */

Added: branches/eschnepel/ant/LICENSE.dom
===================================================================
--- branches/eschnepel/ant/LICENSE.dom	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/LICENSE.dom	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,71 @@
+This license came from:
+<A HREF="http://www.w3.org/Consortium/Legal/copyright-software-19980720">http://www.w3.org/Consortium/Legal/copyright-software-19980720</A>
+
+
+W3C&#174; SOFTWARE NOTICE AND LICENSE
+Copyright &#169; 1994-2001 World
+Wide Web Consortium, &lt;a href=&quot;<A HREF="http://www.w3.org/">http://www.w3.org/</A>&quot;&gt;World
+Wide Web Consortium&lt;/a&gt;, (&lt;a href=
+&quot;<A HREF="http://www.lcs.mit.edu/">http://www.lcs.mit.edu/</A>&quot;&gt;Massachusetts Institute of
+Technology&lt;/a&gt;, &lt;a href=&quot;<A HREF="http://www.inria.fr/">http://www.inria.fr/</A>&quot;&gt;Institut National de
+Recherche en Informatique et en Automatique&lt;/a&gt;, &lt;a href=
+&quot;<A HREF="http://www.keio.ac.jp/">http://www.keio.ac.jp/</A>&quot;&gt;Keio University&lt;/a&gt;). All Rights Reserved.
+<A HREF="http://www.w3.org/Consortium/Legal/">http://www.w3.org/Consortium/Legal/</A>
+
+This W3C work (including software, documents, or other related
+items) is being provided by the copyright holders under the
+following license. By obtaining, using and/or copying this work,
+you (the licensee) agree that you have read, understood, and will
+comply with the following terms and conditions:
+Permission to use, copy, modify, and distribute this software
+and its documentation, with or without modification,&#160; for any
+purpose and without fee or royalty is hereby granted, provided that
+you include the following on ALL copies of the software and
+documentation or portions thereof, including modifications, that
+you make:
+
+The full text of this NOTICE in a location viewable to users of
+the redistributed or derivative work.
+
+Any pre-existing intellectual property disclaimers, notices, or
+terms and conditions. If none exist, a short notice of the
+following form (hypertext is preferred, text is permitted) should
+be used within the body of any redistributed or derivative code:
+&quot;Copyright &#169; [$date-of-software] World Wide Web Consortium, (Massachusetts Institute of
+Technology, Institut National de
+Recherche en Informatique et en Automatique, Keio University). All Rights Reserved.
+<A HREF="http://www.w3.org/Consortium/Legal/">http://www.w3.org/Consortium/Legal/</A>&quot;
+
+Notice of any changes or modifications to the W3C files,
+including the date changes were made. (We recommend you provide 
+URIs to the location from which the code is derived.)
+
+THIS SOFTWARE AND DOCUMENTATION IS PROVIDED &quot;AS IS,&quot; AND
+COPYRIGHT HOLDERS MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR
+IMPLIED, INCLUDING BUT NOT LIMITED TO, WARRANTIES OF
+MERCHANTABILITY OR FITNESS FOR ANY PARTICULAR PURPOSE OR THAT THE
+USE OF THE SOFTWARE OR DOCUMENTATION WILL NOT INFRINGE ANY THIRD
+PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.
+COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT,
+SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE
+SOFTWARE OR DOCUMENTATION.
+
+The name and trademarks of copyright holders may NOT be used in
+advertising or publicity pertaining to the software without
+specific, written prior permission. Title to copyright in this
+software and any associated documentation will at all times remain
+with copyright holders.
+____________________________________
+This formulation of W3C's notice and license became active on
+August 14 1998 so as to improve compatibility with GPL. This
+version ensures that W3C software licensing terms are no more
+restrictive than GPL and consequently W3C software may be
+distributed in GPL packages. See the older formulation for the
+policy prior to this date. Please see our Copyright FAQ for common 
+questions about using materials from
+our site, including specific terms and conditions for packages like
+libwww, Amaya, and Jigsaw. 
+Other questions about this notice can be
+directed to <A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">site-policy at w3.org.</A>
+
+webmaster

Added: branches/eschnepel/ant/LICENSE.sax
===================================================================
--- branches/eschnepel/ant/LICENSE.sax	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/LICENSE.sax	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,20 @@
+This license came from: <A HREF="http://www.megginson.com/SAX/copying.html">http://www.megginson.com/SAX/copying.html</A>
+  However please note future versions of SAX may be covered 
+  under <A HREF="http://saxproject.org/?selected=pd">http://saxproject.org/?selected=pd</A>
+
+
+This page is now out of date -- see the new SAX site at 
+<A HREF="http://www.saxproject.org/">http://www.saxproject.org/</A> for more up-to-date
+releases and other information. Please change your bookmarks.
+
+
+SAX2 is Free!
+
+I hereby abandon any property rights to SAX 2.0 (the Simple API for
+XML), and release all of the SAX 2.0 source code, compiled code, and
+documentation contained in this distribution into the Public Domain.
+SAX comes with NO WARRANTY or guarantee of fitness for any
+purpose.
+
+David Megginson, <A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">david at megginson.com</A>
+2000-05-05
\ No newline at end of file

Added: branches/eschnepel/ant/LICENSE.xerces
===================================================================
--- branches/eschnepel/ant/LICENSE.xerces	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/LICENSE.xerces	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,56 @@
+/*
+ * The Apache Software License, Version 1.1
+ *
+ *
+ * Copyright (c) 1999-2002 The Apache Software Foundation.  All rights 
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer. 
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in
+ *    the documentation and/or other materials provided with the
+ *    distribution.
+ *
+ * 3. The end-user documentation included with the redistribution,
+ *    if any, must include the following acknowledgment:  
+ *       &quot;This product includes software developed by the
+ *        Apache Software Foundation (<A HREF="http://www.apache.org/">http://www.apache.org/</A>).&quot;
+ *    Alternately, this acknowledgment may appear in the software itself,
+ *    if and wherever such third-party acknowledgments normally appear.
+ *
+ * 4. The names &quot;Xerces&quot; and &quot;Apache Software Foundation&quot; must
+ *    not be used to endorse or promote products derived from this
+ *    software without prior written permission. For written 
+ *    permission, please contact <A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">apache at apache.org.</A>
+ *
+ * 5. Products derived from this software may not be called &quot;Apache&quot;,
+ *    nor may &quot;Apache&quot; appear in their name, without prior written
+ *    permission of the Apache Software Foundation.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation and was
+ * originally based on software copyright (c) 1999, International
+ * Business Machines, Inc., <A HREF="http://www.ibm.com.">http://www.ibm.com.</A>  For more
+ * information on the Apache Software Foundation, please see
+ * &lt;<A HREF="http://www.apache.org/">http://www.apache.org/</A>&gt;.
+ */

Added: branches/eschnepel/ant/NOTICE
===================================================================
--- branches/eschnepel/ant/NOTICE	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/NOTICE	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,20 @@
+   =========================================================================
+   ==  NOTICE file corresponding to the section 4 d of                    ==
+   ==  the Apache License, Version 2.0,                                   ==
+   ==  in this case for the Apache Ant distribution.                      ==
+   =========================================================================
+
+   Apache Ant
+   Copyright 1999-2006 The Apache Software Foundation
+
+   This product includes software developed by
+   The Apache Software Foundation (<A HREF="http://www.apache.org/">http://www.apache.org/</A>).
+
+   This product includes also software developed by :
+     - the W3C consortium (<A HREF="http://www.w3c.org">http://www.w3c.org</A>) ,
+     - the SAX project (<A HREF="http://www.saxproject.org">http://www.saxproject.org</A>)
+
+   The &lt;sync&gt; task is based on code Copyright (c) 2002, Landmark
+   Graphics Corp that has been kindly donated to the Apache Software
+   Foundation.
+

Added: branches/eschnepel/ant/README
===================================================================
--- branches/eschnepel/ant/README	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/README	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,70 @@
+
+                                 A     N     T
+ 
+
+  What is it? 
+  -----------
+  
+  Ant is a Java based build tool. In theory it is kind of like &quot;make&quot; 
+  without makes wrinkles and with the full portability of pure java code.
+
+  
+  Why?
+  ----
+  
+  Why another build tool when there is already make, gnumake, nmake, jam, 
+  and others? Because all of those tools have limitations that its original 
+  author couldn't live with when developing software across multiple platforms. 
+  
+  Make-like tools are inherently shell based. They evaluate a set of 
+  dependencies and then execute commands not unlike what you would issue on a 
+  shell. This means that you can easily extend these tools by using or writing 
+  any program for the OS that you are working on. However, this also means that 
+  you limit yourself to the OS, or at least the OS type such as Unix, that you 
+  are working on.
+  
+  Makefiles are inherently evil as well. Anybody who has worked on them for any 
+  time has run into the dreaded tab problem. &quot;Is my command not executing 
+  because I have a space in front of my tab!!!&quot; said the original author of Ant 
+  way too many times. Tools like Jam took care of this to a great degree, but 
+  still use yet another format to use and remember.
+  
+  Ant is different. Instead a model where it is extended with shell based 
+  commands, it is extended using Java classes. Instead of writing shell 
+  commands, the configuration files are XML based calling out a target tree 
+  where various tasks get executed. Each task is run by an object which 
+  implements a particular Task interface.
+  
+  Granted, this removes some of the expressive power that is inherent by being 
+  able to construct a shell command such as `find . -name foo -exec rm {}` but 
+  it gives you the ability to be cross platform. To work anywhere and 
+  everywhere. And hey, if you really need to execute a shell command, Ant has 
+  an exec rule that allows different commands to be executed based on the OS 
+  that it is executing on.
+
+  The Latest Version
+  ------------------
+
+  Details of the latest version can be found on the Apache Ant
+  Project web site &lt;<A HREF="http://ant.apache.org/">http://ant.apache.org/</A>&gt;.
+
+
+  Documentation
+  -------------
+
+  Documentation is available in HTML format, in the docs/ directory.
+  For information about building and installing Ant, see
+  docs/manual/index.html
+
+
+  Licensing
+  ---------
+
+  This software is licensed under the terms you may find in the file 
+  named &quot;LICENSE&quot; in this directory.
+  
+
+  Thanks for using Ant.
+
+                                          The Apache Ant Project
+                                         &lt;<A HREF="http://ant.apache.org/">http://ant.apache.org/</A>&gt;

Added: branches/eschnepel/ant/bin/ant
===================================================================
--- branches/eschnepel/ant/bin/ant	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/ant	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,326 @@
+#! /bin/sh
+
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the &quot;License&quot;); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+# Extract launch and ant arguments, (see details below).
+ant_exec_args=
+no_config=false
+use_jikes_default=false
+ant_exec_debug=false
+show_help=false
+for arg in &quot;$@&quot; ; do
+  if [ &quot;$arg&quot; = &quot;--noconfig&quot; ] ; then
+    no_config=true
+  elif [ &quot;$arg&quot; = &quot;--usejikes&quot; ] ; then
+    use_jikes_default=true
+  elif [ &quot;$arg&quot; = &quot;--execdebug&quot; ] ; then
+    ant_exec_debug=true
+  elif [ my&quot;$arg&quot; = my&quot;--h&quot;  -o my&quot;$arg&quot; = my&quot;--help&quot;  ] ; then
+    show_help=true
+    ant_exec_args=&quot;$ant_exec_args -h&quot;
+  else
+    if [  my&quot;$arg&quot; = my&quot;-h&quot;  -o  my&quot;$arg&quot; = my&quot;-help&quot; ] ; then
+      show_help=true
+    fi
+    ant_exec_args=&quot;$ant_exec_args \&quot;$arg\&quot;&quot;
+  fi
+done
+
+# Source/default ant configuration
+if $no_config ; then
+  rpm_mode=false
+  usejikes=$use_jikes_default
+else
+  # load system-wide ant configuration (ONLY if ANT_HOME has NOT been set)
+  if [ -z &quot;$ANT_HOME&quot; -o &quot;$ANT_HOME&quot; = &quot;/usr/share/ant&quot; ]; then
+      if [ -f &quot;/etc/ant.conf&quot; ] ; then
+          . /etc/ant.conf
+      fi
+  fi
+
+  # load user ant configuration
+  if [ -f &quot;$HOME/.ant/ant.conf&quot; ] ; then
+    . $HOME/.ant/ant.conf
+  fi
+  if [ -f &quot;$HOME/.antrc&quot; ] ; then
+    . &quot;$HOME/.antrc&quot;
+  fi
+
+  # provide default configuration values
+  if [ -z &quot;$rpm_mode&quot; ] ; then
+    rpm_mode=false
+  fi
+  if [ -z &quot;$usejikes&quot; ] ; then
+    usejikes=$use_jikes_default
+  fi
+fi
+
+# Setup Java environment in rpm mode
+if $rpm_mode ; then
+  if [ -f /usr/share/java-utils/java-functions ] ; then
+    . /usr/share/java-utils/java-functions
+    set_jvm
+    set_javacmd
+  fi
+fi
+
+# OS specific support.  $var _must_ be set to either true or false.
+cygwin=false;
+darwin=false;
+case &quot;`uname`&quot; in
+  CYGWIN*) cygwin=true ;;
+  Darwin*) darwin=true
+           if [ -z &quot;$JAVA_HOME&quot; ] ; then
+             JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home
+           fi
+           ;;
+esac
+
+if [ -z &quot;$ANT_HOME&quot; -o ! -d &quot;$ANT_HOME&quot; ] ; then
+  ## resolve links - $0 may be a link to ant's home
+  PRG=&quot;$0&quot;
+  progname=`basename &quot;$0&quot;`
+
+  # need this for relative symlinks
+  while [ -h &quot;$PRG&quot; ] ; do
+    ls=`ls -ld &quot;$PRG&quot;`
+    link=`expr &quot;$ls&quot; : '.*-&gt; \(.*\)$'`
+    if expr &quot;$link&quot; : '/.*' &gt; /dev/null; then
+    PRG=&quot;$link&quot;
+    else
+    PRG=`dirname &quot;$PRG&quot;`&quot;/$link&quot;
+    fi
+  done
+
+  ANT_HOME=`dirname &quot;$PRG&quot;`/..
+
+  # make it fully qualified
+  ANT_HOME=`cd &quot;$ANT_HOME&quot; &amp;&amp; pwd`
+fi
+
+# For Cygwin, ensure paths are in UNIX format before anything is touched
+if $cygwin ; then
+  [ -n &quot;$ANT_HOME&quot; ] &amp;&amp;
+    ANT_HOME=`cygpath --unix &quot;$ANT_HOME&quot;`
+  [ -n &quot;$JAVA_HOME&quot; ] &amp;&amp;
+    JAVA_HOME=`cygpath --unix &quot;$JAVA_HOME&quot;`
+fi
+
+# set ANT_LIB location
+ANT_LIB=&quot;${ANT_HOME}/lib&quot;
+
+if [ -z &quot;$JAVACMD&quot; ] ; then
+  if [ -n &quot;$JAVA_HOME&quot;  ] ; then
+    # IBM's JDK on AIX uses strange locations for the executables
+    if [ -x &quot;$JAVA_HOME/jre/sh/java&quot; ] ; then
+      JAVACMD=&quot;$JAVA_HOME/jre/sh/java&quot;
+    elif [ -x &quot;$JAVA_HOME/jre/bin/java&quot; ] ; then
+      JAVACMD=&quot;$JAVA_HOME/jre/bin/java&quot;
+    else
+      JAVACMD=&quot;$JAVA_HOME/bin/java&quot;
+    fi
+  else
+    JAVACMD=`which java 2&gt; /dev/null `
+    if [ -z &quot;$JAVACMD&quot; ] ; then
+        JAVACMD=java
+    fi
+  fi
+fi
+
+if [ ! -x &quot;$JAVACMD&quot; ] ; then
+  echo &quot;Error: JAVA_HOME is not defined correctly.&quot;
+  echo &quot;  We cannot execute $JAVACMD&quot;
+  exit 1
+fi
+
+# Build local classpath using just the launcher in non-rpm mode or
+# use the Jpackage helper in rpm mode with basic and default jars
+# specified in the ant.conf configuration. Because the launcher is
+# used, libraries linked in ANT_HOME/lib will also be included, but this
+# is discouraged as it is not java-version safe. A user should
+# request optional jars and their dependencies via the OPT_JAR_LIST
+# variable
+if $rpm_mode &amp;&amp; [ -x /usr/bin/build-classpath ] ; then
+  LOCALCLASSPATH=&quot;$(/usr/bin/build-classpath ant ant-launcher jaxp_parser_impl xml-commons-apis)&quot;
+
+  # If no optional jars have been specified then build the default list
+  if [ -z &quot;$OPT_JAR_LIST&quot; ] ; then
+    for file in /etc/ant.d/*; do
+      if [ -f &quot;$file&quot; ]; then
+        case &quot;$file&quot; in
+        *~) ;;
+        *#*) ;;
+        *.rpmsave) ;;
+        *.rpmnew) ;;
+        *)
+          for dep in `cat &quot;$file&quot;`; do
+            case &quot;$OPT_JAR_LIST&quot; in
+            *&quot;$dep&quot;*) ;;
+            *) OPT_JAR_LIST=&quot;$OPT_JAR_LIST${OPT_JAR_LIST:+ }$dep&quot;
+            esac
+          done
+        esac
+      fi
+    done
+  fi
+
+  # If the user requested to try to add some other jars to the classpath
+  if [ -n &quot;$OPT_JAR_LIST&quot; ] ; then
+    _OPTCLASSPATH=&quot;$(/usr/bin/build-classpath $OPT_JAR_LIST 2&gt; /dev/null)&quot;
+    if [ -n &quot;$_OPTCLASSPATH&quot; ] ; then 
+      LOCALCLASSPATH=&quot;$LOCALCLASSPATH:$_OPTCLASSPATH&quot;
+    fi
+  fi
+
+  # Explicitly add javac path to classpath, assume JAVA_HOME set
+  # properly in rpm mode
+  if [ -f &quot;$JAVA_HOME/lib/tools.jar&quot; ] ; then
+    LOCALCLASSPATH=&quot;$LOCALCLASSPATH:$JAVA_HOME/lib/tools.jar&quot;
+  fi
+  if [ -f &quot;$JAVA_HOME/lib/classes.zip&quot; ] ; then
+    LOCALCLASSPATH=&quot;$LOCALCLASSPATH:$JAVA_HOME/lib/classes.zip&quot;
+  fi
+
+  # if CLASSPATH_OVERRIDE env var is set, LOCALCLASSPATH will be
+  # user CLASSPATH first and ant-found jars after.
+  # In that case, the user CLASSPATH will override ant-found jars
+  #
+  # if CLASSPATH_OVERRIDE is not set, we'll have the normal behaviour
+  # with ant-found jars first and user CLASSPATH after
+  if [ -n &quot;$CLASSPATH&quot; ] ; then
+    # merge local and specified classpath 
+    if [ -z &quot;$LOCALCLASSPATH&quot; ] ; then 
+      LOCALCLASSPATH=&quot;$CLASSPATH&quot;
+    elif [ -n &quot;$CLASSPATH_OVERRIDE&quot; ] ; then
+      LOCALCLASSPATH=&quot;$CLASSPATH:$LOCALCLASSPATH&quot;
+    else
+      LOCALCLASSPATH=&quot;$LOCALCLASSPATH:$CLASSPATH&quot;
+    fi
+
+    # remove class path from launcher -cp option
+    CLASSPATH=&quot;&quot;
+  fi
+else
+  # not using rpm_mode; use launcher to determine classpaths
+  if [ -z &quot;$LOCALCLASSPATH&quot; ] ; then
+      LOCALCLASSPATH=$ANT_LIB/ant-launcher.jar
+  else
+      LOCALCLASSPATH=$ANT_LIB/ant-launcher.jar:$LOCALCLASSPATH
+  fi
+fi
+
+if [ -n &quot;$JAVA_HOME&quot; ] ; then
+  # OSX hack to make Ant work with jikes
+  if $darwin ; then
+    OSXHACK=&quot;${JAVA_HOME}/../Classes&quot;
+    if [ -d &quot;${OSXHACK}&quot; ] ; then
+      for i in &quot;${OSXHACK}&quot;/*.jar
+      do
+        JIKESPATH=&quot;$JIKESPATH:$i&quot;
+      done
+    fi
+  fi
+fi
+
+# Allow Jikes support (off by default)
+if $usejikes; then
+  ANT_OPTS=&quot;$ANT_OPTS -Dbuild.compiler=jikes&quot;
+fi
+
+# For Cygwin, switch paths to appropriate format before running java
+# For PATHs convert to unix format first, then to windows format to ensure
+# both formats are supported. Probably this will fail on directories with ;
+# in the name in the path. Let's assume that paths containing ; are more
+# rare than windows style paths on cygwin.
+if $cygwin; then
+  if [ &quot;$OS&quot; = &quot;Windows_NT&quot; ] &amp;&amp; cygpath -m .&gt;/dev/null 2&gt;/dev/null ; then
+    format=mixed
+  else
+    format=windows
+  fi
+  ANT_HOME=`cygpath --$format &quot;$ANT_HOME&quot;`
+  ANT_LIB=`cygpath --$format &quot;$ANT_LIB&quot;`
+  JAVA_HOME=`cygpath --$format &quot;$JAVA_HOME&quot;`
+  LCP_TEMP=`cygpath --path --unix &quot;$LOCALCLASSPATH&quot;`
+  LOCALCLASSPATH=`cygpath --path --$format &quot;$LCP_TEMP&quot;`
+  if [ -n &quot;$CLASSPATH&quot; ] ; then
+    CP_TEMP=`cygpath --path --unix &quot;$CLASSPATH&quot;`
+    CLASSPATH=`cygpath --path --$format &quot;$CP_TEMP&quot;`
+  fi
+  CYGHOME=`cygpath --$format &quot;$HOME&quot;`
+fi
+
+# Show script help if requested
+if $show_help ; then
+  echo $0 '[script options] [options] [target [target2 [target3] ..]]'
+  echo 'Script Options:'
+  echo '  --help, --h            print this message and ant help'
+  echo '  --noconfig             suppress sourcing of /etc/ant.conf,'
+  echo '                         $HOME/.ant/ant.conf, and $HOME/.antrc'
+  echo '                         configuration files'
+  echo '  --usejikes             enable use of jikes by default, unless'
+  echo '                         set explicitly in configuration files'
+  echo '  --execdebug            print ant exec line generated by this'
+  echo '                         launch script'
+  echo '  '
+fi
+# add a second backslash to variables terminated by a backslash under cygwin
+if $cygwin; then
+  case &quot;$ANT_HOME&quot; in
+    *\\ )
+    ANT_HOME=&quot;$ANT_HOME\\&quot;
+    ;;
+  esac
+  case &quot;$CYGHOME&quot; in
+    *\\ )
+    CYGHOME=&quot;$CYGHOME\\&quot;
+    ;;
+  esac
+  case &quot;$JIKESPATH&quot; in
+    *\\ )
+    JIKESPATH=&quot;$JIKESPATH\\&quot;
+    ;;
+  esac
+  case &quot;$LOCALCLASSPATH&quot; in
+    *\\ )
+    LOCALCLASSPATH=&quot;$LOCALCLASSPATH\\&quot;
+    ;;
+  esac
+  case &quot;$CLASSPATH&quot; in
+    *\\ )
+    CLASSPATH=&quot;$CLASSPATH\\&quot;
+    ;;
+  esac
+fi
+# Execute ant using eval/exec to preserve spaces in paths,
+# java options, and ant args
+ant_sys_opts=
+if [ -n &quot;$CYGHOME&quot; ]; then
+  if [ -n &quot;$JIKESPATH&quot; ]; then
+    ant_sys_opts=&quot;-Djikes.class.path=\&quot;$JIKESPATH\&quot; -Dcygwin.user.home=\&quot;$CYGHOME\&quot;&quot;
+  else
+    ant_sys_opts=&quot;-Dcygwin.user.home=\&quot;$CYGHOME\&quot;&quot;
+  fi
+else
+  if [ -n &quot;$JIKESPATH&quot; ]; then
+    ant_sys_opts=&quot;-Djikes.class.path=\&quot;$JIKESPATH\&quot;&quot;
+  fi
+fi
+ant_exec_command=&quot;exec \&quot;$JAVACMD\&quot; $ANT_OPTS -classpath \&quot;$LOCALCLASSPATH\&quot; -Dant.home=\&quot;$ANT_HOME\&quot; -Dant.library.dir=\&quot;$ANT_LIB\&quot; $ant_sys_opts org.apache.tools.ant.launch.Launcher $ANT_ARGS -cp \&quot;$CLASSPATH\&quot; $ant_exec_args&quot;
+if $ant_exec_debug ; then
+    echo $ant_exec_command
+fi
+eval $ant_exec_command


Property changes on: branches/eschnepel/ant/bin/ant
___________________________________________________________________
Name: svn:executable
   + *

Added: branches/eschnepel/ant/bin/ant.bat
===================================================================
--- branches/eschnepel/ant/bin/ant.bat	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/ant.bat	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,226 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">+ at echo</A> off
+
+REM  Licensed to the Apache Software Foundation (ASF) under one or more
+REM  contributor license agreements.  See the NOTICE file distributed with
+REM  this work for additional information regarding copyright ownership.
+REM  The ASF licenses this file to You under the Apache License, Version 2.0
+REM  (the &quot;License&quot;); you may not use this file except in compliance with
+REM  the License.  You may obtain a copy of the License at
+REM 
+REM      <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+REM 
+REM  Unless required by applicable law or agreed to in writing, software
+REM  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+REM  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+REM  See the License for the specific language governing permissions and
+REM  limitations under the License.
+
+REM This is an inordinately troublesome piece of code, particularly because it
+REM tries to work on both Win9x and WinNT-based systems. If we could abandon '9x
+REM support, things would be much easier, but sadly, it is not yet time.
+REM Be cautious about editing this, and only add WinNT specific stuff in code that
+REM only runs on WinNT.
+
+if &quot;%HOME%&quot;==&quot;&quot; goto homeDrivePathPre
+if exist &quot;%HOME%\antrc_pre.bat&quot; call &quot;%HOME%\antrc_pre.bat&quot;
+
+:homeDrivePathPre
+if &quot;%HOMEDRIVE%%HOMEPATH%&quot;==&quot;&quot; goto userProfilePre
+if &quot;%HOMEDRIVE%%HOMEPATH%&quot;==&quot;%HOME%&quot; goto userProfilePre
+if exist &quot;%HOMEDRIVE%%HOMEPATH%\antrc_pre.bat&quot; call &quot;%HOMEDRIVE%%HOMEPATH%\antrc_pre.bat&quot;
+
+:userProfilePre
+if &quot;%USERPROFILE%&quot;==&quot;&quot; goto alpha
+if &quot;%USERPROFILE%&quot;==&quot;%HOME%&quot; goto alpha
+if &quot;%USERPROFILE%&quot;==&quot;%HOMEDRIVE%%HOMEPATH%&quot; goto alpha
+if exist &quot;%USERPROFILE%\antrc_pre.bat&quot; call &quot;%USERPROFILE%\antrc_pre.bat&quot;
+
+:alpha
+
+if &quot;%OS%&quot;==&quot;Windows_NT&quot; @setlocal
+if &quot;%OS%&quot;==&quot;WINNT&quot; @setlocal
+
+if &quot;%ANT_HOME%&quot;==&quot;&quot; goto setDefaultAntHome
+
+:stripAntHome
+if not _%ANT_HOME:~-1%==_\ goto checkClasspath
+set ANT_HOME=%ANT_HOME:~0,-1%
+goto stripAntHome
+
+:setDefaultAntHome
+rem %~dp0 is expanded pathname of the current script under NT
+set ANT_HOME=%~dp0..
+
+:checkClasspath
+set _USE_CLASSPATH=yes
+rem CLASSPATH must not be used if it is equal to &quot;&quot;
+if &quot;%CLASSPATH%&quot;==&quot;&quot;&quot;&quot; set _USE_CLASSPATH=no
+if &quot;%CLASSPATH%&quot;==&quot;&quot; set _USE_CLASSPATH=no
+
+rem Slurp the command line arguments. This loop allows for an unlimited number
+rem of arguments (up to the command line limit, anyway).
+set ANT_CMD_LINE_ARGS=%1
+if &quot;&quot;%1&quot;&quot;==&quot;&quot;&quot;&quot; goto doneStart
+shift
+:setupArgs
+if &quot;&quot;%1&quot;&quot;==&quot;&quot;&quot;&quot; goto doneStart
+if &quot;&quot;%1&quot;&quot;==&quot;&quot;-noclasspath&quot;&quot; goto clearclasspath
+set ANT_CMD_LINE_ARGS=%ANT_CMD_LINE_ARGS% %1
+shift
+goto setupArgs
+
+rem here is there is a -noclasspath in the options
+:clearclasspath
+set _USE_CLASSPATH=no
+shift
+goto setupArgs
+
+rem This label provides a place for the argument list loop to break out
+rem and for NT handling to skip to.
+
+:doneStart
+
+if _USE_CLASSPATH==no goto findAntHome
+
+:stripClasspath
+if not _%CLASSPATH:~-1%==_\ goto findAntHome
+set CLASSPATH=%CLASSPATH:~0,-1%
+goto stripClasspath
+
+:findAntHome
+rem find ANT_HOME if it does not exist due to either an invalid value passed
+rem by the user or the %0 problem on Windows 9x
+if exist &quot;%ANT_HOME%\lib\ant.jar&quot; goto checkJava
+
+rem check for ant in Program Files
+if not exist &quot;%ProgramFiles%\ant&quot; goto checkSystemDrive
+set ANT_HOME=%ProgramFiles%\ant
+goto checkJava
+
+:checkSystemDrive
+rem check for ant in root directory of system drive
+if not exist %SystemDrive%\ant\lib\ant.jar goto checkCDrive
+set ANT_HOME=%SystemDrive%\ant
+goto checkJava
+
+:checkCDrive
+rem check for ant in C:\ant for Win9X users
+if not exist C:\ant\lib\ant.jar goto noAntHome
+set ANT_HOME=C:\ant
+goto checkJava
+
+:noAntHome
+echo ANT_HOME is set incorrectly or ant could not be located. Please set ANT_HOME.
+goto end
+
+:checkJava
+set _JAVACMD=%JAVACMD%
+
+if &quot;%JAVA_HOME%&quot; == &quot;&quot; goto noJavaHome
+if not exist &quot;%JAVA_HOME%\bin\java.exe&quot; goto noJavaHome
+if &quot;%_JAVACMD%&quot; == &quot;&quot; set _JAVACMD=%JAVA_HOME%\bin\java.exe
+goto checkJikes
+
+:noJavaHome
+if &quot;%_JAVACMD%&quot; == &quot;&quot; set _JAVACMD=java.exe
+
+:checkJikes
+if not &quot;%JIKESPATH%&quot;==&quot;&quot; goto runAntWithJikes
+
+:runAnt
+if &quot;%_USE_CLASSPATH%&quot;==&quot;no&quot; goto runAntNoClasspath
+:runAntWithClasspath
+&quot;%_JAVACMD%&quot; %ANT_OPTS% -classpath &quot;%ANT_HOME%\lib\ant-launcher.jar&quot; &quot;-Dant.home=%ANT_HOME%&quot; org.apache.tools.ant.launch.Launcher %ANT_ARGS% -cp &quot;%CLASSPATH%&quot; %ANT_CMD_LINE_ARGS%
+rem Check the error code of the Ant build
+if not &quot;%OS%&quot;==&quot;Windows_NT&quot; goto onError
+set ANT_ERROR=%ERRORLEVEL%
+goto end
+
+:runAntNoClasspath
+&quot;%_JAVACMD%&quot; %ANT_OPTS% -classpath &quot;%ANT_HOME%\lib\ant-launcher.jar&quot; &quot;-Dant.home=%ANT_HOME%&quot; org.apache.tools.ant.launch.Launcher %ANT_ARGS% %ANT_CMD_LINE_ARGS%
+rem Check the error code of the Ant build
+if not &quot;%OS%&quot;==&quot;Windows_NT&quot; goto onError
+set ANT_ERROR=%ERRORLEVEL%
+goto end
+
+:runAntWithJikes
+
+if not _%JIKESPATH:~-1%==_\ goto checkJikesAndClasspath
+set JIKESPATH=%JIKESPATH:~0,-1%
+goto runAntWithJikes
+
+:checkJikesAndClasspath
+
+if &quot;%_USE_CLASSPATH%&quot;==&quot;no&quot; goto runAntWithJikesNoClasspath
+
+:runAntWithJikesAndClasspath
+&quot;%_JAVACMD%&quot; %ANT_OPTS% -classpath &quot;%ANT_HOME%\lib\ant-launcher.jar&quot; &quot;-Dant.home=%ANT_HOME%&quot; &quot;-Djikes.class.path=%JIKESPATH%&quot; org.apache.tools.ant.launch.Launcher %ANT_ARGS%  -cp &quot;%CLASSPATH%&quot; %ANT_CMD_LINE_ARGS%
+rem Check the error code of the Ant build
+if not &quot;%OS%&quot;==&quot;Windows_NT&quot; goto onError
+set ANT_ERROR=%ERRORLEVEL%
+goto end
+
+:runAntWithJikesNoClasspath
+&quot;%_JAVACMD%&quot; %ANT_OPTS% -classpath &quot;%ANT_HOME%\lib\ant-launcher.jar&quot; &quot;-Dant.home=%ANT_HOME%&quot; &quot;-Djikes.class.path=%JIKESPATH%&quot; org.apache.tools.ant.launch.Launcher %ANT_ARGS% %ANT_CMD_LINE_ARGS%
+rem Check the error code of the Ant build
+if not &quot;%OS%&quot;==&quot;Windows_NT&quot; goto onError
+set ANT_ERROR=%ERRORLEVEL%
+goto end
+
+:onError
+rem Windows 9x way of checking the error code.  It matches via brute force.
+for %%i in (1 10 100) do set err%%i=
+for %%i in (0 1 2) do if errorlevel %%i00 set err100=%%i
+if %err100%==2 goto onError200
+if %err100%==0 set err100=
+for %%i in (0 1 2 3 4 5 6 7 8 9) do if errorlevel %err100%%%i0 set err10=%%i
+if &quot;%err100%&quot;==&quot;&quot; if %err10%==0 set err10=
+:onError1
+for %%i in (0 1 2 3 4 5 6 7 8 9) do if errorlevel %err100%%err10%%%i set err1=%%i
+goto onErrorEnd
+:onError200
+for %%i in (0 1 2 3 4 5) do if errorlevel 2%%i0 set err10=%%i
+if err10==5 for %%i in (0 1 2 3 4 5) do if errorlevel 25%%i set err1=%%i
+if not err10==5 goto onError1
+:onErrorEnd
+set ANT_ERROR=%err100%%err10%%err1%
+for %%i in (1 10 100) do set err%%i=
+
+:end
+rem bug ID 32069: resetting an undefined env variable changes the errorlevel.
+if not &quot;%_JAVACMD%&quot;==&quot;&quot; set _JAVACMD=
+if not &quot;%_ANT_CMD_LINE_ARGS%&quot;==&quot;&quot; set ANT_CMD_LINE_ARGS=
+
+if &quot;%ANT_ERROR%&quot;==&quot;0&quot; goto mainEnd
+
+rem Set the return code if we are not in NT.  We can only set
+rem a value of 1, but it's better than nothing.
+if not &quot;%OS%&quot;==&quot;Windows_NT&quot; echo 1 &gt; nul | choice /n /c:1
+
+rem Set the ERRORLEVEL if we are running NT.
+if &quot;%OS%&quot;==&quot;Windows_NT&quot; color 00
+
+goto omega
+
+:mainEnd
+
+rem If there were no errors, we run the post script.
+if &quot;%OS%&quot;==&quot;Windows_NT&quot; @endlocal
+if &quot;%OS%&quot;==&quot;WINNT&quot; @endlocal
+
+if &quot;%HOME%&quot;==&quot;&quot; goto homeDrivePathPost
+if exist &quot;%HOME%\antrc_post.bat&quot; call &quot;%HOME%\antrc_post.bat&quot;
+
+:homeDrivePathPost
+if &quot;%HOMEDRIVE%%HOMEPATH%&quot;==&quot;&quot; goto userProfilePost
+if &quot;%HOMEDRIVE%%HOMEPATH%&quot;==&quot;%HOME%&quot; goto userProfilePost
+if exist &quot;%HOMEDRIVE%%HOMEPATH%\antrc_post.bat&quot; call &quot;%HOMEDRIVE%%HOMEPATH%\antrc_post.bat&quot;
+
+:userProfilePost
+if &quot;%USERPROFILE%&quot;==&quot;&quot; goto omega
+if &quot;%USERPROFILE%&quot;==&quot;%HOME%&quot; goto omega
+if &quot;%USERPROFILE%&quot;==&quot;%HOMEDRIVE%%HOMEPATH%&quot; goto omega
+if exist &quot;%USERPROFILE%\antrc_post.bat&quot; call &quot;%USERPROFILE%\antrc_post.bat&quot;
+
+:omega
+

Added: branches/eschnepel/ant/bin/ant.cmd
===================================================================
--- branches/eschnepel/ant/bin/ant.cmd	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/ant.cmd	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,93 @@
+/* 
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+ 
+    Run ant
+*/
+
+'@echo off'
+parse arg mode envarg '::' antarg
+
+if mode\='.' &amp; mode\='..' &amp; mode\='/' then do
+  envarg = mode envarg
+  mode = ''
+end
+
+if antarg = '' then do
+  antarg = envarg
+  envarg = ''
+end
+
+x = setlocal()
+
+env=&quot;OS2ENVIRONMENT&quot;
+antenv = _getenv_('antenv')
+if _testenv_() = 0 then interpret 'call &quot;' || antenv || '&quot;' '&quot;' || envarg || '&quot;'
+
+if mode = '' then mode = _getenv_('ANT_MODE' '..')
+if mode \= '/' then do
+  runrc = _getenv_('runrc')
+  antrc = _getenv_('antrc' 'antrc.cmd')
+  if mode = '..' then mode = '-r'
+  else mode = ''
+  interpret 'call &quot;' || runrc || '&quot;' antrc '&quot;' || mode || '&quot;'
+end
+
+if _testenv_() = 0 then do
+  say 'Ant environment is not set properly'
+  x = endlocal()
+  exit 16
+end
+
+settings = '-Dant.home=' || ANT_HOME '-Djava.home=' || JAVA_HOME
+
+java = _getenv_('javacmd' 'java')
+opts = value('ANT_OPTS',,env)
+args = value('ANT_ARGS',,env)
+lcp = value('LOCALCLASSPATH',,env)
+cp = value('CLASSPATH',,env)
+if value('ANT_USE_CP',,env) \= '' then do
+  if lcp \= '' &amp; right(lcp, 1) \= ';' then lcp = lcp || ';'
+  lcp = lcp || cp
+  'SET CLASSPATH='
+end
+if lcp\='' then lcp = '-classpath' lcp
+
+cmd = java opts lcp '-jar' ANT_HOME ||'\lib\ant-launcher.jar' settings args antarg
+launcher = stream(ANT_HOME ||'\lib\ant-launcher.jar', 'C', 'query exists')
+if launcher = '' then entry = 'org.apache.tools.ant.Main'
+else entry = 'org.apache.tools.ant.launch.Launcher'
+java opts lcp entry settings args antarg
+
+x = endlocal()
+
+return rc
+
+_testenv_: procedure expose env ANT_HOME JAVA_HOME
+ANT_HOME = value('ANT_HOME',,env)
+if ANT_HOME = '' then return 0
+JAVA_HOME = value('JAVA_HOME',,env)
+if JAVA_HOME = '' then return 0
+cp = translate(value('CLASSPATH',,env))
+if pos(translate(ANT_HOME), cp) = 0 then return 0
+if pos(translate(JAVA_HOME), cp) = 0 then return 0
+return 1
+
+_getenv_: procedure expose env
+parse arg envar default
+if default = '' then default = envar
+var = value(translate(envar),,env)
+if var = '' then var = default
+return var

Added: branches/eschnepel/ant/bin/antRun
===================================================================
--- branches/eschnepel/ant/bin/antRun	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/antRun	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,24 @@
+#! /bin/sh
+
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the &quot;License&quot;); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+# Args: DIR command
+cd &quot;$1&quot;
+CMD=&quot;$2&quot;
+shift
+shift
+
+exec &quot;$CMD&quot; &quot;$@&quot;


Property changes on: branches/eschnepel/ant/bin/antRun
___________________________________________________________________
Name: svn:executable
   + *

Added: branches/eschnepel/ant/bin/antRun.bat
===================================================================
--- branches/eschnepel/ant/bin/antRun.bat	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/antRun.bat	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,50 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">+ at echo</A> off
+
+REM  Licensed to the Apache Software Foundation (ASF) under one or more
+REM  contributor license agreements.  See the NOTICE file distributed with
+REM  this work for additional information regarding copyright ownership.
+REM  The ASF licenses this file to You under the Apache License, Version 2.0
+REM  (the &quot;License&quot;); you may not use this file except in compliance with
+REM  the License.  You may obtain a copy of the License at
+REM 
+REM      <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+REM 
+REM  Unless required by applicable law or agreed to in writing, software
+REM  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+REM  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+REM  See the License for the specific language governing permissions and
+REM  limitations under the License.
+
+if &quot;%OS%&quot;==&quot;Windows_NT&quot; @setlocal
+if &quot;%OS%&quot;==&quot;WINNT&quot; @setlocal
+
+if &quot;&quot;%1&quot;&quot;==&quot;&quot;&quot;&quot; goto runCommand
+
+rem Change drive and directory to %1
+if &quot;%OS%&quot;==&quot;Windows_NT&quot; goto nt_cd
+if &quot;%OS%&quot;==&quot;WINNT&quot; goto nt_cd
+cd &quot;&quot;%1&quot;&quot;
+goto end_cd
+:nt_cd
+cd /d &quot;&quot;%1&quot;&quot;
+:end_cd
+shift
+
+rem Slurp the command line arguments. This loop allows for an unlimited number
+rem of arguments (up to the command line limit, anyway).
+set ANT_RUN_CMD=%1
+if &quot;&quot;%1&quot;&quot;==&quot;&quot;&quot;&quot; goto runCommand
+shift
+:loop
+if &quot;&quot;%1&quot;&quot;==&quot;&quot;&quot;&quot; goto runCommand
+set ANT_RUN_CMD=%ANT_RUN_CMD% %1
+shift
+goto loop
+
+:runCommand
+rem echo %ANT_RUN_CMD%
+%ANT_RUN_CMD%
+
+if &quot;%OS%&quot;==&quot;Windows_NT&quot; @endlocal
+if &quot;%OS%&quot;==&quot;WINNT&quot; @endlocal
+

Added: branches/eschnepel/ant/bin/antRun.pl
===================================================================
--- branches/eschnepel/ant/bin/antRun.pl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/antRun.pl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,66 @@
+#!/usr/bin/perl
+#
+# Licensed to the Apache Software Foundation (ASF) under one or more
+#  contributor license agreements.  See the NOTICE file distributed with
+#  this work for additional information regarding copyright ownership.
+#  The ASF licenses this file to You under the Apache License, Version 2.0
+#  (the &quot;License&quot;); you may not use this file except in compliance with
+#  the License.  You may obtain a copy of the License at
+#
+#      <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+#
+#  Unless required by applicable law or agreed to in writing, software
+#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+#  See the License for the specific language governing permissions and
+#  limitations under the License.
+#
+#######################################################################
+#
+# antRun.pl
+#
+# wrapper script for invoking commands on a platform with Perl installed
+# this is akin to antRun.bat, and antRun the SH script 
+#
+# created:         2001-10-18
+# author:          Jeff Tulley <A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">jtulley at novell.com</A> 
+#######################################################################
+#be fussy about variables
+use strict;
+
+#turn warnings on during dev; generates a few spurious uninitialised var access warnings
+#use warnings;
+
+#and set $debug to 1 to turn on trace info (currently unused)
+my $debug=1;
+
+#######################################################################
+# change drive and directory to &quot;%1&quot;
+my $ANT_RUN_CMD = @ARGV[0];
+
+# assign current run command to &quot;%2&quot;
+chdir (@ARGV[0]) || die &quot;Can't cd to $ARGV[0]: $!\n&quot;;
+if ($^O eq &quot;NetWare&quot;) {
+    # There is a bug in Perl 5 on NetWare, where chdir does not
+    # do anything.  On NetWare, the following path-prefixed form should 
+    # always work. (afaict)
+    $ANT_RUN_CMD .= &quot;/&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">. at ARGV</A>[1];
+}
+else {
+    $ANT_RUN_CMD = @ARGV[1];
+}
+
+# dispose of the first two arguments, leaving only the command's args.
+shift;
+shift;
+
+# run the command
+my $returnValue = system $ANT_RUN_CMD, @ARGV;
+if ($returnValue eq 0) {
+    exit 0;
+}
+else {
+    # only 0 and 1 are widely recognized as exit values
+    # so change the exit value to 1
+    exit 1;
+}


Property changes on: branches/eschnepel/ant/bin/antRun.pl
___________________________________________________________________
Name: svn:executable
   + *

Added: branches/eschnepel/ant/bin/antenv.cmd
===================================================================
--- branches/eschnepel/ant/bin/antenv.cmd	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/antenv.cmd	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,98 @@
+/* 
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+*/
+
+'@echo off'
+call RxFuncAdd &quot;SysLoadFuncs&quot;, &quot;RexxUtil&quot;, &quot;SysLoadFuncs&quot;
+call SysLoadFuncs
+
+/* Prepare the parameters for later use */
+parse arg argv
+mode = ''
+args = ''
+opts = ''
+cp = ''
+lcp = ''
+
+do i = 1 to words(argv)
+  param = word(argv, i)
+  select
+    when param='-lcp' then mode = 'l'
+    when param='-cp' | param='-classpath' then mode = 'c'
+    when abbrev('-opts', param, 4) then mode = 'o'
+    when abbrev('-args', param, 4) then mode = 'a'
+  otherwise
+    select
+      when mode = 'a' then args = space(args param, 1)
+      when mode = 'c' then cp = space(cp param, 1)
+      when mode = 'l' then lcp = space(lcp param, 1)
+      when mode = 'o' then opts = space(opts param, 1)
+    otherwise
+      say 'Option' param 'ignored'
+    end
+  end
+end
+
+env=&quot;OS2ENVIRONMENT&quot;
+antconf = _getenv_('antconf' 'antconf.cmd')
+runrc = _getenv_('runrc')
+interpret 'call &quot;' || runrc || '&quot;' '&quot;' || antconf || '&quot;' 'ETC'
+ANT_HOME = value('ANT_HOME',,env)
+JAVA_HOME = value('JAVA_HOME',,env)
+classpath = value('CLASSPATH',,env)
+classes = stream(JAVA_HOME || &quot;\lib\classes.zip&quot;, &quot;C&quot;, &quot;QUERY EXISTS&quot;)
+if classes \= '' then classpath = prepend(classpath classes)
+classes = stream(JAVA_HOME || &quot;\lib\tools.jar&quot;, &quot;C&quot;, &quot;QUERY EXISTS&quot;)
+if classes \= '' then classpath = prepend(classpath classes)
+
+classpath = prepend(classpath ANT_HOME || '\lib\ant-launcher.jar')
+'SET CLASSPATH=' || classpath
+
+/* Setting classpathes, options and arguments */
+envset = _getenv_('envset')
+if cp\=''   then interpret 'call &quot;' || envset || '&quot;' '&quot;; CLASSPATH&quot;' '&quot;' || cp || '&quot;'
+if lcp\=''  then interpret 'call &quot;' || envset || '&quot;' '&quot;; LOCALCLASSPATH&quot;' '&quot;' || lcp || '&quot;'
+if opts\='' then interpret 'call &quot;' || envset || '&quot;' '&quot;-D ANT_OPTS&quot;' '&quot;' || opts || '&quot;'
+if args\='' then interpret 'call &quot;' || envset || '&quot;' '&quot;ANT_ARGS&quot;' '&quot;' || args || '&quot;'
+
+exit 0
+
+addpath: procedure
+parse arg path elem
+if elem = '' then do
+  if path\='' &amp; right(path, 1)\=';' then path = path || ';'
+  return path
+end
+if substr(path, length(path)) = ';' then glue = ''
+else glue = ';'
+if pos(translate(elem), translate(path)) = 0 then path = path || glue || elem || ';'
+return path
+
+prepend: procedure
+parse arg path elem
+if elem = '' then do
+  if path\='' &amp; right(path, 1)\=';' then path = path || ';'
+  return path
+end
+if pos(translate(elem), translate(path)) = 0 then path = elem || ';' || path
+return path
+
+_getenv_: procedure expose env
+parse arg envar default
+if default = '' then default = envar
+var = value(translate(envar),,env)
+if var = '' then var = default
+return var

Added: branches/eschnepel/ant/bin/complete-ant-cmd.pl
===================================================================
--- branches/eschnepel/ant/bin/complete-ant-cmd.pl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/complete-ant-cmd.pl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,114 @@
+#!/usr/bin/perl
+#
+#  Licensed to the Apache Software Foundation (ASF) under one or more
+#  contributor license agreements.  See the NOTICE file distributed with
+#  this work for additional information regarding copyright ownership.
+#  The ASF licenses this file to You under the Apache License, Version 2.0
+#  (the &quot;License&quot;); you may not use this file except in compliance with
+#  the License.  You may obtain a copy of the License at
+#
+#      <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+#
+#  Unless required by applicable law or agreed to in writing, software
+#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+#  See the License for the specific language governing permissions and
+#  limitations under the License.
+#
+# A script to allow Bash or Z-Shell to complete an Ant command-line.  
+#
+# To install for Bash 2.0 or better, add the following to ~/.bashrc:
+# 
+#     $ complete -C complete-ant-cmd ant build.sh
+#
+# To install for Z-Shell 2.5 or better, add the following to ~/.zshrc:
+#
+#     function ant_complete () {
+#         local args_line args
+#         read -l args_line
+#         set -A args $args_line
+#         set -A reply $(COMP_LINE=$args_line complete-ant-cmd ${args[1]} $1)
+#     }
+#     compctl -K ant_complete ant build.sh
+#     
+# @author Mike Williams &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">mikew at cortexebusiness.com.au</A>&gt;
+
+my $cmdLine = $ENV{'COMP_LINE'};
+my $antCmd = $ARGV[0];
+my $word = $ARGV[1];
+
+my @completions;
+if ($word =~ /^-/) {
+    list( restrict( $word, getArguments() ));
+} elsif ($cmdLine =~ /-(f|buildfile)\s+\S*$/) {
+    list( getBuildFiles($word) );
+} else {
+    list( restrict( $word, getTargets() ));
+}
+
+exit(0);
+
+sub list {
+    for (@_) {
+        print &quot;$_\n&quot;;
+    }
+}
+
+sub restrict {
+    my ($word, @completions) = @_;
+    grep( /^\Q$word\E/, @completions );
+}
+
+sub getArguments {
+    qw(-buildfile -debug -emacs -f -find -help -listener -logfile 
+       -logger -projecthelp -quiet -verbose -version); 
+}
+
+
+sub getBuildFiles {
+    my ($word) = @_;
+    grep( /\.xml$/, glob( &quot;$word*&quot; ));
+}
+
+sub getTargets {
+
+    # Look for build-file
+    my $buildFile = 'build.xml';
+    if ($cmdLine =~ /-(f|buildfile)\s+(\S+)/) {
+        $buildFile = $2;
+    }
+    return () unless (-f $buildFile);
+
+    # Run &quot;ant -projecthelp&quot; to list targets.  Keep a cache of results in a
+    # cache-file.
+    my $cacheFile = $buildFile;
+    $cacheFile =~ s|(.*/)?(.*)|${1}.ant-targets-${2}|;
+    if ((!-e $cacheFile) || (-M $buildFile) &lt; (-M $cacheFile)) {
+        open( CACHE, '&gt;'.$cacheFile ) || die &quot;can\'t write $cacheFile: $!\n&quot;;
+        open( HELP, &quot;$antCmd -projecthelp -f '$buildFile'|&quot; ) || return(); 
+        my %targets;
+        while( &lt;HELP&gt; ) {
+            if (/^\s+(\S+)/) {
+                $targets{$1}++;
+            }
+        }
+        my @targets = sort keys %targets;
+        for (@targets) { print CACHE &quot;$_\n&quot;; }
+        return @targets;
+    }
+    
+    # Read the target-cache
+    open( CACHE, $cacheFile ) || die &quot;can\'t read $cacheFile: $!\n&quot;;
+    my @targets;
+    while (&lt;CACHE&gt;) {
+        chop;
+        s/\r$//;  # for Cygwin
+        push( @targets, $_ );
+    }
+    close( CACHE );
+    @targets;
+
+}
+
+
+


Property changes on: branches/eschnepel/ant/bin/complete-ant-cmd.pl
___________________________________________________________________
Name: svn:executable
   + *

Added: branches/eschnepel/ant/bin/envset.cmd
===================================================================
--- branches/eschnepel/ant/bin/envset.cmd	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/envset.cmd	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,131 @@
+/*
+
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+
+SET environment variables
+First optional parameter:
+   ;     parameters are considered parts of a path variable, semicolons are
+         appended to each element if not already present
+   -D    parameters are properties for Java or Makefile etc., -D will be
+         prepended and the parameters will be separated by a space
+   =D    the same as above but equal sign is not required
+   ,     parameters should be comma separated in the environment variable
+   -     parameters should be separated by the next parameter
+   Other values mean that the first parameter is missing and the environment
+   variable will be set to the space separated parameters
+
+Second parameter: name of the environment variable
+
+Next parameters: values
+; implies that the equal sign is considered a part of the parameter and is
+not interpreted
+
+-D requires parameters in the form name=value. If the equal sign is not found,
+the parameters are changed to name=expanded_name
+
+Other options have optional equal sign. If it is found, only the part after
+the equal sign will be oprionally expanded.
+
+If the parameter is the minus sign, the next parameter will not be expanded.
+If the parameter is a single dot, it will be replaced with the value of the
+environment variable as it existed before envset was invoked.
+
+For other parameters the batch looks for the environment variable with the
+same name (in uppercase). If it is found, it forms the expanded_name. If
+the environment variable with such a name does not exist, the expanded_name
+will hold the parameter name without case conversion.
+*/
+
+parse arg mode envar args
+
+equal = 0
+sep = ' '
+
+/* Parse command line parameters */
+select
+  when mode='-' then do
+    sep = envar
+    parse var args envar args
+  end
+  when mode=';' then do
+    sep = ''
+    equal = -1
+  end
+  when mode='-D' then equal = 1
+  when mode='=D' then mode = '-D'
+  when mode=',' then sep = ','
+otherwise
+  args = envar args
+  envar = mode
+  mode = ''
+end
+
+env = 'OS2ENVIRONMENT'
+envar = translate(envar)
+orig = value(envar,,env)
+newval = ''
+expand = 1
+
+/* for each parameter... */
+do i = 1 to words(args)
+  if expand &gt; 0 &amp; word(args, i) = '-' then expand = 0
+  else call addval word(args, i)
+end
+
+/* Optionally enclose path variable by quotes */
+if mode = ';' &amp; pos(' ', newval) &gt; 0 then newval = '&quot;' || newval || '&quot;'
+
+/* Set the new value, 'SET' cannot be used since it does not allow '=' */
+x = value(envar, newval, env)
+exit 0
+
+addval: procedure expose sep equal orig expand newval mode env
+parse arg var
+
+if var = '.' then expvar = orig
+else do
+  if equal &gt;= 0 then do
+    parse var var name '=' val
+    if val = '' then var = name
+    else var = val
+  end
+  if expand = 0 then expvar = var
+  else expvar = value(translate(var),,env)
+  if expvar = '' then expvar = var
+  if equal &gt;= 0 then do
+    if val = '' then do
+      parse var expvar key '=' val
+      if val &lt;&gt; '' then name = key
+      else do
+        if equal &gt; 0 then val = key
+        else name = key
+      end
+    end
+    else val = expvar
+    if pos(' ', val) &gt; 0 | pos('=', val) &gt; 0 then val = '&quot;' || val || '&quot;'
+    if val = '' then expvar = name
+    else expvar = name || '=' || val
+  end
+  if mode = '-D' then expvar = '-D' || expvar
+  if mode = ';' then do
+    if right(expvar, 1) &lt;&gt; ';' then expvar = expvar || ';'
+  end
+end
+
+if newval = '' then newval = expvar
+else newval = newval || sep || expvar
+expand = 1
+return

Added: branches/eschnepel/ant/bin/lcp.bat
===================================================================
--- branches/eschnepel/ant/bin/lcp.bat	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/lcp.bat	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,31 @@
+REM
+REM  Licensed to the Apache Software Foundation (ASF) under one or more
+REM  contributor license agreements.  See the NOTICE file distributed with
+REM  this work for additional information regarding copyright ownership.
+REM  The ASF licenses this file to You under the Apache License, Version 2.0
+REM  (the &quot;License&quot;); you may not use this file except in compliance with
+REM  the License.  You may obtain a copy of the License at
+REM 
+REM      <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+REM 
+REM  Unless required by applicable law or agreed to in writing, software
+REM  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+REM  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+REM  See the License for the specific language governing permissions and
+REM  limitations under the License.
+REM
+REM
+
+set _CLASSPATHCOMPONENT=%1
+if &quot;&quot;%1&quot;&quot;==&quot;&quot;&quot;&quot; goto gotAllArgs
+shift
+
+:argCheck
+if &quot;&quot;%1&quot;&quot;==&quot;&quot;&quot;&quot; goto gotAllArgs
+set _CLASSPATHCOMPONENT=%_CLASSPATHCOMPONENT% %1
+shift
+goto argCheck
+
+:gotAllArgs
+set LOCALCLASSPATH=%LOCALCLASSPATH%;%_CLASSPATHCOMPONENT%
+

Added: branches/eschnepel/ant/bin/runant.pl
===================================================================
--- branches/eschnepel/ant/bin/runant.pl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/runant.pl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,153 @@
+#!/usr/bin/perl
+#
+# Licensed to the Apache Software Foundation (ASF) under one or more
+#  contributor license agreements.  See the NOTICE file distributed with
+#  this work for additional information regarding copyright ownership.
+#  The ASF licenses this file to You under the Apache License, Version 2.0
+#  (the &quot;License&quot;); you may not use this file except in compliance with
+#  the License.  You may obtain a copy of the License at
+#
+#      <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+#
+#  Unless required by applicable law or agreed to in writing, software
+#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+#  See the License for the specific language governing permissions and
+#  limitations under the License.
+#
+#######################################################################
+#
+# runant.pl
+#
+# wrapper script for invoking ant in a platform with Perl installed
+# this may include cgi-bin invocation, which is considered somewhat daft.
+# (slo: that should be a separate file which can be derived from this
+# and returns the XML formatted output)
+#
+# the code is not totally portable due to classpath and directory splitting
+# issues. oops. (NB, use File::Spec::Functions  will help and the code is
+# structured for the catfile() call, but because of perl version funnies
+# the code is not included. 
+#
+# created:         2000-8-24
+# author:          Steve Loughran <A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">steve_l at sourceforge.net</A>
+#######################################################################
+#
+# Assumptions:
+#
+# - the &quot;java&quot; executable/script is on the command path
+# - ANT_HOME has been set
+# - target platform uses &quot;:&quot; as classpath separator or perl indicates it is dos/win32
+# - target platform uses &quot;/&quot; as directory separator.
+
+#be fussy about variables
+use strict;
+
+#platform specifics (disabled)
+#use File::Spec::Functions;
+
+#turn warnings on during dev; generates a few spurious uninitialised var access warnings
+#use warnings;
+
+#and set $debug to 1 to turn on trace info
+my $debug=1;
+
+#######################################################################
+#
+# check to make sure environment is setup
+#
+
+my $HOME = $ENV{ANT_HOME};
+if ($HOME eq &quot;&quot;)
+        {
+    die &quot;\n\nANT_HOME *MUST* be set!\n\n&quot;;
+        }
+
+my $JAVACMD = $ENV{JAVACMD};
+$JAVACMD = &quot;java&quot; if $JAVACMD eq &quot;&quot;;
+
+my $onnetware = 0;
+if ($^O eq &quot;NetWare&quot;)
+{
+  $onnetware = 1;
+}
+
+my $oncygwin = ($^O eq &quot;cygwin&quot;);
+
+#ISSUE: what java wants to split up classpath varies from platform to platform 
+#and perl is not too hot at hinting which box it is on.
+#here I assume &quot;:&quot; 'cept on win32, dos, and netware. Add extra tests here as needed.
+my $s=&quot;:&quot;;
+if(($^O eq &quot;MSWin32&quot;) || ($^O eq &quot;dos&quot;) || ($^O eq &quot;cygwin&quot;) ||
+   ($onnetware == 1))
+        {
+        $s=&quot;;&quot;;
+        }
+
+#build up standard classpath
+my $localpath = &quot;$HOME/lib/ant-launcher.jar&quot;;
+#set JVM options and Ant arguments, if any
+my @ANT_OPTS=split(&quot; &quot;, $ENV{ANT_OPTS});
+my @ANT_ARGS=split(&quot; &quot;, $ENV{ANT_ARGS});
+
+#jikes
+if($ENV{JIKESPATH} ne &quot;&quot;)
+        {
+        push @ANT_OPTS, &quot;-Djikes.class.path=$ENV{JIKESPATH}&quot;;
+        }
+
+#construct arguments to java
+my @ARGS;
+push @ARGS, @ANT_OPTS;
+
+my $CYGHOME = &quot;&quot;;
+
+my $classpath=$ENV{CLASSPATH};
+if ($oncygwin == 1) {
+  $localpath = `cygpath --path --windows $localpath`;
+  chomp ($localpath);
+  if (! $classpath eq &quot;&quot;)
+  {
+    $classpath = `cygpath --path --windows &quot;$classpath&quot;`;
+    chomp ($classpath);
+  }
+  $HOME = `cygpath --path --windows $HOME`;
+  chomp ($HOME);
+  $CYGHOME = `cygpath --path --windows $ENV{HOME}`;
+  chomp ($CYGHOME);
+}
+push @ARGS, &quot;-classpath&quot;, &quot;$localpath&quot;;
+push @ARGS, &quot;-Dant.home=$HOME&quot;;
+if ( ! $CYGHOME eq &quot;&quot; )
+{
+  push @ARGS, &quot;-Dcygwin.user.home=\&quot;$CYGHOME\&quot;&quot;
+}
+push @ARGS, &quot;org.apache.tools.ant.launch.Launcher&quot;, @ANT_ARGS;
+push @ARGS, @ARGV;
+if (! $classpath eq &quot;&quot;)
+{
+  if ($onnetware == 1)
+  {
+    # make classpath literally $CLASSPATH
+    # this is to avoid pushing us over the 512 character limit
+    # even skip the ; - that is already in $localpath
+    push @ARGS, &quot;-lib&quot;, &quot;\$CLASSPATH&quot;;
+  }
+  else
+  {
+    push @ARGS, &quot;-lib&quot;, &quot;$classpath&quot;;
+  }
+}
+print &quot;\n $JAVACMD @ARGS\n\n&quot; if ($debug);
+
+my $returnValue = system $JAVACMD, @ARGS;
+if ($returnValue eq 0)
+        {
+        exit 0;
+        }
+else
+        {
+        # only 0 and 1 are widely recognized as exit values
+        # so change the exit value to 1
+        exit 1;
+        }


Property changes on: branches/eschnepel/ant/bin/runant.pl
___________________________________________________________________
Name: svn:executable
   + *

Added: branches/eschnepel/ant/bin/runant.py
===================================================================
--- branches/eschnepel/ant/bin/runant.py	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/runant.py	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,102 @@
+#!/usr/bin/python
+# Licensed to the Apache Software Foundation (ASF) under one or more
+#  contributor license agreements.  See the NOTICE file distributed with
+#  this work for additional information regarding copyright ownership.
+#  The ASF licenses this file to You under the Apache License, Version 2.0
+#  (the &quot;License&quot;); you may not use this file except in compliance with
+#  the License.  You may obtain a copy of the License at
+#
+#      <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+#
+#  Unless required by applicable law or agreed to in writing, software
+#  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+#  See the License for the specific language governing permissions and
+#  limitations under the License.
+#
+
+&quot;&quot;&quot;
+
+ runant.py
+
+    This script is a translation of the runant.pl written by Steve Loughran.
+    It runs ant with/out arguments, it should be quite portable (thanks to
+    the python os library)
+    This script has been tested with Python2.0/Win2K
+
+ created:         2001-04-11
+ author:          Pierre Dittgen <A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">pierre.dittgen at criltelecom.com</A>
+
+ Assumptions:
+
+ - the &quot;java&quot; executable/script is on the command path
+&quot;&quot;&quot;
+import os, os.path, string, sys
+
+# Change it to 1 to get extra debug information
+debug = 0
+
+#######################################################################
+
+# If ANT_HOME is not set default to script's parent directory
+if os.environ.has_key('ANT_HOME'):
+    ANT_HOME = os.environ['ANT_HOME']
+else:
+    ANT_HOME = os.path.dirname(os.path.dirname(os.path.abspath(sys.argv[0])))
+
+# set ANT_LIB location
+ANT_LIB = os.path.join(ANT_HOME, 'lib')
+
+# set JAVACMD (check variables JAVACMD and JAVA_HOME)
+JAVACMD = None
+if not os.environ.has_key('JAVACMD'):
+    if os.environ.has_key('JAVA_HOME'):
+        if not os.path.exists(os.environ['JAVA_HOME']):
+            print &quot;Warning: JAVA_HOME is not defined correctly.&quot;
+        else:
+            JAVACMD = os.path.join(os.environ['JAVA_HOME'], 'bin', 'java')
+    else:
+        print &quot;Warning: JAVA_HOME not set.&quot;
+else:
+    JAVACMD = os.environ['JAVACMD']
+if not JAVACMD:
+    JAVACMD = 'java'
+
+launcher_jar = os.path.join(ANT_LIB, 'ant-launcher.jar')
+if not os.path.exists(launcher_jar):
+    print 'Unable to locate ant-launcher.jar. Expected to find it in %s' % \
+        ANT_LIB
+
+# Build up standard classpath (LOCALCLASSPATH)
+LOCALCLASSPATH = launcher_jar
+if os.environ.has_key('LOCALCLASSPATH'):
+    LOCALCLASSPATH += os.pathsep + os.environ['LOCALCLASSPATH']
+
+ANT_OPTS = &quot;&quot;
+if os.environ.has_key('ANT_OPTS'):
+    ANT_OPTS = os.environ['ANT_OPTS']
+
+OPTS = &quot;&quot;
+if os.environ.has_key('JIKESPATH'):
+    OPTS = '-Djikes.class.path=\&quot;%s\&quot;' % os.environ['JIKESPATH']
+
+ANT_ARGS = &quot;&quot;
+if os.environ.has_key('ANT_ARGS'):
+    ANT_ARGS = os.environ['ANT_ARGS']
+
+CLASSPATH = &quot;&quot;
+if os.environ.has_key('CLASSPATH'):
+    CLASSPATH = os.environ['CLASSPATH']
+
+# Builds the commandline
+cmdline = ('%s %s -classpath %s -Dant.home=%s %s ' + \
+    'org.apache.tools.ant.launch.Launcher %s -lib %s %s') \
+     % (JAVACMD, ANT_OPTS, LOCALCLASSPATH, ANT_HOME, OPTS, ANT_ARGS, \
+        CLASSPATH, string.join(sys.argv[1:], ' '))
+
+if debug:
+    print '\n%s\n\n' % (cmdline)
+sys.stdout.flush()
+
+# Run the biniou!
+os.system(cmdline)


Property changes on: branches/eschnepel/ant/bin/runant.py
___________________________________________________________________
Name: svn:executable
   + *

Added: branches/eschnepel/ant/bin/runrc.cmd
===================================================================
--- branches/eschnepel/ant/bin/runrc.cmd	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/bin/runrc.cmd	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,60 @@
+/* 
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+
+   Run RC file, name is in the first arg, second arg is either PATH
+   ENV  or -r or nothing 
+*/
+
+parse arg name path rest
+
+if name = '' then do
+  say 'RC file name is missing'
+  exit 1
+end
+
+if rest \= '' then do
+  say 'Too many parameters'
+  exit 1
+end
+
+call runit name path
+exit 0
+
+runit: procedure
+parse arg name path dir
+
+if path \= '' &amp; path \= '-r' then do
+  dir = value(translate(path),,'OS2ENVIRONMENT')
+  if dir = '' then return
+  dir = translate(dir, '\', '/') /* change UNIX-like path to OS/2 */
+end
+
+if dir = '' then dir = directory()
+
+if path = '-r' then do /* recursive call */
+  subdir = filespec('path', dir)
+  if subdir \= '\' then do
+    subdir = left(subdir, length(subdir)-1)
+    call runit name path filespec('drive', dir) || subdir
+  end
+end
+
+/* Look for the file and run it */
+if right(dir, 1) \= '\' then dir = dir || '\'
+rcfile = stream(dir || name, 'c', 'query exists')
+if rcfile \= '' then interpret 'call &quot;' || rcfile || '&quot;'
+
+return

Added: branches/eschnepel/ant/etc/ant-bootstrap.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/etc/ant-bootstrap.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/etc/changelog.xsl
===================================================================
--- branches/eschnepel/ant/etc/changelog.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/changelog.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,148 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
+
+&lt;xsl:stylesheet
+    xmlns:xsl='<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>'
+    version='1.0'&gt;
+
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+   
+--&gt;
+  &lt;xsl:param name=&quot;title&quot;/&gt;
+  &lt;xsl:param name=&quot;module&quot;/&gt;
+  &lt;xsl:param name=&quot;cvsweb&quot;/&gt;
+
+  &lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;
+              doctype-public=&quot;-//W3C//DTD HTML 4.01//EN&quot;
+              doctype-system=&quot;<A HREF="http://www.w3.org/TR/html401/strict.dtd">http://www.w3.org/TR/html401/strict.dtd</A>&quot;/&gt;
+
+  &lt;!-- Copy standard document elements.  Elements that
+       should be ignored must be filtered by apply-templates
+       tags. --&gt;
+  &lt;xsl:template match=&quot;*&quot;&gt;
+    &lt;xsl:copy&gt;
+      &lt;xsl:copy-of select=&quot;attribute::*[. != '']&quot;/&gt;
+      &lt;xsl:apply-templates/&gt;
+    &lt;/xsl:copy&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;changelog&quot;&gt;
+    &lt;html&gt;
+      &lt;head&gt;
+        &lt;title&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/title&gt;
+        &lt;style type=&quot;text/css&quot;&gt;
+          body, p {
+            font-family: Verdana, Arial, Helvetica, sans-serif;
+            font-size: 80%;
+            color: #000000;
+            background-color: #ffffff;
+          }
+          tr, td {
+            font-family: Verdana, Arial, Helvetica, sans-serif;
+            background: #eeeee0;
+          }
+          td {
+            padding-left: 20px;
+          }
+      .dateAndAuthor {
+            font-family: Verdana, Arial, Helvetica, sans-serif;
+            font-weight: bold;
+            text-align: left;
+            background: #a6caf0;
+            padding-left: 3px;
+      }
+          a {
+            color: #000000;
+          }
+          pre {
+            font-weight: bold;
+          }
+        &lt;/style&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+        &lt;h1&gt;
+          &lt;a name=&quot;top&quot;&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/a&gt;
+        &lt;/h1&gt;
+        &lt;p style=&quot;text-align: right&quot;&gt;Designed for use with &lt;a href=&quot;<A HREF="http://ant.apache.org/">http://ant.apache.org/</A>&quot;&gt;Apache Ant&lt;/a&gt;.&lt;/p&gt;
+        &lt;hr/&gt;
+        &lt;table border=&quot;0&quot; width=&quot;100%&quot; cellspacing=&quot;1&quot;&gt;
+          
+          &lt;xsl:apply-templates select=&quot;.//entry&quot;&gt;
+            &lt;xsl:sort select=&quot;date&quot; data-type=&quot;text&quot; order=&quot;descending&quot;/&gt;
+            &lt;xsl:sort select=&quot;time&quot; data-type=&quot;text&quot; order=&quot;descending&quot;/&gt;
+          &lt;/xsl:apply-templates&gt;
+          
+        &lt;/table&gt;
+        
+      &lt;/body&gt;
+    &lt;/html&gt;
+  &lt;/xsl:template&gt;
+  
+  &lt;xsl:template match=&quot;entry&quot;&gt;
+    &lt;tr&gt;
+      &lt;td class=&quot;dateAndAuthor&quot;&gt;
+        &lt;xsl:value-of select=&quot;date&quot;/&gt;&lt;xsl:text&gt; &lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;time&quot;/&gt;&lt;xsl:text&gt; &lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;author&quot;/&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;
+        &lt;pre&gt;
+&lt;xsl:apply-templates select=&quot;msg&quot;/&gt;&lt;/pre&gt;
+        &lt;ul&gt;
+          &lt;xsl:apply-templates select=&quot;file&quot;/&gt;
+        &lt;/ul&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;date&quot;&gt;
+    &lt;i&gt;&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/i&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;time&quot;&gt;
+    &lt;i&gt;&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/i&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;author&quot;&gt;
+    &lt;i&gt;
+      &lt;a&gt;
+        &lt;xsl:attribute name=&quot;href&quot;&gt;mailto:&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/xsl:attribute&gt;
+        &lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/a&gt;
+    &lt;/i&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;file&quot;&gt;
+    &lt;li&gt;
+      &lt;a&gt;
+        &lt;xsl:choose&gt;
+          &lt;xsl:when test=&quot;string-length(prevrevision) = 0 &quot;&gt;
+            &lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:value-of select=&quot;$cvsweb&quot;/&gt;&lt;xsl:value-of select=&quot;$module&quot; /&gt;/&lt;xsl:value-of select=&quot;name&quot; /&gt;?rev=&lt;xsl:value-of select=&quot;revision&quot; /&gt;&amp;content-type=text/x-cvsweb-markup&lt;/xsl:attribute&gt;
+          &lt;/xsl:when&gt;
+          &lt;xsl:otherwise&gt;
+            &lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:value-of select=&quot;$cvsweb&quot;/&gt;&lt;xsl:value-of select=&quot;$module&quot; /&gt;/&lt;xsl:value-of select=&quot;name&quot; /&gt;?r1=&lt;xsl:value-of select=&quot;revision&quot; /&gt;&amp;r2=&lt;xsl:value-of select=&quot;prevrevision&quot;/&gt;&lt;/xsl:attribute&gt;
+          &lt;/xsl:otherwise&gt;
+        &lt;/xsl:choose&gt;
+        &lt;xsl:value-of select=&quot;name&quot; /&gt; (&lt;xsl:value-of select=&quot;revision&quot;/&gt;)&lt;/a&gt;
+    &lt;/li&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;!-- Any elements within a msg are processed,
+       so that we can preserve HTML tags. --&gt;
+  &lt;xsl:template match=&quot;msg&quot;&gt;
+    &lt;xsl:apply-templates/&gt;
+  &lt;/xsl:template&gt;
+  
+&lt;/xsl:stylesheet&gt;

Added: branches/eschnepel/ant/etc/checkstyle/checkstyle-frames.xsl
===================================================================
--- branches/eschnepel/ant/etc/checkstyle/checkstyle-frames.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/checkstyle/checkstyle-frames.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,293 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+    xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+    xmlns:redirect=&quot;org.apache.xalan.lib.Redirect&quot;
+    extension-element-prefixes=&quot;redirect&quot;&gt;
+
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+--&gt;
+
+    &lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;/&gt;
+    &lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot; /&gt;
+
+    &lt;xsl:param name=&quot;output.dir&quot; select=&quot;'.'&quot;/&gt;
+    &lt;xsl:param name=&quot;basedir&quot; select=&quot;'.'&quot;/&gt;
+
+    &lt;xsl:template match=&quot;checkstyle&quot;&gt;
+        &lt;!-- create the index.html --&gt;
+        &lt;redirect:write file=&quot;{$output.dir}/index.html&quot;&gt;
+            &lt;xsl:call-template name=&quot;index.html&quot;/&gt;
+        &lt;/redirect:write&gt;
+
+        &lt;!-- create the stylesheet.css --&gt;
+        &lt;redirect:write file=&quot;{$output.dir}/stylesheet.css&quot;&gt;
+            &lt;xsl:call-template name=&quot;stylesheet.css&quot;/&gt;
+        &lt;/redirect:write&gt;
+
+        &lt;!-- create the overview-summary.html at the root --&gt;
+        &lt;redirect:write file=&quot;{$output.dir}/overview-frame.html&quot;&gt;
+            &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;overview&quot;/&gt;
+        &lt;/redirect:write&gt;
+
+        &lt;!-- create the all-classes.html at the root --&gt;
+        &lt;redirect:write file=&quot;{$output.dir}/allclasses-frame.html&quot;&gt;
+            &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.classes&quot;/&gt;
+        &lt;/redirect:write&gt;
+
+        &lt;!-- process all files --&gt;
+        &lt;xsl:apply-templates select=&quot;file[count(error) != 0]&quot;/&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template name=&quot;index.html&quot;&gt;
+        &lt;html&gt;
+            &lt;head&gt;
+                &lt;title&gt;CheckStyle Audit&lt;/title&gt;
+            &lt;/head&gt;
+            &lt;frameset cols=&quot;20%,80%&quot;&gt;
+                &lt;frame src=&quot;allclasses-frame.html&quot; name=&quot;fileListFrame&quot;/&gt;
+                &lt;frame src=&quot;overview-frame.html&quot; name=&quot;fileFrame&quot;/&gt;
+            &lt;/frameset&gt;
+            &lt;noframes&gt;
+                &lt;h2&gt;Frame Alert&lt;/h2&gt;
+                &lt;p&gt;
+                    This document is designed to be viewed using the frames feature.
+                    If you see this message, you are using a non-frame-capable web client.
+                &lt;/p&gt;
+            &lt;/noframes&gt;
+        &lt;/html&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template name=&quot;pageHeader&quot;&gt;
+        &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%&quot;&gt;
+            &lt;tr&gt;
+                &lt;td class=&quot;text-align:right&quot;&gt;&lt;h2&gt;CheckStyle Audit&lt;/h2&gt;&lt;/td&gt;
+            &lt;/tr&gt;
+            &lt;tr&gt;
+                &lt;td class=&quot;text-align:right&quot;&gt;Designed for use with
+                  &lt;a href='<A HREF="http://checkstyle.sourceforge.net/">http://checkstyle.sourceforge.net/</A>'&gt;CheckStyle&lt;/a&gt; and
+                  &lt;a href='<A HREF="http://ant.apache.org/">http://ant.apache.org/</A>'&gt;Ant&lt;/a&gt;.&lt;/td&gt;
+            &lt;/tr&gt;
+        &lt;/table&gt;
+        &lt;hr size=&quot;1&quot;/&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;checkstyle&quot; mode=&quot;overview&quot;&gt;
+        &lt;html&gt;
+            &lt;head&gt;
+                &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;
+            &lt;/head&gt;
+            &lt;body&gt;
+                &lt;!-- page header --&gt;
+                &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+
+                &lt;!-- Summary part --&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;summary&quot;/&gt;
+                &lt;hr size=&quot;1&quot; width=&quot;100%&quot; align=&quot;left&quot;/&gt;
+
+                &lt;!-- File list part --&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;filelist&quot;/&gt;
+            &lt;/body&gt;
+        &lt;/html&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template name=&quot;stylesheet.css&quot;&gt;
+        .bannercell {
+        border: 0px;
+        padding: 0px;
+        }
+        body {
+        margin-left: 10;
+        margin-right: 10;
+        font:normal 80% arial,helvetica,sanserif;
+        background-color:#FFFFFF;
+        color:#000000;
+        }
+        .oddrow td {
+        background: #efefef;
+        }
+        .evenrow td {
+        background: #fff;
+        }
+        th, td {
+        text-align: left;
+        vertical-align: top;
+        }
+        th {
+        font-weight:bold;
+        background: #ccc;
+        color: black;
+        }
+        table, th, td {
+        font-size:100%;
+        border: none
+        }
+        table.log tr td, tr th {
+
+        }
+        h2 {
+        font-weight:bold;
+        font-size:140%;
+        margin-bottom: 5;
+        }
+        h3 {
+        font-size:100%;
+        font-weight:bold;
+        background: #525D76;
+        color: white;
+        text-decoration: none;
+        padding: 5px;
+        margin-right: 2px;
+        margin-left: 2px;
+        margin-bottom: 0;
+        }
+    &lt;/xsl:template&gt;
+
+    &lt;!--
+    Creates an all-classes.html file that contains a link to all files.
+    --&gt;
+    &lt;xsl:template match=&quot;checkstyle&quot; mode=&quot;all.classes&quot;&gt;
+        &lt;html&gt;
+            &lt;head&gt;
+                &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;
+            &lt;/head&gt;
+            &lt;body&gt;
+                &lt;h2&gt;Files&lt;/h2&gt;
+                &lt;p&gt;
+                    &lt;table width=&quot;100%&quot;&gt;
+                        &lt;!-- For each file create its part --&gt;
+                        &lt;xsl:apply-templates select=&quot;file[count(error) != 0]&quot; mode=&quot;all.classes&quot;&gt;
+                            &lt;xsl:sort select=&quot;substring-after(@name, $basedir)&quot;/&gt;
+                        &lt;/xsl:apply-templates&gt;
+                    &lt;/table&gt;
+                &lt;/p&gt;
+            &lt;/body&gt;
+        &lt;/html&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;checkstyle&quot; mode=&quot;filelist&quot;&gt;
+        &lt;h3&gt;Files&lt;/h3&gt;
+        &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+            &lt;tr&gt;
+                &lt;th&gt;Name&lt;/th&gt;
+                &lt;th&gt;Errors&lt;/th&gt;
+            &lt;/tr&gt;
+            &lt;xsl:apply-templates select=&quot;file[count(error) != 0]&quot; mode=&quot;filelist&quot;&gt;
+                &lt;xsl:sort select=&quot;count(error)&quot; order=&quot;descending&quot; data-type=&quot;number&quot;/&gt;
+            &lt;/xsl:apply-templates&gt;
+        &lt;/table&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;file&quot; mode=&quot;filelist&quot;&gt;
+        &lt;tr&gt;
+            &lt;xsl:call-template name=&quot;alternated-row&quot;/&gt;
+            &lt;td nowrap=&quot;nowrap&quot;&gt;
+                &lt;a&gt;
+                    &lt;xsl:attribute name=&quot;href&quot;&gt;
+                        &lt;xsl:text&gt;files/&lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;substring-after(@name, $basedir)&quot;/&gt;&lt;xsl:text&gt;.html&lt;/xsl:text&gt;
+                    &lt;/xsl:attribute&gt;
+                    &lt;xsl:value-of select=&quot;substring-after(@name, $basedir)&quot;/&gt;
+                &lt;/a&gt;
+            &lt;/td&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;count(error)&quot;/&gt;&lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;file&quot; mode=&quot;all.classes&quot;&gt;
+        &lt;tr&gt;
+            &lt;td nowrap=&quot;nowrap&quot;&gt;
+                &lt;a target=&quot;fileFrame&quot;&gt;
+                    &lt;xsl:attribute name=&quot;href&quot;&gt;
+                        &lt;xsl:text&gt;files/&lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;substring-after(@name, $basedir)&quot;/&gt;&lt;xsl:text&gt;.html&lt;/xsl:text&gt;
+                    &lt;/xsl:attribute&gt;
+                    &lt;xsl:value-of select=&quot;substring-after(@name, $basedir)&quot;/&gt;
+                &lt;/a&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;!--
+    transform string like a/b/c to ../../../
+    @param path the path to transform into a descending directory path
+    --&gt;
+    &lt;xsl:template name=&quot;path&quot;&gt;
+        &lt;xsl:param name=&quot;path&quot;/&gt;
+        &lt;xsl:if test=&quot;contains($path,'/')&quot;&gt;
+            &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+            &lt;xsl:call-template name=&quot;path&quot;&gt;
+                &lt;xsl:with-param name=&quot;path&quot;&gt;&lt;xsl:value-of select=&quot;substring-after($path,'/')&quot;/&gt;&lt;/xsl:with-param&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/xsl:if&gt;
+        &lt;xsl:if test=&quot;not(contains($path,'/')) and not($path = '')&quot;&gt;
+            &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+        &lt;/xsl:if&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;file&quot;&gt;
+        &lt;redirect:write file=&quot;{$output.dir}/files/{substring-after(@name, $basedir)}.html&quot;&gt;
+            &lt;html&gt;
+                &lt;head&gt;
+                    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
+                        &lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:call-template name=&quot;path&quot;&gt;&lt;xsl:with-param name=&quot;path&quot; select=&quot;substring-after(@name, $basedir)&quot;/&gt;&lt;/xsl:call-template&gt;&lt;xsl:text&gt;stylesheet.css&lt;/xsl:text&gt;&lt;/xsl:attribute&gt;
+                    &lt;/link&gt;
+                &lt;/head&gt;
+                &lt;body&gt;
+                    &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+                    &lt;h3&gt;File &lt;xsl:value-of select=&quot;substring-after(@name, $basedir)&quot;/&gt;&lt;/h3&gt;
+                    &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                        &lt;tr&gt;
+                            &lt;th&gt;Error Description&lt;/th&gt;
+                            &lt;th&gt;Line:Column&lt;/th&gt;
+                        &lt;/tr&gt;
+                        &lt;xsl:for-each select=&quot;error&quot;&gt;
+                            &lt;tr&gt;
+                                &lt;xsl:call-template name=&quot;alternated-row&quot;/&gt;
+                                &lt;td&gt;&lt;a title=&quot;{@source}&quot;&gt;&lt;xsl:value-of select=&quot;@message&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+                                &lt;td align=&quot;center&quot;&gt;&lt;xsl:value-of select=&quot;@line&quot;/&gt;&lt;xsl:if test=&quot;@column&quot;&gt;:&lt;xsl:value-of select=&quot;@column&quot;/&gt;&lt;/xsl:if&gt;&lt;/td&gt;
+                            &lt;/tr&gt;
+                        &lt;/xsl:for-each&gt;
+                    &lt;/table&gt;
+                &lt;/body&gt;
+            &lt;/html&gt;
+        &lt;/redirect:write&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;checkstyle&quot; mode=&quot;summary&quot;&gt;
+        &lt;h3&gt;Summary&lt;/h3&gt;
+        &lt;xsl:variable name=&quot;fileCount&quot; select=&quot;count(file)&quot;/&gt;
+        &lt;xsl:variable name=&quot;errorCount&quot; select=&quot;count(file/error)&quot;/&gt;
+        &lt;xsl:variable name=&quot;fileErrorCount&quot; select=&quot;count(file[count(error) != 0])&quot;/&gt;
+        &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+            &lt;tr&gt;
+                &lt;th&gt;Total Files&lt;/th&gt;
+                &lt;th&gt;Files With Errors&lt;/th&gt;
+                &lt;th&gt;Errors&lt;/th&gt;
+            &lt;/tr&gt;
+            &lt;tr&gt;
+                &lt;xsl:call-template name=&quot;alternated-row&quot;/&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;$fileCount&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;$fileErrorCount&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;$errorCount&quot;/&gt;&lt;/td&gt;
+            &lt;/tr&gt;
+        &lt;/table&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template name=&quot;alternated-row&quot;&gt;
+        &lt;xsl:attribute name=&quot;class&quot;&gt;
+            &lt;xsl:if test=&quot;position() mod 2 = 1&quot;&gt;oddrow&lt;/xsl:if&gt;
+            &lt;xsl:if test=&quot;position() mod 2 = 0&quot;&gt;evenrow&lt;/xsl:if&gt;
+        &lt;/xsl:attribute&gt;
+    &lt;/xsl:template&gt;
+&lt;/xsl:stylesheet&gt;
\ No newline at end of file

Added: branches/eschnepel/ant/etc/checkstyle/checkstyle-text.xsl
===================================================================
--- branches/eschnepel/ant/etc/checkstyle/checkstyle-text.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/checkstyle/checkstyle-text.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,33 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;&gt;
+
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+--&gt;
+
+    &lt;xsl:strip-space elements=&quot;checkstyle&quot;/&gt;
+    &lt;xsl:preserve-space elements=&quot;file&quot;/&gt;
+    &lt;xsl:output method=&quot;text&quot;/&gt;
+    &lt;xsl:template match=&quot;checkstyle/file/error&quot;&gt;
+        &lt;xsl:value-of select=&quot;../@name&quot;/&gt;
+        &lt;xsl:text&gt;:&lt;/xsl:text&gt;
+        &lt;xsl:value-of select=&quot;@line&quot;/&gt;
+        &lt;xsl:text&gt;:&lt;/xsl:text&gt;
+        &lt;xsl:value-of select=&quot;@column&quot;/&gt;
+        &lt;xsl:text&gt; &lt;/xsl:text&gt;
+        &lt;xsl:value-of select=&quot;@message&quot;/&gt;
+    &lt;/xsl:template&gt;
+&lt;/xsl:stylesheet&gt;
+

Added: branches/eschnepel/ant/etc/checkstyle/checkstyle-xdoc.xsl
===================================================================
--- branches/eschnepel/ant/etc/checkstyle/checkstyle-xdoc.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/checkstyle/checkstyle-xdoc.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,129 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+    xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+    xmlns:redirect=&quot;org.apache.xalan.lib.Redirect&quot;
+    extension-element-prefixes=&quot;redirect&quot;&gt;
+
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+--&gt;
+
+    &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;
+    &lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot; /&gt;
+
+    &lt;xsl:param name=&quot;output.dir&quot; select=&quot;'.'&quot;/&gt;
+    &lt;xsl:param name=&quot;basedir&quot; select=&quot;'.'&quot;/&gt;
+
+    &lt;xsl:template match=&quot;checkstyle&quot;&gt;
+      &lt;document&gt;
+        &lt;properties&gt;
+          &lt;title&gt;Checkstyle Audit&lt;/title&gt;
+        &lt;/properties&gt;
+
+        &lt;body&gt;
+          &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;summary&quot;/&gt;
+          &lt;!-- File list part --&gt;
+          &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;filelist&quot;/&gt;
+          &lt;xsl:apply-templates select=&quot;file[count(error) != 0]&quot;/&gt;
+        &lt;/body&gt;
+      &lt;/document&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;checkstyle&quot; mode=&quot;filelist&quot;&gt;
+      &lt;section name=&quot;Files&quot;&gt;
+        &lt;table&gt;
+            &lt;tr&gt;
+                &lt;th&gt;Name&lt;/th&gt;
+                &lt;th&gt;Errors&lt;/th&gt;
+            &lt;/tr&gt;
+            &lt;xsl:apply-templates select=&quot;file[count(error) != 0]&quot; mode=&quot;filelist&quot;&gt;
+                &lt;xsl:sort select=&quot;count(error)&quot; order=&quot;descending&quot; data-type=&quot;number&quot;/&gt;
+            &lt;/xsl:apply-templates&gt;
+        &lt;/table&gt;
+      &lt;/section&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;file&quot; mode=&quot;filelist&quot;&gt;
+        &lt;tr&gt;
+            &lt;xsl:call-template name=&quot;alternated-row&quot;/&gt;
+            &lt;td nowrap=&quot;nowrap&quot;&gt;
+                &lt;a&gt;
+                    &lt;xsl:attribute name=&quot;href&quot;&gt;
+                        &lt;xsl:text&gt;files&lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;substring-after(@name, $basedir)&quot;/&gt;&lt;xsl:text&gt;.html&lt;/xsl:text&gt;
+                    &lt;/xsl:attribute&gt;
+                    &lt;xsl:value-of select=&quot;substring-after(@name, $basedir)&quot;/&gt;
+                &lt;/a&gt;
+            &lt;/td&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;count(error)&quot;/&gt;&lt;/td&gt;
+        &lt;/tr&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;file&quot;&gt;
+      &lt;redirect:write file=&quot;{$output.dir}/files{substring-after(@name, $basedir)}.xml&quot;&gt;
+        &lt;document&gt;
+          &lt;properties&gt;
+            &lt;title&gt;Checkstyle Audit&lt;/title&gt;
+          &lt;/properties&gt;
+
+          &lt;body&gt;
+            &lt;section name=&quot;Details for {substring-after(@name, $basedir)}&quot;&gt;
+              &lt;table&gt;
+                  &lt;tr&gt;
+                      &lt;th&gt;Error Description&lt;/th&gt;
+                      &lt;th&gt;Line&lt;/th&gt;
+                  &lt;/tr&gt;
+                  &lt;xsl:for-each select=&quot;error&quot;&gt;
+                      &lt;tr&gt;
+                          &lt;xsl:call-template name=&quot;alternated-row&quot;/&gt;
+                          &lt;td&gt;&lt;a title=&quot;{@source}&quot;&gt;&lt;xsl:value-of select=&quot;@message&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+                          &lt;td&gt;&lt;xsl:value-of select=&quot;@line&quot;/&gt;&lt;/td&gt;
+                      &lt;/tr&gt;
+                  &lt;/xsl:for-each&gt;
+              &lt;/table&gt;
+            &lt;/section&gt;
+          &lt;/body&gt;
+        &lt;/document&gt;
+      &lt;/redirect:write&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template match=&quot;checkstyle&quot; mode=&quot;summary&quot;&gt;
+      &lt;section name=&quot;Summary&quot;&gt;
+        &lt;xsl:variable name=&quot;fileCount&quot; select=&quot;count(file)&quot;/&gt;
+        &lt;xsl:variable name=&quot;errorCount&quot; select=&quot;count(file/error)&quot;/&gt;
+        &lt;xsl:variable name=&quot;fileErrorCount&quot; select=&quot;count(file[count(error) != 0])&quot;/&gt;
+        &lt;table&gt;
+            &lt;tr&gt;
+                &lt;th&gt;Files&lt;/th&gt;
+                &lt;th&gt;Files With Errors&lt;/th&gt;
+                &lt;th&gt;Errors&lt;/th&gt;
+            &lt;/tr&gt;
+            &lt;tr&gt;
+                &lt;xsl:call-template name=&quot;alternated-row&quot;/&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;$fileCount&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;$fileErrorCount&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;$errorCount&quot;/&gt;&lt;/td&gt;
+            &lt;/tr&gt;
+        &lt;/table&gt;
+      &lt;/section&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template name=&quot;alternated-row&quot;&gt;
+        &lt;xsl:attribute name=&quot;class&quot;&gt;
+            &lt;xsl:if test=&quot;position() mod 2 = 1&quot;&gt;oddrow&lt;/xsl:if&gt;
+            &lt;xsl:if test=&quot;position() mod 2 = 0&quot;&gt;evenrow&lt;/xsl:if&gt;
+        &lt;/xsl:attribute&gt;
+    &lt;/xsl:template&gt;
+&lt;/xsl:stylesheet&gt;
+

Added: branches/eschnepel/ant/etc/coverage-frames.xsl
===================================================================
--- branches/eschnepel/ant/etc/coverage-frames.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/coverage-frames.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,488 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+    xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+    xmlns:redirect=&quot;org.apache.xalan.lib.Redirect&quot;
+    extension-element-prefixes=&quot;redirect&quot;&gt;
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot;/&gt;
+&lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot; /&gt;
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+--&gt;
+
+&lt;!--
+
+ Sample stylesheet to be used with JProbe 3.0 XML output.
+
+ It creates a set of HTML files a la javadoc where you can browse easily
+ through all packages and classes.
+
+ It is best used with JProbe Coverage Ant task that gives you the benefit
+ of a reference classpath so that you have the list of classes/methods
+ that are not used at all in a given classpath.
+
+ @author Stephane Bailliez &lt;a href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">sbailliez at apache.org</A>&quot;/&gt;
+
+--&gt;
+
+&lt;!-- default output directory is current directory --&gt;
+&lt;xsl:param name=&quot;output.dir&quot; select=&quot;'.'&quot;/&gt;
+
+&lt;!-- ======================================================================
+    Root element
+    ======================================================================= --&gt;
+&lt;xsl:template match=&quot;/snapshot&quot;&gt;
+    &lt;!-- create the index.html --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/index.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;index.html&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the stylesheet.css --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/stylesheet.css&quot;&gt;
+        &lt;xsl:call-template name=&quot;stylesheet.css&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the overview-packages.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/overview-summary.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;overview.packages&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-packages.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/overview-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.packages&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-classes.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/allclasses-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.classes&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- process all packages --&gt;
+    &lt;xsl:apply-templates select=&quot;./package&quot; mode=&quot;write&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- =======================================================================
+    Frameset definition. Entry point for the report.
+    3 frames: packageListFrame, classListFrame, classFrame
+    ======================================================================= --&gt;
+&lt;xsl:template name=&quot;index.html&quot;&gt;
+&lt;html&gt;
+    &lt;head&gt;&lt;title&gt;Coverage Results.&lt;/title&gt;&lt;/head&gt;
+    &lt;frameset cols=&quot;20%,80%&quot;&gt;
+        &lt;frameset rows=&quot;30%,70%&quot;&gt;
+            &lt;frame src=&quot;overview-frame.html&quot; name=&quot;packageListFrame&quot;/&gt;
+            &lt;frame src=&quot;allclasses-frame.html&quot; name=&quot;classListFrame&quot;/&gt;
+        &lt;/frameset&gt;
+        &lt;frame src=&quot;overview-summary.html&quot; name=&quot;classFrame&quot;/&gt;
+    &lt;/frameset&gt;
+    &lt;noframes&gt;
+        &lt;h2&gt;Frame Alert&lt;/h2&gt;
+        &lt;p&gt;
+        This document is designed to be viewed using the frames feature. If you see this message, you are using a non-frame-capable web client.
+        &lt;/p&gt;
+    &lt;/noframes&gt;
+&lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- =======================================================================
+    Stylesheet CSS used
+    ======================================================================= --&gt;
+&lt;!-- this is the stylesheet css to use for nearly everything --&gt;
+&lt;xsl:template name=&quot;stylesheet.css&quot;&gt;
+    .bannercell {
+      border: 0px;
+      padding: 0px;
+    }
+    body {
+      margin-left: 10;
+      margin-right: 10;
+      font:normal 80% arial,helvetica,sanserif;
+      background-color:#FFFFFF;
+      color:#000000;
+    }
+    .a td {
+      background: #efefef;
+    }
+    .b td {
+      background: #fff;
+    }
+    th, td {
+      text-align: left;
+      vertical-align: top;
+    }
+    th {
+      font-weight:bold;
+      background: #ccc;
+      color: black;
+    }
+    table, th, td {
+      font-size:100%;
+      border: none
+    }
+    table.log tr td, tr th {
+
+    }
+    h2 {
+      font-weight:bold;
+      font-size:140%;
+      margin-bottom: 5;
+    }
+    h3 {
+      font-size:100%;
+      font-weight:bold;
+      background: #525D76;
+      color: white;
+      text-decoration: none;
+      padding: 5px;
+      margin-right: 2px;
+      margin-left: 2px;
+      margin-bottom: 0;
+    }
+&lt;/xsl:template&gt;
+
+&lt;!-- =======================================================================
+    List of all classes in all packages
+    This will be the first page in the classListFrame
+    ======================================================================= --&gt;
+&lt;xsl:template match=&quot;snapshot&quot; mode=&quot;all.classes&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;/&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;h2&gt;Classes&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:for-each select=&quot;package/class&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;(ancestor::package)[last()]/@name&quot;/&gt;
+                    &lt;xsl:variable name=&quot;link&quot;&gt;
+                        &lt;xsl:if test=&quot;not($package.name='')&quot;&gt;
+                            &lt;xsl:value-of select=&quot;translate($package.name,'.','/')&quot;/&gt;&lt;xsl:text&gt;/&lt;/xsl:text&gt;
+                        &lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;xsl:text&gt;.html&lt;/xsl:text&gt;
+                    &lt;/xsl:variable&gt;
+                    &lt;tr&gt;
+                        &lt;td nowrap=&quot;nowrap&quot;&gt;
+                            &lt;a target=&quot;classFrame&quot; href=&quot;{$link}&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;
+                        &lt;/td&gt;
+                    &lt;/tr&gt;
+                &lt;/xsl:for-each&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- list of all packages --&gt;
+&lt;xsl:template match=&quot;snapshot&quot; mode=&quot;all.packages&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;/&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;h2&gt;&lt;a href=&quot;overview-summary.html&quot; target=&quot;classFrame&quot;&gt;Home&lt;/a&gt;&lt;/h2&gt;
+            &lt;h2&gt;Packages&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:for-each select=&quot;package&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot; order=&quot;ascending&quot;/&gt;
+                    &lt;tr&gt;
+                        &lt;td nowrap=&quot;nowrap&quot;&gt;
+                            &lt;a href=&quot;{translate(@name,'.','/')}/package-summary.html&quot; target=&quot;classFrame&quot;&gt;
+                                &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+                            &lt;/a&gt;
+                        &lt;/td&gt;
+                    &lt;/tr&gt;
+                &lt;/xsl:for-each&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- overview of statistics in packages --&gt;
+&lt;xsl:template match=&quot;snapshot&quot; mode=&quot;overview.packages&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;/&gt;
+        &lt;/head&gt;
+        &lt;body onload=&quot;open('allclasses-frame.html','classListFrame')&quot;&gt;
+        &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+        &lt;h3&gt;Summary&lt;/h3&gt;
+        &lt;table class=&quot;log&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+            &lt;tr&gt;
+                &lt;!--th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Date&lt;/th&gt;
+                &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Elapsed time&lt;/th--&gt;
+                &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Reported Classes&lt;/th&gt;
+                &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Methods Hit&lt;/th&gt;
+                &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Lines Hit&lt;/th&gt;
+            &lt;/tr&gt;
+            &lt;tr class=&quot;a&quot;&gt;
+                &lt;!--td nowrap=&quot;nowrap&quot;&gt;&lt;xsl:value-of select=&quot;execution_log/@program_start&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;format-number(execution_log/@elapsed_time div 1000,'0.0')&quot;/&gt;secs&lt;/td--&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;count(package/class)&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;format-number(cov.data/@hit_methods div cov.data/@total_methods,'0.0%')&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:value-of select=&quot;format-number(cov.data/@hit_lines div cov.data/@total_lines,'0.0%')&quot;/&gt;&lt;/td&gt;
+            &lt;/tr&gt;
+        &lt;/table&gt;
+        &lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;
+        &lt;tr&gt;
+        &lt;td style=&quot;text-align: justify;&quot;&gt;
+        To ensure accurate test runs on Java applications, developers need to know how much of
+        the code has been tested, and where to find any untested code. Coverage helps you
+        locate untested code, and measure precisely how much code has been exercised.
+        The result is a higher quality application in a shorter period of time.
+        &lt;p/&gt;
+        &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;/table&gt;
+
+        &lt;h3&gt;Packages&lt;/h3&gt;
+        &lt;table class=&quot;log&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+            &lt;xsl:apply-templates select=&quot;package[1]&quot; mode=&quot;stats.header&quot;/&gt;
+            &lt;!-- display packages and sort them via their coverage rate --&gt;
+            &lt;xsl:for-each select=&quot;package&quot;&gt;
+                &lt;xsl:sort data-type=&quot;number&quot; select=&quot;cov.data/@hit_lines div cov.data/@total_lines&quot;/&gt;
+                &lt;tr&gt;
+                  &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+                    &lt;td&gt;&lt;a href=&quot;{translate(@name,'.','/')}/package-summary.html&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;format-number(cov.data/@hit_methods div cov.data/@total_methods,'0.0%')&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;format-number(cov.data/@hit_lines div cov.data/@total_lines,'0.0%')&quot;/&gt;&lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/xsl:for-each&gt;
+        &lt;/table&gt;
+        &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+        &lt;/body&gt;
+        &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!--
+ detailed info for a package. It will output the list of classes
+, the summary page, and the info for each class
+--&gt;
+&lt;xsl:template match=&quot;package&quot; mode=&quot;write&quot;&gt;
+    &lt;xsl:variable name=&quot;package.dir&quot;&gt;
+        &lt;xsl:if test=&quot;not(@name = '')&quot;&gt;&lt;xsl:value-of select=&quot;translate(@name,'.','/')&quot;/&gt;&lt;/xsl:if&gt;
+        &lt;xsl:if test=&quot;@name = ''&quot;&gt;.&lt;/xsl:if&gt;
+    &lt;/xsl:variable&gt;
+
+    &lt;!-- create a classes-list.html in the package directory --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;classes.list&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create a package-summary.html in the package directory --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-summary.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;package.summary&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- for each class, creates a @name.html --&gt;
+    &lt;xsl:for-each select=&quot;class&quot;&gt;
+        &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@name}.html&quot;&gt;
+            &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;class.details&quot;/&gt;
+        &lt;/redirect:write&gt;
+    &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- list of classes in a package --&gt;
+&lt;xsl:template match=&quot;package&quot; mode=&quot;classes.list&quot;&gt;
+    &lt;html&gt;
+        &lt;HEAD&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;@name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/HEAD&gt;
+        &lt;BODY&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;tr&gt;
+                    &lt;td nowrap=&quot;nowrap&quot;&gt;
+                        &lt;H2&gt;&lt;a href=&quot;package-summary.html&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/H2&gt;
+                    &lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/table&gt;
+
+            &lt;H2&gt;Classes&lt;/H2&gt;
+            &lt;TABLE WIDTH=&quot;100%&quot;&gt;
+                &lt;xsl:for-each select=&quot;class&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                    &lt;tr&gt;
+                        &lt;td nowrap=&quot;nowrap&quot;&gt;
+                            &lt;a href=&quot;{@name}.html&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;
+                        &lt;/td&gt;
+                    &lt;/tr&gt;
+                &lt;/xsl:for-each&gt;
+            &lt;/TABLE&gt;
+        &lt;/BODY&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- summary of a package --&gt;
+&lt;xsl:template match=&quot;package&quot; mode=&quot;package.summary&quot;&gt;
+    &lt;HTML&gt;
+        &lt;HEAD&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;@name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/HEAD&gt;
+        &lt;!-- when loading this package, it will open the classes into the frame --&gt;
+        &lt;BODY onload=&quot;open('package-frame.html','classListFrame')&quot;&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;h3&gt;Package &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/h3&gt;
+            &lt;table class=&quot;log&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;stats.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;stats&quot;/&gt;
+            &lt;/table&gt;
+
+            &lt;xsl:if test=&quot;count(class) &gt; 0&quot;&gt;
+                &lt;H3&gt;Classes&lt;/H3&gt;
+                &lt;table class=&quot;log&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;stats.header&quot;/&gt;
+                    &lt;xsl:apply-templates select=&quot;class&quot; mode=&quot;stats&quot;&gt;
+                        &lt;xsl:sort data-type=&quot;number&quot; select=&quot;cov.data/@hit_lines div cov.data/@total_lines&quot;/&gt;
+                    &lt;/xsl:apply-templates&gt;
+                &lt;/table&gt;
+            &lt;/xsl:if&gt;
+            &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+        &lt;/BODY&gt;
+    &lt;/HTML&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- details of a class --&gt;
+&lt;xsl:template match=&quot;class&quot; mode=&quot;class.details&quot;&gt;
+    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;(ancestor::package)[last()]/@name&quot;/&gt;
+    &lt;HTML&gt;
+        &lt;HEAD&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/HEAD&gt;
+        &lt;BODY&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;H3&gt;Class &lt;xsl:if test=&quot;not($package.name = '')&quot;&gt;&lt;xsl:value-of select=&quot;$package.name&quot;/&gt;.&lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/H3&gt;
+
+            &lt;!-- class summary --&gt;
+            &lt;table class=&quot;log&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;stats.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;stats&quot;/&gt;
+            &lt;/table&gt;
+
+            &lt;!-- details of methods --&gt;
+            &lt;H3&gt;Methods&lt;/H3&gt;
+            &lt;table class=&quot;log&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;method[1]&quot; mode=&quot;stats.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;method&quot; mode=&quot;stats&quot;&gt;
+                    &lt;xsl:sort data-type=&quot;number&quot; select=&quot;cov.data/@hit_lines div cov.data/@total_lines&quot;/&gt;
+                &lt;/xsl:apply-templates&gt;
+            &lt;/table&gt;
+            &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+        &lt;/BODY&gt;
+    &lt;/HTML&gt;
+
+&lt;/xsl:template&gt;
+
+&lt;!-- Page Header --&gt;
+&lt;xsl:template name=&quot;pageHeader&quot;&gt;
+  &lt;!-- jakarta logo --&gt;
+  &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%&quot;&gt;
+  &lt;tr&gt;
+    &lt;td class=&quot;bannercell&quot; rowspan=&quot;2&quot;&gt;
+      &lt;a href=&quot;<A HREF="http://jakarta.apache.org/">http://jakarta.apache.org/</A>&quot;&gt;
+      &lt;img src=&quot;<A HREF="http://jakarta.apache.org/images/jakarta-logo.gif">http://jakarta.apache.org/images/jakarta-logo.gif</A>&quot; alt=&quot;<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>&quot; align=&quot;left&quot; border=&quot;0&quot;/&gt;
+      &lt;/a&gt;
+    &lt;/td&gt;
+        &lt;td style=&quot;text-align:right&quot;&gt;&lt;h2&gt;Source Code Coverage&lt;/h2&gt;&lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;tr&gt;
+        &lt;td style=&quot;text-align:right&quot;&gt;Designed for use with &lt;a href='<A HREF="http://www.sitraka.com/jprobe">http://www.sitraka.com/jprobe</A>'&gt;Sitraka JProbe&lt;/a&gt; and &lt;a href='<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>'&gt;Ant&lt;/a&gt;.&lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/table&gt;
+    &lt;hr size=&quot;1&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- Page Footer --&gt;
+&lt;xsl:template name=&quot;pageFooter&quot;&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;table.header&quot;&gt;
+    &lt;tr&gt;
+        &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+        &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Methods Hit&lt;/th&gt;
+        &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Lines Hit&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;method&quot; mode=&quot;stats.header&quot;&gt;
+    &lt;tr&gt;
+        &lt;th width=&quot;90%&quot;&gt;Name&lt;/th&gt;
+        &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Lines Hit&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+&lt;xsl:template match=&quot;method&quot; mode=&quot;stats&quot;&gt;
+    &lt;tr&gt;
+      &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;
+        &lt;xsl:value-of select=&quot;format-number(cov.data/@hit_lines div cov.data/@total_lines,'0.0%')&quot;/&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;package|class&quot; mode=&quot;stats.header&quot;&gt;
+    &lt;tr&gt;
+        &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+        &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Methods Hit&lt;/th&gt;
+        &lt;th width=&quot;10%&quot; nowrap=&quot;nowrap&quot;&gt;Lines Hit&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+&lt;xsl:template match=&quot;package|class&quot; mode=&quot;stats&quot;&gt;
+    &lt;tr&gt;
+      &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;format-number(cov.data/@hit_methods div cov.data/@total_methods,'0.0%')&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;format-number(cov.data/@hit_lines div cov.data/@total_lines,'0.0%')&quot;/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!--
+    transform string like a.b.c to ../../../
+    @param path the path to transform into a descending directory path
+--&gt;
+&lt;xsl:template name=&quot;path&quot;&gt;
+    &lt;xsl:param name=&quot;path&quot;/&gt;
+    &lt;xsl:if test=&quot;contains($path,'.')&quot;&gt;
+        &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+        &lt;xsl:call-template name=&quot;path&quot;&gt;
+            &lt;xsl:with-param name=&quot;path&quot;&gt;&lt;xsl:value-of select=&quot;substring-after($path,'.')&quot;/&gt;&lt;/xsl:with-param&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:if test=&quot;not(contains($path,'.')) and not($path = '')&quot;&gt;
+        &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+    &lt;/xsl:if&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- create the link to the stylesheet based on the package name --&gt;
+&lt;xsl:template name=&quot;create.stylesheet.link&quot;&gt;
+    &lt;xsl:param name=&quot;package.name&quot;/&gt;
+    &lt;LINK REL =&quot;stylesheet&quot; TYPE=&quot;text/css&quot; TITLE=&quot;Style&quot;&gt;&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:if test=&quot;not($package.name = 'unnamed package')&quot;&gt;&lt;xsl:call-template name=&quot;path&quot;&gt;&lt;xsl:with-param name=&quot;path&quot; select=&quot;$package.name&quot;/&gt;&lt;/xsl:call-template&gt;&lt;/xsl:if&gt;stylesheet.css&lt;/xsl:attribute&gt;&lt;/LINK&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- alternated row style --&gt;
+&lt;xsl:template name=&quot;alternate-row&quot;&gt;
+&lt;xsl:attribute name=&quot;class&quot;&gt;
+  &lt;xsl:if test=&quot;position() mod 2 = 1&quot;&gt;a&lt;/xsl:if&gt;
+  &lt;xsl:if test=&quot;position() mod 2 = 0&quot;&gt;b&lt;/xsl:if&gt;
+&lt;/xsl:attribute&gt;
+&lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;
+
+

Added: branches/eschnepel/ant/etc/jdepend-frames.xsl
===================================================================
--- branches/eschnepel/ant/etc/jdepend-frames.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/jdepend-frames.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,486 @@
+&lt;xsl:stylesheet  xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+  xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+  xmlns:redirect=&quot;org.apache.xalan.lib.Redirect&quot;
+  extension-element-prefixes=&quot;redirect&quot;&gt;
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;/&gt;
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+   
+--&gt;
+&lt;!--
+
+ Sample stylesheet to be used with JDepend XML output.
+
+ It creates a set of HTML files a la javadoc where you can browse easily
+ through all packages and classes.
+
+ @author &lt;a href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">jtulley at novell.com</A>&quot;&gt;Jeff Tulley&lt;/a&gt;
+
+  --&gt;
+&lt;xsl:param name=&quot;output.dir&quot; select=&quot;'.'&quot;/&gt;
+
+&lt;xsl:template match=&quot;JDepend&quot;&gt;
+   &lt;!-- create the index.html --&gt;
+   &lt;redirect:write file=&quot;{$output.dir}/index.html&quot;&gt;
+      &lt;xsl:call-template name=&quot;index.html&quot;/&gt;
+   &lt;/redirect:write&gt;
+
+  &lt;!-- create the stylesheet.css --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/stylesheet.css&quot;&gt;
+    &lt;xsl:call-template name=&quot;stylesheet.css&quot;/&gt;
+   &lt;/redirect:write&gt;
+
+   &lt;!-- create the overview-packages.html at the root --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/overview-summary.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;overview.packages&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+   &lt;!-- create the overview-packages.html at the root --&gt;
+   &lt;redirect:write file=&quot;{$output.dir}/overview-packages.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;packages.details&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+   &lt;!-- create the overview-cycles.html at the root --&gt;
+   &lt;redirect:write file=&quot;{$output.dir}/overview-cycles.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;cycles.details&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+   &lt;!-- create the overview-cycles.html at the root --&gt;
+   &lt;redirect:write file=&quot;{$output.dir}/overview-explanations.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;explanations&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- create the all-packages.html at the root --&gt;
+   &lt;redirect:write file=&quot;{$output.dir}/all-packages.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;Packages&quot; mode=&quot;all.packages&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- create the all-cycles.html at the root --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/all-cycles.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;Cycles&quot; mode=&quot;all.cycles&quot;/&gt;
+  &lt;/redirect:write&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;index.html&quot;&gt;
+&lt;html&gt;
+   &lt;head&gt;
+      &lt;title&gt;JDepend Analysis&lt;/title&gt;
+   &lt;/head&gt;
+      &lt;frameset cols=&quot;20%,80%&quot;&gt;
+         &lt;frameset rows=&quot;30%,70%&quot;&gt;
+            &lt;frame src=&quot;all-packages.html&quot; name=&quot;packageListFrame&quot;/&gt;
+            &lt;frame src=&quot;all-cycles.html&quot; name=&quot;classListFrame&quot;/&gt;
+         &lt;/frameset&gt;
+         &lt;frame src=&quot;overview-summary.html&quot; name=&quot;classFrame&quot;/&gt;
+      &lt;/frameset&gt;
+      &lt;noframes&gt;
+         &lt;h2&gt;Frame Alert&lt;/h2&gt;
+         &lt;p&gt;
+            This document is designed to be viewed using the frames feature. If you see this message, you are using a non-frame-capable web client.
+         &lt;/p&gt;
+      &lt;/noframes&gt;
+&lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- this is the stylesheet css to use for nearly everything --&gt;
+&lt;xsl:template name=&quot;stylesheet.css&quot;&gt;
+   &lt;style type=&quot;text/css&quot;&gt;
+    body {
+    font:normal 68% verdana,arial,helvetica;
+    color:#000000;
+    }
+    table tr td, tr th {
+      font-size: 68%;
+    }
+    table.details tr th{
+    font-weight: bold;
+    text-align:left;
+    background:#a6caf0;
+    }
+    table.details tr td{
+    background:#eeeee0;
+    }
+
+    p {
+    line-height:1.5em;
+    margin-top:0.5em; margin-bottom:1.0em;
+    margin-left:2em;
+    margin-right:2em;
+    }
+    h1 {
+    margin: 0px 0px 5px; font: 165% verdana,arial,helvetica
+    }
+    h2 {
+    margin-top: 1em; margin-bottom: 0.5em; font: bold 125% verdana,arial,helvetica
+    }
+    h3 {
+    margin-bottom: 0.5em; font: bold 115% verdana,arial,helvetica
+    }
+    h4 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+    }
+    h5 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+    }
+    h6 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+    }
+    .Error {
+    font-weight:bold; color:red;
+    }
+    .Failure {
+    font-weight:bold; color:purple;
+    }
+    .Properties {
+    text-align:right;
+    }
+  &lt;/style&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;JDepend&quot; mode=&quot;overview.packages&quot;&gt;
+   &lt;html&gt;
+      &lt;head&gt;
+         &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+         &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+  &lt;table width=&quot;100%&quot;&gt;&lt;tr align=&quot;left&quot;&gt;&lt;h2&gt;Summary&lt;/h2&gt;&lt;td&gt;
+  &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+  [summary]
+  [&lt;a href=&quot;overview-packages.html&quot;&gt;packages&lt;/a&gt;]
+  [&lt;a href=&quot;overview-cycles.html&quot;&gt;cycles&lt;/a&gt;]
+  [&lt;a href=&quot;overview-explanations.html&quot;&gt;explanations&lt;/a&gt;]
+   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+         &lt;table width=&quot;100%&quot; class=&quot;details&quot;&gt;
+            &lt;tr&gt;
+               &lt;th&gt;Package&lt;/th&gt;
+               &lt;th&gt;Total Classes&lt;/th&gt;
+               &lt;th&gt;&lt;a href=&quot;overview-explanations.html#EXnumber&quot;&gt;Abstract Classes&lt;/a&gt;&lt;/th&gt;
+               &lt;th&gt;&lt;a href=&quot;overview-explanations.html#EXnumber&quot;&gt;Concrete Classes&lt;/a&gt;&lt;/th&gt;
+               &lt;th&gt;&lt;a href=&quot;overview-explanations.html#EXafferent&quot;&gt;Afferent Couplings&lt;/a&gt;&lt;/th&gt;
+               &lt;th&gt;&lt;a href=&quot;overview-explanations.html#EXefferent&quot;&gt;Efferent Couplings&lt;/a&gt;&lt;/th&gt;
+               &lt;th&gt;&lt;a href=&quot;overview-explanations.html#EXabstractness&quot;&gt;Abstractness&lt;/a&gt;&lt;/th&gt;
+               &lt;th&gt;&lt;a href=&quot;overview-explanations.html#EXinstability&quot;&gt;Instability&lt;/a&gt;&lt;/th&gt;
+               &lt;th&gt;&lt;a href=&quot;overview-explanations.html#EXdistance&quot;&gt;Distance&lt;/a&gt;&lt;/th&gt;
+
+            &lt;/tr&gt;
+            &lt;xsl:for-each select=&quot;./Packages/Package&quot;&gt;
+               &lt;xsl:if test=&quot;count(error) = 0&quot;&gt;
+                  &lt;tr&gt;
+                     &lt;td align=&quot;left&quot;&gt;
+                        &lt;a&gt;
+                           &lt;xsl:attribute name=&quot;href&quot;&gt;overview-packages.html#PK&lt;xsl:value-of select=&quot;@name&quot;/&gt;
+                           &lt;/xsl:attribute&gt;
+                           &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+                        &lt;/a&gt;
+                     &lt;/td&gt;
+                     &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/TotalClasses&quot;/&gt;&lt;/td&gt;
+                     &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/AbstractClasses&quot;/&gt;&lt;/td&gt;
+                     &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/ConcreteClasses&quot;/&gt;&lt;/td&gt;
+                     &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/Ca&quot;/&gt;&lt;/td&gt;
+                     &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/Ce&quot;/&gt;&lt;/td&gt;
+                     &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/A&quot;/&gt;&lt;/td&gt;
+                     &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/I&quot;/&gt;&lt;/td&gt;
+                     &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/D&quot;/&gt;&lt;/td&gt;
+                  &lt;/tr&gt;
+               &lt;/xsl:if&gt;
+            &lt;/xsl:for-each&gt;
+            &lt;xsl:for-each select=&quot;./Packages/Package&quot;&gt;
+               &lt;xsl:if test=&quot;count(error) &gt; 0&quot;&gt;
+                  &lt;tr&gt;
+                     &lt;td align=&quot;left&quot;&gt;
+                        &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+                     &lt;/td&gt;
+                     &lt;td align=&quot;left&quot; colspan=&quot;8&quot;&gt;&lt;xsl:value-of select=&quot;error&quot;/&gt;&lt;/td&gt;
+                  &lt;/tr&gt;
+               &lt;/xsl:if&gt;
+            &lt;/xsl:for-each&gt;
+         &lt;/table&gt;
+      &lt;/body&gt;
+   &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;JDepend&quot; mode=&quot;packages.details&quot;&gt;
+   &lt;html&gt;
+      &lt;head&gt;
+          &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+         &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+  &lt;table width=&quot;100%&quot;&gt;&lt;tr align=&quot;left&quot;&gt;&lt;h2&gt;Packages&lt;/h2&gt;&lt;td&gt;
+  &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+  [&lt;a href=&quot;overview-summary.html&quot;&gt;summary&lt;/a&gt;]
+  [packages]
+  [&lt;a href=&quot;overview-cycles.html&quot;&gt;cycles&lt;/a&gt;]
+  [&lt;a href=&quot;overview-explanations.html&quot;&gt;explanations&lt;/a&gt;]
+   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+
+  &lt;xsl:for-each select=&quot;./Packages/Package&quot;&gt;
+    &lt;xsl:if test=&quot;count(error) = 0&quot;&gt;
+      &lt;h3&gt;&lt;a&gt;&lt;xsl:attribute name=&quot;name&quot;&gt;PK&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/xsl:attribute&gt;
+      &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/h3&gt;
+
+      &lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;
+        &lt;td&gt;&lt;a href=&quot;overview-explanations.html#EXafferent&quot;&gt;Afferent Couplings&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/Ca&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;a href=&quot;overview-explanations.html#EXefferent&quot;&gt;Efferent Couplings&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/Ce&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;a href=&quot;overview-explanations.html#EXabstractness&quot;&gt;Abstractness&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/A&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;a href=&quot;overview-explanations.html#EXinstability&quot;&gt;Instability&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/I&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;a href=&quot;overview-explanations.html#EXdistance&quot;&gt;Distance&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/D&quot;/&gt;&lt;/td&gt;
+      &lt;/tr&gt;&lt;/table&gt;
+
+      &lt;table width=&quot;100%&quot; class=&quot;details&quot;&gt;
+        &lt;tr&gt;
+          &lt;th&gt;Abstract Classes&lt;/th&gt;
+          &lt;th&gt;Concrete Classes&lt;/th&gt;
+          &lt;th&gt;Used by Packages&lt;/th&gt;
+          &lt;th&gt;Uses Packages&lt;/th&gt;
+        &lt;/tr&gt;
+        &lt;tr&gt;
+          &lt;td valign=&quot;top&quot; width=&quot;25%&quot;&gt;
+          &lt;xsl:if test=&quot;count(AbstractClasses/Class)=0&quot;&gt;
+              &lt;i&gt;None&lt;/i&gt;
+            &lt;/xsl:if&gt;
+            &lt;xsl:for-each select=&quot;AbstractClasses/Class&quot;&gt;
+              &lt;xsl:value-of select=&quot;node()&quot;/&gt;&lt;br/&gt;
+            &lt;/xsl:for-each&gt;
+          &lt;/td&gt;
+          &lt;td valign=&quot;top&quot; width=&quot;25%&quot;&gt;
+            &lt;xsl:if test=&quot;count(ConcreteClasses/Class)=0&quot;&gt;
+              &lt;i&gt;None&lt;/i&gt;
+            &lt;/xsl:if&gt;
+            &lt;xsl:for-each select=&quot;ConcreteClasses/Class&quot;&gt;
+              &lt;xsl:value-of select=&quot;node()&quot;/&gt;&lt;br/&gt;
+            &lt;/xsl:for-each&gt;
+          &lt;/td&gt;
+          &lt;td valign=&quot;top&quot; width=&quot;25%&quot;&gt;
+            &lt;xsl:if test=&quot;count(UsedBy/Package)=0&quot;&gt;
+              &lt;i&gt;None&lt;/i&gt;
+            &lt;/xsl:if&gt;
+            &lt;xsl:for-each select=&quot;UsedBy/Package&quot;&gt;
+              &lt;a&gt;
+                        &lt;xsl:attribute name=&quot;href&quot;&gt;overview-packages.html#PK&lt;xsl:value-of select=&quot;node()&quot;/&gt;&lt;/xsl:attribute&gt;
+                &lt;xsl:value-of select=&quot;node()&quot;/&gt;
+              &lt;/a&gt;&lt;br/&gt;
+            &lt;/xsl:for-each&gt;
+          &lt;/td&gt;
+          &lt;td valign=&quot;top&quot; width=&quot;25%&quot;&gt;
+            &lt;xsl:if test=&quot;count(DependsUpon/Package)=0&quot;&gt;
+              &lt;i&gt;None&lt;/i&gt;
+            &lt;/xsl:if&gt;
+            &lt;xsl:for-each select=&quot;DependsUpon/Package&quot;&gt;
+              &lt;a&gt;
+                        &lt;xsl:attribute name=&quot;href&quot;&gt;overview-packages.html#PK&lt;xsl:value-of select=&quot;node()&quot;/&gt;&lt;/xsl:attribute&gt;
+                &lt;xsl:value-of select=&quot;node()&quot;/&gt;
+              &lt;/a&gt;&lt;br/&gt;
+            &lt;/xsl:for-each&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+      &lt;/table&gt;
+    &lt;/xsl:if&gt;
+  &lt;/xsl:for-each&gt;
+  &lt;!-- this is often a long listing; provide a lower navigation table also --&gt;
+  &lt;table width=&quot;100%&quot;&gt;&lt;tr align=&quot;left&quot;&gt;&lt;td&gt;&lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+  [&lt;a href=&quot;overview-summary.html&quot;&gt;summary&lt;/a&gt;]
+  [packages]
+  [&lt;a href=&quot;overview-cycles.html&quot;&gt;cycles&lt;/a&gt;]
+  [&lt;a href=&quot;overview-explanations.html&quot;&gt;explanations&lt;/a&gt;]
+   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+      &lt;/body&gt;
+   &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;JDepend&quot; mode=&quot;cycles.details&quot;&gt;
+   &lt;html&gt;
+      &lt;head&gt;
+         &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+         &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+  &lt;table width=&quot;100%&quot;&gt;&lt;tr align=&quot;left&quot;&gt;&lt;h2&gt;Cycles&lt;/h2&gt;&lt;td&gt;
+  &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+  [&lt;a href=&quot;overview-summary.html&quot;&gt;summary&lt;/a&gt;]
+  [&lt;a href=&quot;overview-packages.html&quot;&gt;packages&lt;/a&gt;]
+  [cycles]
+  [&lt;a href=&quot;overview-explanations.html&quot;&gt;explanations&lt;/a&gt;]
+   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+  &lt;!--&lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;&lt;td&gt;
+  &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+    [&lt;a href=&quot;#NVsummary&quot;&gt;summary&lt;/a&gt;]
+  [&lt;a href=&quot;#NVpackages&quot;&gt;packages&lt;/a&gt;]
+  [&lt;a href=&quot;#NVcycles&quot;&gt;cycles&lt;/a&gt;]
+   [&lt;a href=&quot;#NVexplanations&quot;&gt;explanations&lt;/a&gt;]
+  &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt; --&gt;
+
+  &lt;xsl:if test=&quot;count(Cycles/Package) = 0&quot;&gt;
+    &lt;p&gt;There are no cyclic dependancies.&lt;/p&gt;
+  &lt;/xsl:if&gt;
+  &lt;xsl:for-each select=&quot;Cycles/Package&quot;&gt;
+     &lt;h3&gt;&lt;a&gt;&lt;xsl:attribute name=&quot;name&quot;&gt;#CY&lt;xsl:value-of select=&quot;@Name&quot;/&gt;&lt;/xsl:attribute&gt;&lt;xsl:value-of select=&quot;@Name&quot;/&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;
+    &lt;xsl:for-each select=&quot;Package&quot;&gt;
+      &lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;br/&gt;
+    &lt;/xsl:for-each&gt;&lt;/p&gt;
+  &lt;/xsl:for-each&gt;
+  &lt;!-- this is often a long listing; provide a lower navigation table also --&gt;
+  &lt;table width=&quot;100%&quot;&gt;&lt;tr align=&quot;left&quot;&gt;&lt;td&gt;&lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+  [&lt;a href=&quot;overview-summary.html&quot;&gt;summary&lt;/a&gt;]
+  [&lt;a href=&quot;overview-packages.html&quot;&gt;packages&lt;/a&gt;]
+  [cycles]
+  [&lt;a href=&quot;overview-explanations.html&quot;&gt;explanations&lt;/a&gt;]
+   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+  &lt;/body&gt;
+  &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;JDepend&quot; mode=&quot;explanations&quot;&gt;
+   &lt;html&gt;
+      &lt;head&gt;
+         &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;
+      &lt;/head&gt;
+      &lt;body&gt;
+         &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+
+  &lt;table width=&quot;100%&quot;&gt;&lt;tr align=&quot;left&quot;&gt;&lt;h2&gt;Explanations&lt;/h2&gt;&lt;td&gt;
+  &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+  [&lt;a href=&quot;overview-summary.html&quot;&gt;summary&lt;/a&gt;]
+  [&lt;a href=&quot;overview-packages.html&quot;&gt;packages&lt;/a&gt;]
+  [&lt;a href=&quot;overview-cycles.html&quot;&gt;cycles&lt;/a&gt;]
+  [explanations]
+   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+
+  &lt;p&gt;The following explanations are for quick reference and are lifted directly from the original &lt;a href=&quot;<A HREF="http://www.clarkware.com/software/JDepend.html">http://www.clarkware.com/software/JDepend.html</A>&quot;&gt;JDepend documentation&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;h3&gt;&lt;a name=&quot;EXnumber&quot;&gt;Number of Classes&lt;/a&gt;&lt;/h3&gt;
+    &lt;p&gt;The number of concrete and abstract classes (and interfaces) in the package is an indicator of the extensibility of the package.&lt;/p&gt;
+  &lt;h3&gt;&lt;a name=&quot;EXafferent&quot;&gt;Afferent Couplings&lt;/a&gt;&lt;/h3&gt;
+    &lt;p&gt;The number of other packages that depend upon classes within the package is an indicator of the package's responsibility. &lt;/p&gt;
+  &lt;h3&gt;&lt;a name=&quot;EXefferent&quot;&gt;Efferent Couplings&lt;/a&gt;&lt;/h3&gt;
+    &lt;p&gt;The number of other packages that the classes in the package depend upon is an indicator of the package's independence. &lt;/p&gt;
+  &lt;h3&gt;&lt;a name=&quot;EXabstractness&quot;&gt;Abstractness&lt;/a&gt;&lt;/h3&gt;
+    &lt;p&gt;The ratio of the number of abstract classes (and interfaces) in the analyzed package to the total number of classes in the analyzed package. &lt;/p&gt;
+    &lt;p&gt;The range for this metric is 0 to 1, with A=0 indicating a completely concrete package and A=1 indicating a completely abstract package. &lt;/p&gt;
+  &lt;h3&gt;&lt;a name=&quot;EXinstability&quot;&gt;Instability&lt;/a&gt;&lt;/h3&gt;
+    &lt;p&gt;The ratio of efferent coupling (Ce) to total coupling (Ce / (Ce + Ca)). This metric is an indicator of the package's resilience to change. &lt;/p&gt;
+    &lt;p&gt;The range for this metric is 0 to 1, with I=0 indicating a completely stable package and I=1 indicating a completely instable package. &lt;/p&gt;
+  &lt;h3&gt;&lt;a name=&quot;EXdistance&quot;&gt;Distance&lt;/a&gt;&lt;/h3&gt;
+    &lt;p&gt;The perpendicular distance of a package from the idealized line A + I = 1. This metric is an indicator of the package's balance between abstractness and stability. &lt;/p&gt;
+    &lt;p&gt;A package squarely on the main sequence is optimally balanced with respect to its abstractness and stability. Ideal packages are either completely abstract and stable (x=0, y=1) or completely concrete and instable (x=1, y=0). &lt;/p&gt;
+    &lt;p&gt;The range for this metric is 0 to 1, with D=0 indicating a package that is coincident with the main sequence and D=1 indicating a package that is as far from the main sequence as possible. &lt;/p&gt;
+
+      &lt;/body&gt;
+   &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+Creates an html file that contains a link to all package links in overview-packages.html.
+  @bug there will be a problem here, I don't know yet how to handle unnamed package :(
+--&gt;
+&lt;xsl:template match=&quot;JDepend/Packages&quot; mode=&quot;all.packages&quot;&gt;
+  &lt;html&gt;
+    &lt;head&gt;
+      &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;
+    &lt;/head&gt;
+    &lt;body&gt;
+  &lt;table width=&quot;100%&quot;&gt;&lt;tr align=&quot;left&quot;&gt;&lt;td&gt;&lt;/td&gt;&lt;td nowrap=&quot;nowrap&quot; align=&quot;right&quot;&gt;
+  [&lt;a href=&quot;overview-summary.html&quot; target=&quot;classFrame&quot;&gt;summary&lt;/a&gt;]
+  [&lt;a href=&quot;overview-packages.html&quot; target=&quot;classFrame&quot;&gt;packages&lt;/a&gt;]
+  [&lt;a href=&quot;overview-cycles.html&quot; target=&quot;classFrame&quot;&gt;cycles&lt;/a&gt;]
+  [&lt;a href=&quot;overview-explanations.html&quot; target=&quot;classFrame&quot;&gt;explanations&lt;/a&gt;]
+   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+      &lt;h2&gt;Packages&lt;/h2&gt;
+        &lt;table width=&quot;100%&quot;&gt;
+          &lt;xsl:apply-templates select=&quot;Package[count(error)=0]&quot; mode=&quot;all.packages.link&quot;&gt;
+            &lt;xsl:sort select=&quot;@name&quot;/&gt;
+          &lt;/xsl:apply-templates&gt;
+          &lt;xsl:apply-templates select=&quot;Package[count(error) &gt; 0]&quot; mode=&quot;all.packages.nolink&quot;&gt;
+            &lt;xsl:sort select=&quot;@name&quot;/&gt;
+          &lt;/xsl:apply-templates&gt;
+        &lt;/table&gt;
+    &lt;/body&gt;
+  &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;JDepend/Packages/Package&quot; mode=&quot;all.packages.link&quot;&gt;
+  &lt;tr&gt;
+    &lt;td nowrap=&quot;nowrap&quot;&gt;
+         &lt;a href=&quot;overview-packages.html#PK{@name}&quot; target=&quot;classFrame&quot;&gt;
+        &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+      &lt;/a&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!--
+I do not know JDepend enough to know if every error results in a non-analyzed package,
+but that is how I am presenting it to the viewer.  This may need to change.
+  @bug there will be a problem here, I don't know yet how to handle unnamed package :(
+--&gt;
+&lt;xsl:template match=&quot;JDepend/Packages/Package&quot; mode=&quot;all.packages.nolink&quot;&gt;
+  &lt;tr&gt;
+    &lt;td nowrap=&quot;nowrap&quot;&gt;
+       Not Analyzed: &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!--
+Creates an html file that contains a link to all package links in overview-cycles.html.
+  @bug there will be a problem here, I don't know yet how to handle unnamed package :(
+--&gt;
+&lt;xsl:template match=&quot;JDepend/Cycles&quot; mode=&quot;all.cycles&quot;&gt;
+  &lt;html&gt;
+    &lt;head&gt;
+      &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;stylesheet.css&quot;/&gt;
+    &lt;/head&gt;
+    &lt;body&gt;
+  &lt;table width=&quot;100%&quot;&gt;&lt;tr align=&quot;left&quot;&gt;&lt;td&gt;&lt;/td&gt;&lt;td nowrap=&quot;nowrap&quot; align=&quot;right&quot;&gt;
+  [&lt;a href=&quot;overview-summary.html&quot; target=&quot;classFrame&quot;&gt;summary&lt;/a&gt;]
+  [&lt;a href=&quot;overview-packages.html&quot; target=&quot;classFrame&quot;&gt;packages&lt;/a&gt;]
+  [&lt;a href=&quot;overview-cycles.html&quot; target=&quot;classFrame&quot;&gt;cycles&lt;/a&gt;]
+  [&lt;a href=&quot;overview-explanations.html&quot; target=&quot;classFrame&quot;&gt;explanations&lt;/a&gt;]
+   &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+      &lt;h2&gt;Cycles&lt;/h2&gt;
+        &lt;table width=&quot;100%&quot;&gt;
+           &lt;xsl:apply-templates select=&quot;Package&quot; mode=&quot;all.cycles&quot;&gt;
+            &lt;xsl:sort select=&quot;@Name&quot;/&gt;
+          &lt;/xsl:apply-templates&gt;
+        &lt;/table&gt;
+    &lt;/body&gt;
+  &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;JDepend/Cycles/Package&quot; mode=&quot;all.cycles&quot;&gt;
+  &lt;tr&gt;
+    &lt;td nowrap=&quot;nowrap&quot;&gt;
+         &lt;a href=&quot;overview-cycles.html#CY{@Name}&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;@Name&quot;/&gt;&lt;/a&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- Page HEADER --&gt;
+&lt;xsl:template name=&quot;pageHeader&quot;&gt;
+   &lt;h1&gt;JDepend Analysis&lt;/h1&gt;
+  &lt;table width=&quot;100%&quot;&gt;
+  &lt;tr&gt;
+    &lt;td align=&quot;left&quot;&gt;&lt;/td&gt;
+      &lt;td align=&quot;right&quot;&gt;Designed for use with &lt;a href=&quot;<A HREF="http://www.clarkware.com/software/JDepend.html">http://www.clarkware.com/software/JDepend.html</A>&quot;&gt;JDepend&lt;/a&gt; and &lt;a href=&quot;<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>&quot;&gt;Ant&lt;/a&gt;.&lt;/td&gt;
+  &lt;/tr&gt;
+  &lt;/table&gt;
+  &lt;hr size=&quot;1&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;

Added: branches/eschnepel/ant/etc/jdepend.xsl
===================================================================
--- branches/eschnepel/ant/etc/jdepend.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/jdepend.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,275 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;&gt;
+
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+--&gt;
+
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot;  encoding=&quot;US-ASCII&quot;/&gt;
+
+&lt;xsl:template match=&quot;JDepend&quot;&gt;
+    &lt;html&gt;
+    &lt;head&gt;
+        &lt;title&gt;JDepend Analysis&lt;/title&gt;
+        
+    &lt;style type=&quot;text/css&quot;&gt;
+      body {
+        font:normal 68% verdana,arial,helvetica;
+        color:#000000;
+      }
+      table tr td, tr th {
+          font-size: 68%;
+      }
+      table.details tr th{
+        font-weight: bold;
+        text-align:left;
+        background:#a6caf0;
+      }
+      table.details tr td{
+        background:#eeeee0;
+      }
+      
+      p {
+        line-height:1.5em;
+        margin-top:0.5em; margin-bottom:1.0em;
+        margin-left:2em;
+        margin-right:2em;
+      }
+      h1 {
+        margin: 0px 0px 5px; font: 165% verdana,arial,helvetica
+      }
+      h2 {
+        margin-top: 1em; margin-bottom: 0.5em; font: bold 125% verdana,arial,helvetica
+      }
+      h3 {
+        margin-bottom: 0.5em; font: bold 115% verdana,arial,helvetica
+      }
+      h4 {
+        margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+      }
+      h5 {
+        margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+      }
+      h6 {
+        margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+      }
+      .Error {
+        font-weight:bold; color:red;
+      }
+      .Failure {
+        font-weight:bold; color:purple;
+      }
+      .Properties {
+        text-align:right;
+      }
+      &lt;/style&gt;
+        
+        
+    &lt;/head&gt;
+    &lt;body&gt;
+    &lt;!--h1&gt;JDepend Report&lt;/h1&gt;
+    &lt;ul&gt;
+    &lt;xsl:for-each select=&quot;./Packages/Package&quot;&gt;
+                &lt;xsl:sort select=&quot;@name&quot;/&gt;
+        &lt;li&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/li&gt;
+    &lt;/xsl:for-each&gt;
+    &lt;/ul--&gt;
+    
+    &lt;h1&gt;&lt;a name=&quot;top&quot;&gt;JDepend Analysis&lt;/a&gt;&lt;/h1&gt;
+    &lt;p align=&quot;right&quot;&gt;Designed for use with &lt;a href=&quot;<A HREF="http://www.clarkware.com/software/JDepend.html">http://www.clarkware.com/software/JDepend.html</A>&quot;&gt;JDepend&lt;/a&gt; and &lt;a href=&quot;<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>&quot;&gt;Ant&lt;/a&gt;.&lt;/p&gt;
+    &lt;hr size=&quot;2&quot; /&gt;
+    
+    &lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;&lt;td&gt;
+    &lt;a name=&quot;NVsummary&quot;&gt;&lt;h2&gt;Summary&lt;/h2&gt;&lt;/a&gt;
+    &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+    [&lt;a href=&quot;#NVsummary&quot;&gt;summary&lt;/a&gt;]
+    [&lt;a href=&quot;#NVpackages&quot;&gt;packages&lt;/a&gt;]
+    [&lt;a href=&quot;#NVcycles&quot;&gt;cycles&lt;/a&gt;]
+    [&lt;a href=&quot;#NVexplanations&quot;&gt;explanations&lt;/a&gt;]
+    &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+    
+    &lt;table width=&quot;100%&quot; class=&quot;details&quot;&gt;
+        &lt;tr&gt;
+            &lt;th&gt;Package&lt;/th&gt;
+            &lt;th&gt;Total Classes&lt;/th&gt;
+            &lt;th&gt;&lt;a href=&quot;#EXnumber&quot;&gt;Abstract Classes&lt;/a&gt;&lt;/th&gt;
+            &lt;th&gt;&lt;a href=&quot;#EXnumber&quot;&gt;Concrete Classes&lt;/a&gt;&lt;/th&gt;
+            &lt;th&gt;&lt;a href=&quot;#EXafferent&quot;&gt;Afferent Couplings&lt;/a&gt;&lt;/th&gt;
+            &lt;th&gt;&lt;a href=&quot;#EXefferent&quot;&gt;Efferent Couplings&lt;/a&gt;&lt;/th&gt;
+            &lt;th&gt;&lt;a href=&quot;#EXabstractness&quot;&gt;Abstractness&lt;/a&gt;&lt;/th&gt;
+            &lt;th&gt;&lt;a href=&quot;#EXinstability&quot;&gt;Instability&lt;/a&gt;&lt;/th&gt;
+            &lt;th&gt;&lt;a href=&quot;#EXdistance&quot;&gt;Distance&lt;/a&gt;&lt;/th&gt;
+            
+        &lt;/tr&gt;
+    &lt;xsl:for-each select=&quot;./Packages/Package&quot;&gt;
+        &lt;xsl:if test=&quot;count(error) = 0&quot;&gt;
+            &lt;tr&gt;
+                &lt;td align=&quot;left&quot;&gt;
+                    &lt;a&gt;
+                    &lt;xsl:attribute name=&quot;href&quot;&gt;#PK&lt;xsl:value-of select=&quot;@name&quot;/&gt;
+                    &lt;/xsl:attribute&gt;
+                    &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+                    &lt;/a&gt;
+                &lt;/td&gt;
+                &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/TotalClasses&quot;/&gt;&lt;/td&gt;
+                &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/AbstractClasses&quot;/&gt;&lt;/td&gt;
+                &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/ConcreteClasses&quot;/&gt;&lt;/td&gt;
+                &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/Ca&quot;/&gt;&lt;/td&gt;
+                &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/Ce&quot;/&gt;&lt;/td&gt;
+                &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/A&quot;/&gt;&lt;/td&gt;
+                &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/I&quot;/&gt;&lt;/td&gt;
+                &lt;td align=&quot;right&quot;&gt;&lt;xsl:value-of select=&quot;Stats/D&quot;/&gt;&lt;/td&gt;
+                
+
+            &lt;/tr&gt;
+        &lt;/xsl:if&gt;
+    &lt;/xsl:for-each&gt;
+    &lt;xsl:for-each select=&quot;./Packages/Package&quot;&gt;
+        &lt;xsl:if test=&quot;count(error) &gt; 0&quot;&gt;
+            &lt;tr&gt;
+                &lt;td align=&quot;left&quot;&gt;
+                    &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+                &lt;/td&gt;
+                &lt;td align=&quot;left&quot; colspan=&quot;8&quot;&gt;&lt;xsl:value-of select=&quot;error&quot;/&gt;&lt;/td&gt;
+            &lt;/tr&gt;
+        &lt;/xsl:if&gt;
+    &lt;/xsl:for-each&gt;
+    &lt;/table&gt;
+    
+    &lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;&lt;td&gt;
+    &lt;a name=&quot;NVpackages&quot;&gt;&lt;h2&gt;Packages&lt;/h2&gt;&lt;/a&gt;
+    &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+    [&lt;a href=&quot;#NVsummary&quot;&gt;summary&lt;/a&gt;]
+    [&lt;a href=&quot;#NVpackages&quot;&gt;packages&lt;/a&gt;]
+    [&lt;a href=&quot;#NVcycles&quot;&gt;cycles&lt;/a&gt;]
+    [&lt;a href=&quot;#NVexplanations&quot;&gt;explanations&lt;/a&gt;]
+    &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+    
+    &lt;xsl:for-each select=&quot;./Packages/Package&quot;&gt;
+        &lt;xsl:if test=&quot;count(error) = 0&quot;&gt;
+            &lt;h3&gt;&lt;a&gt;&lt;xsl:attribute name=&quot;name&quot;&gt;PK&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/xsl:attribute&gt;
+            &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/h3&gt;
+            
+            &lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;
+                &lt;td&gt;&lt;a href=&quot;#EXafferent&quot;&gt;Afferent Couplings&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/Ca&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;a href=&quot;#EXefferent&quot;&gt;Efferent Couplings&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/Ce&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;a href=&quot;#EXabstractness&quot;&gt;Abstractness&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/A&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;a href=&quot;#EXinstability&quot;&gt;Instability&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/I&quot;/&gt;&lt;/td&gt;
+                &lt;td&gt;&lt;a href=&quot;#EXdistance&quot;&gt;Distance&lt;/a&gt;: &lt;xsl:value-of select=&quot;Stats/D&quot;/&gt;&lt;/td&gt;
+            &lt;/tr&gt;&lt;/table&gt;
+            
+            &lt;table width=&quot;100%&quot; class=&quot;details&quot;&gt;
+                &lt;tr&gt;
+                    &lt;th&gt;Abstract Classes&lt;/th&gt;
+                    &lt;th&gt;Concrete Classes&lt;/th&gt;
+                    &lt;th&gt;Used by Packages&lt;/th&gt;
+                    &lt;th&gt;Uses Packages&lt;/th&gt;
+                &lt;/tr&gt;
+                &lt;tr&gt;
+                    &lt;td valign=&quot;top&quot; width=&quot;25%&quot;&gt;
+                    &lt;xsl:if test=&quot;count(AbstractClasses/Class)=0&quot;&gt;
+                            &lt;i&gt;None&lt;/i&gt;
+                        &lt;/xsl:if&gt;
+                        &lt;xsl:for-each select=&quot;AbstractClasses/Class&quot;&gt;
+                            &lt;xsl:value-of select=&quot;node()&quot;/&gt;&lt;br/&gt;
+                        &lt;/xsl:for-each&gt;
+                    &lt;/td&gt;
+                    &lt;td valign=&quot;top&quot; width=&quot;25%&quot;&gt;
+                        &lt;xsl:if test=&quot;count(ConcreteClasses/Class)=0&quot;&gt;
+                            &lt;i&gt;None&lt;/i&gt;
+                        &lt;/xsl:if&gt;
+                        &lt;xsl:for-each select=&quot;ConcreteClasses/Class&quot;&gt;
+                            &lt;xsl:value-of select=&quot;node()&quot;/&gt;&lt;br/&gt;
+                        &lt;/xsl:for-each&gt;
+                    &lt;/td&gt;
+                    &lt;td valign=&quot;top&quot; width=&quot;25%&quot;&gt;
+                        &lt;xsl:if test=&quot;count(UsedBy/Package)=0&quot;&gt;
+                            &lt;i&gt;None&lt;/i&gt;
+                        &lt;/xsl:if&gt;
+                        &lt;xsl:for-each select=&quot;UsedBy/Package&quot;&gt;
+                            &lt;a&gt;
+                                &lt;xsl:attribute name=&quot;href&quot;&gt;#PK&lt;xsl:value-of select=&quot;node()&quot;/&gt;&lt;/xsl:attribute&gt;
+                                &lt;xsl:value-of select=&quot;node()&quot;/&gt;
+                            &lt;/a&gt;&lt;br/&gt;
+                        &lt;/xsl:for-each&gt;
+                    &lt;/td&gt;
+                    &lt;td valign=&quot;top&quot; width=&quot;25%&quot;&gt;
+                        &lt;xsl:if test=&quot;count(DependsUpon/Package)=0&quot;&gt;
+                            &lt;i&gt;None&lt;/i&gt;
+                        &lt;/xsl:if&gt;
+                        &lt;xsl:for-each select=&quot;DependsUpon/Package&quot;&gt;
+                            &lt;a&gt;
+                                &lt;xsl:attribute name=&quot;href&quot;&gt;#PK&lt;xsl:value-of select=&quot;node()&quot;/&gt;&lt;/xsl:attribute&gt;
+                                &lt;xsl:value-of select=&quot;node()&quot;/&gt;
+                            &lt;/a&gt;&lt;br/&gt;
+                        &lt;/xsl:for-each&gt;
+                    &lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/table&gt;
+        &lt;/xsl:if&gt;
+    &lt;/xsl:for-each&gt;
+    
+    &lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;&lt;td&gt;
+    &lt;a name=&quot;NVcycles&quot;&gt;&lt;h2&gt;Cycles&lt;/h2&gt;&lt;/a&gt;
+    &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+    [&lt;a href=&quot;#NVsummary&quot;&gt;summary&lt;/a&gt;]
+    [&lt;a href=&quot;#NVpackages&quot;&gt;packages&lt;/a&gt;]
+    [&lt;a href=&quot;#NVcycles&quot;&gt;cycles&lt;/a&gt;]
+    [&lt;a href=&quot;#NVexplanations&quot;&gt;explanations&lt;/a&gt;]
+    &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+    
+    &lt;xsl:if test=&quot;count(Cycles/Package) = 0&quot;&gt;
+        &lt;p&gt;There are no cyclic dependancies.&lt;/p&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:for-each select=&quot;Cycles/Package&quot;&gt;
+        &lt;h3&gt;&lt;xsl:value-of select=&quot;@Name&quot;/&gt;&lt;/h3&gt;&lt;p&gt;
+        &lt;xsl:for-each select=&quot;Package&quot;&gt;
+            &lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;br/&gt;
+        &lt;/xsl:for-each&gt;&lt;/p&gt;
+    &lt;/xsl:for-each&gt;
+    
+    &lt;table width=&quot;100%&quot;&gt;&lt;tr&gt;&lt;td&gt;
+    &lt;a name=&quot;NVexplanations&quot;&gt;&lt;h2&gt;Explanations&lt;/h2&gt;&lt;/a&gt;
+    &lt;/td&gt;&lt;td align=&quot;right&quot;&gt;
+    [&lt;a href=&quot;#NVsummary&quot;&gt;summary&lt;/a&gt;]
+    [&lt;a href=&quot;#NVpackages&quot;&gt;packages&lt;/a&gt;]
+    [&lt;a href=&quot;#NVcycles&quot;&gt;cycles&lt;/a&gt;]
+    [&lt;a href=&quot;#NVexplanations&quot;&gt;explanations&lt;/a&gt;]
+    &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
+    
+    &lt;p&gt;The following explanations are for quick reference and are lifted directly from the original &lt;a href=&quot;<A HREF="http://www.clarkware.com/software/JDepend.html">http://www.clarkware.com/software/JDepend.html</A>&quot;&gt;JDepend documentation&lt;/a&gt;.&lt;/p&gt;
+    
+    &lt;h3&gt;&lt;a name=&quot;EXnumber&quot;&gt;Number of Classes&lt;/a&gt;&lt;/h3&gt;
+        &lt;p&gt;The number of concrete and abstract classes (and interfaces) in the package is an indicator of the extensibility of the package.&lt;/p&gt;
+    &lt;h3&gt;&lt;a name=&quot;EXafferent&quot;&gt;Afferent Couplings&lt;/a&gt;&lt;/h3&gt;
+        &lt;p&gt;The number of other packages that depend upon classes within the package is an indicator of the package's responsibility. &lt;/p&gt;
+    &lt;h3&gt;&lt;a name=&quot;EXefferent&quot;&gt;Efferent Couplings&lt;/a&gt;&lt;/h3&gt;
+        &lt;p&gt;The number of other packages that the classes in the package depend upon is an indicator of the package's independence. &lt;/p&gt;
+    &lt;h3&gt;&lt;a name=&quot;EXabstractness&quot;&gt;Abstractness&lt;/a&gt;&lt;/h3&gt; 
+        &lt;p&gt;The ratio of the number of abstract classes (and interfaces) in the analyzed package to the total number of classes in the analyzed package. &lt;/p&gt;
+        &lt;p&gt;The range for this metric is 0 to 1, with A=0 indicating a completely concrete package and A=1 indicating a completely abstract package. &lt;/p&gt;
+    &lt;h3&gt;&lt;a name=&quot;EXinstability&quot;&gt;Instability&lt;/a&gt;&lt;/h3&gt;
+        &lt;p&gt;The ratio of efferent coupling (Ce) to total coupling (Ce / (Ce + Ca)). This metric is an indicator of the package's resilience to change. &lt;/p&gt;
+        &lt;p&gt;The range for this metric is 0 to 1, with I=0 indicating a completely stable package and I=1 indicating a completely instable package. &lt;/p&gt;
+    &lt;h3&gt;&lt;a name=&quot;EXdistance&quot;&gt;Distance&lt;/a&gt;&lt;/h3&gt;
+        &lt;p&gt;The perpendicular distance of a package from the idealized line A + I = 1. This metric is an indicator of the package's balance between abstractness and stability. &lt;/p&gt;
+        &lt;p&gt;A package squarely on the main sequence is optimally balanced with respect to its abstractness and stability. Ideal packages are either completely abstract and stable (x=0, y=1) or completely concrete and instable (x=1, y=0). &lt;/p&gt;
+        &lt;p&gt;The range for this metric is 0 to 1, with D=0 indicating a package that is coincident with the main sequence and D=1 indicating a package that is as far from the main sequence as possible. &lt;/p&gt;
+    
+    &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;

Added: branches/eschnepel/ant/etc/junit-frames-xalan1.xsl
===================================================================
--- branches/eschnepel/ant/etc/junit-frames-xalan1.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/junit-frames-xalan1.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,718 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+    xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+    xmlns:redirect=&quot;org.apache.xalan.lib.Redirect&quot;
+    xmlns:stringutils=&quot;<A HREF="xalan://org.apache.tools.ant.util.StringUtils">xalan://org.apache.tools.ant.util.StringUtils</A>&quot;
+    extension-element-prefixes=&quot;redirect&quot;&gt;
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;/&gt;
+&lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot;/&gt;
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+ --&gt;
+
+&lt;!--
+
+ Sample stylesheet to be used with Ant JUnitReport output.
+
+ It creates a set of HTML files a la javadoc where you can browse easily
+ through all packages and classes.
+
+--&gt;
+&lt;xsl:param name=&quot;output.dir&quot; select=&quot;'.'&quot;/&gt;
+
+
+&lt;xsl:template match=&quot;testsuites&quot;&gt;
+    &lt;!-- create the index.html --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/index.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;index.html&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the stylesheet.css --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/stylesheet.css&quot;&gt;
+        &lt;xsl:call-template name=&quot;stylesheet.css&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the overview-packages.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/overview-summary.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;overview.packages&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-packages.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/overview-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.packages&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-classes.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/allclasses-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.classes&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- process all packages --&gt;
+    &lt;xsl:for-each select=&quot;./testsuite[not(./@package = preceding-sibling::testsuite/@package)]&quot;&gt;
+        &lt;xsl:call-template name=&quot;package&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;@package&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;package&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;xsl:variable name=&quot;package.dir&quot;&gt;
+        &lt;xsl:if test=&quot;not($name = '')&quot;&gt;&lt;xsl:value-of select=&quot;translate($name,'.','/')&quot;/&gt;&lt;/xsl:if&gt;
+        &lt;xsl:if test=&quot;$name = ''&quot;&gt;.&lt;/xsl:if&gt;
+    &lt;/xsl:variable&gt;
+    &lt;!--Processing package &lt;xsl:value-of select=&quot;@name&quot;/&gt; in &lt;xsl:value-of select=&quot;$output.dir&quot;/&gt; --&gt;
+    &lt;!-- create a classes-list.html in the package directory --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-frame.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;classes.list&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;$name&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create a package-summary.html in the package directory --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-summary.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;package.summary&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;$name&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- for each class, creates a @name.html --&gt;
+    &lt;!-- @bug there will be a problem with inner classes having the same name, it will be overwritten --&gt;
+    &lt;xsl:for-each select=&quot;/testsuites/testsuite[@package = $name]&quot;&gt;
+        &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@name}.html&quot;&gt;
+            &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;class.details&quot;/&gt;
+        &lt;/redirect:write&gt;
+        &lt;xsl:if test=&quot;string-length(./system-out)!=0&quot;&gt;
+            &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@name}-out.txt&quot;&gt;
+                &lt;xsl:value-of select=&quot;./system-out&quot; /&gt;
+            &lt;/redirect:write&gt;
+        &lt;/xsl:if&gt;
+        &lt;xsl:if test=&quot;string-length(./system-err)!=0&quot;&gt;
+            &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@name}-err.txt&quot;&gt;
+                &lt;xsl:value-of select=&quot;./system-err&quot; /&gt;
+            &lt;/redirect:write&gt;
+        &lt;/xsl:if&gt;
+    &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;index.html&quot;&gt;
+&lt;html&gt;
+    &lt;head&gt;
+        &lt;title&gt;Unit Test Results.&lt;/title&gt;
+    &lt;/head&gt;
+    &lt;frameset cols=&quot;20%,80%&quot;&gt;
+        &lt;frameset rows=&quot;30%,70%&quot;&gt;
+            &lt;frame src=&quot;overview-frame.html&quot; name=&quot;packageListFrame&quot;/&gt;
+            &lt;frame src=&quot;allclasses-frame.html&quot; name=&quot;classListFrame&quot;/&gt;
+        &lt;/frameset&gt;
+        &lt;frame src=&quot;overview-summary.html&quot; name=&quot;classFrame&quot;/&gt;
+        &lt;noframes&gt;
+            &lt;h2&gt;Frame Alert&lt;/h2&gt;
+            &lt;p&gt;
+                This document is designed to be viewed using the frames feature. If you see this message, you are using a non-frame-capable web client.
+            &lt;/p&gt;
+        &lt;/noframes&gt;
+    &lt;/frameset&gt;
+&lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- this is the stylesheet css to use for nearly everything --&gt;
+&lt;xsl:template name=&quot;stylesheet.css&quot;&gt;
+body {
+    font:normal 68% verdana,arial,helvetica;
+    color:#000000;
+}
+table tr td, table tr th {
+    font-size: 68%;
+}
+table.details tr th{
+    font-weight: bold;
+    text-align:left;
+    background:#a6caf0;
+}
+table.details tr td{
+    background:#eeeee0;
+}
+
+p {
+    line-height:1.5em;
+    margin-top:0.5em; margin-bottom:1.0em;
+}
+h1 {
+    margin: 0px 0px 5px; font: 165% verdana,arial,helvetica
+}
+h2 {
+    margin-top: 1em; margin-bottom: 0.5em; font: bold 125% verdana,arial,helvetica
+}
+h3 {
+    margin-bottom: 0.5em; font: bold 115% verdana,arial,helvetica
+}
+h4 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+}
+h5 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+}
+h6 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+}
+.Error {
+    font-weight:bold; color:red;
+}
+.Failure {
+    font-weight:bold; color:purple;
+}
+.Properties {
+  text-align:right;
+}
+&lt;/xsl:template&gt;
+
+
+&lt;!-- ======================================================================
+    This page is created for every testsuite class.
+    It prints a summary of the testsuite and detailed information about
+    testcase methods.
+     ====================================================================== --&gt;
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;class.details&quot;&gt;
+    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@package&quot;/&gt;
+    &lt;xsl:variable name=&quot;class.name&quot;&gt;&lt;xsl:if test=&quot;not($package.name = '')&quot;&gt;&lt;xsl:value-of select=&quot;$package.name&quot;/&gt;.&lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/xsl:variable&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+          &lt;title&gt;Unit Test Results: &lt;xsl:value-of select=&quot;$class.name&quot;/&gt;&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+       &lt;script type=&quot;text/javascript&quot; language=&quot;JavaScript&quot;&gt;
+        var TestCases = new Array();
+        var cur;
+        &lt;xsl:apply-templates select=&quot;properties&quot;/&gt;
+       &lt;/script&gt;
+       &lt;script type=&quot;text/javascript&quot; language=&quot;JavaScript&quot;&gt;&lt;![CDATA[
+        function displayProperties (name) {
+          var win = window.open('','JUnitSystemProperties','scrollbars=1,resizable=1');
+          var doc = win.document;
+          doc.open();
+          doc.write(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Properties of &quot; + name + &quot;&lt;/title&gt;&quot;);
+          doc.write(&quot;&lt;style type=\&quot;text/css\&quot;&gt;&quot;);
+          doc.write(&quot;body {font:normal 68% verdana,arial,helvetica; color:#000000; }&quot;);
+          doc.write(&quot;table tr td, table tr th { font-size: 68%; }&quot;);
+          doc.write(&quot;table.properties { border-collapse:collapse; border-left:solid 1 #cccccc; border-top:solid 1 #cccccc; padding:5px; }&quot;);
+          doc.write(&quot;table.properties th { text-align:left; border-right:solid 1 #cccccc; border-bottom:solid 1 #cccccc; background-color:#eeeeee; }&quot;);
+          doc.write(&quot;table.properties td { font:normal; text-align:left; border-right:solid 1 #cccccc; border-bottom:solid 1 #cccccc; background-color:#fffffff; }&quot;);
+          doc.write(&quot;h3 { margin-bottom: 0.5em; font: bold 115% verdana,arial,helvetica }&quot;);
+          doc.write(&quot;&lt;/style&gt;&quot;);
+          doc.write(&quot;&lt;/head&gt;&lt;body&gt;&quot;);
+          doc.write(&quot;&lt;h3&gt;Properties of &quot; + name + &quot;&lt;/h3&gt;&quot;);
+          doc.write(&quot;&lt;div align=\&quot;right\&quot;&gt;&lt;a href=\&quot;javascript:window.close();\&quot;&gt;Close&lt;/a&gt;&lt;/div&gt;&quot;);
+          doc.write(&quot;&lt;table class='properties'&gt;&quot;);
+          doc.write(&quot;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Value&lt;/th&gt;&lt;/tr&gt;&quot;);
+          for (prop in TestCases[name]) {
+            doc.write(&quot;&lt;tr&gt;&lt;th&gt;&quot; + prop + &quot;&lt;/th&gt;&lt;td&gt;&quot; + TestCases[name][prop] + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;);
+          }
+          doc.write(&quot;&lt;/table&gt;&quot;);
+          doc.write(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);
+          doc.close();
+          win.focus();
+        }
+      ]]&gt;
+      &lt;/script&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;h3&gt;Class &lt;xsl:value-of select=&quot;$class.name&quot;/&gt;&lt;/h3&gt;
+
+
+            &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+                &lt;xsl:call-template name=&quot;testsuite.test.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.test&quot;/&gt;
+            &lt;/table&gt;
+
+            &lt;h2&gt;Tests&lt;/h2&gt;
+            &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+        &lt;xsl:call-template name=&quot;testcase.test.header&quot;/&gt;
+              &lt;!--
+              test can even not be started at all (failure to load the class)
+              so report the error directly
+              --&gt;
+                &lt;xsl:if test=&quot;./error&quot;&gt;
+                    &lt;tr class=&quot;Error&quot;&gt;
+                        &lt;td colspan=&quot;4&quot;&gt;&lt;xsl:apply-templates select=&quot;./error&quot;/&gt;&lt;/td&gt;
+                    &lt;/tr&gt;
+                &lt;/xsl:if&gt;
+                &lt;xsl:apply-templates select=&quot;./testcase&quot; mode=&quot;print.test&quot;/&gt;
+            &lt;/table&gt;
+            &lt;div class=&quot;Properties&quot;&gt;
+                &lt;a&gt;
+                    &lt;xsl:attribute name=&quot;href&quot;&gt;javascript:displayProperties('&lt;xsl:value-of select=&quot;@package&quot;/&gt;.&lt;xsl:value-of select=&quot;@name&quot;/&gt;');&lt;/xsl:attribute&gt;
+                    Properties &#187;
+                &lt;/a&gt;
+            &lt;/div&gt;
+            &lt;xsl:if test=&quot;string-length(./system-out)!=0&quot;&gt;
+                &lt;div class=&quot;Properties&quot;&gt;
+                    &lt;a&gt;
+                        &lt;xsl:attribute name=&quot;href&quot;&gt;./&lt;xsl:value-of select=&quot;@name&quot;/&gt;-out.txt&lt;/xsl:attribute&gt;
+                        System.out &#187;
+                    &lt;/a&gt;
+                &lt;/div&gt;
+            &lt;/xsl:if&gt;
+            &lt;xsl:if test=&quot;string-length(./system-err)!=0&quot;&gt;
+                &lt;div class=&quot;Properties&quot;&gt;
+                    &lt;a&gt;
+                        &lt;xsl:attribute name=&quot;href&quot;&gt;./&lt;xsl:value-of select=&quot;@name&quot;/&gt;-err.txt&lt;/xsl:attribute&gt;
+                        System.err &#187;
+                    &lt;/a&gt;
+                &lt;/div&gt;
+            &lt;/xsl:if&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+  &lt;!--
+   Write properties into a JavaScript data structure.
+   This is based on the original idea by Erik Hatcher (<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">ehatcher at apache.org</A>)
+   --&gt;
+  &lt;xsl:template match=&quot;properties&quot;&gt;
+    cur = TestCases['&lt;xsl:value-of select=&quot;../@package&quot;/&gt;.&lt;xsl:value-of select=&quot;../@name&quot;/&gt;'] = new Array();
+    &lt;xsl:for-each select=&quot;property&quot;&gt;
+    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+        cur['&lt;xsl:value-of select=&quot;@name&quot;/&gt;'] = '&lt;xsl:call-template name=&quot;JS-escape&quot;&gt;&lt;xsl:with-param name=&quot;string&quot; select=&quot;@value&quot;/&gt;&lt;/xsl:call-template&gt;';
+    &lt;/xsl:for-each&gt;
+  &lt;/xsl:template&gt;
+
+
+&lt;!-- ======================================================================
+    This page is created for every package.
+    It prints the name of all classes that belongs to this package.
+    @param name the package name to print classes.
+     ====================================================================== --&gt;
+&lt;!-- list of classes in a package --&gt;
+&lt;xsl:template name=&quot;classes.list&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;Unit Test Classes: &lt;xsl:value-of select=&quot;$name&quot;/&gt;&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;tr&gt;
+                    &lt;td nowrap=&quot;nowrap&quot;&gt;
+                        &lt;h2&gt;&lt;a href=&quot;package-summary.html&quot; target=&quot;classFrame&quot;&gt;
+                            &lt;xsl:value-of select=&quot;$name&quot;/&gt;
+                            &lt;xsl:if test=&quot;$name = ''&quot;&gt;&lt;none&gt;&lt;/xsl:if&gt;
+                        &lt;/a&gt;&lt;/h2&gt;
+                    &lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/table&gt;
+
+            &lt;h2&gt;Classes&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:for-each select=&quot;/testsuites/testsuite[./@package = $name]&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                    &lt;tr&gt;
+                        &lt;td nowrap=&quot;nowrap&quot;&gt;
+                            &lt;a href=&quot;{@name}.html&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;
+                        &lt;/td&gt;
+                    &lt;/tr&gt;
+                &lt;/xsl:for-each&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    Creates an all-classes.html file that contains a link to all package-summary.html
+    on each class.
+--&gt;
+&lt;xsl:template match=&quot;testsuites&quot; mode=&quot;all.classes&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;All Unit Test Classes&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;h2&gt;Classes&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;testsuite&quot; mode=&quot;all.classes&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                &lt;/xsl:apply-templates&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;all.classes&quot;&gt;
+    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@package&quot;/&gt;
+    &lt;tr&gt;
+        &lt;td nowrap=&quot;nowrap&quot;&gt;
+            &lt;a target=&quot;classFrame&quot;&gt;
+                &lt;xsl:attribute name=&quot;href&quot;&gt;
+                    &lt;xsl:if test=&quot;not($package.name='')&quot;&gt;
+                        &lt;xsl:value-of select=&quot;translate($package.name,'.','/')&quot;/&gt;&lt;xsl:text&gt;/&lt;/xsl:text&gt;
+                    &lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;xsl:text&gt;.html&lt;/xsl:text&gt;
+                &lt;/xsl:attribute&gt;
+                &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+            &lt;/a&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    Creates an html file that contains a link to all package-summary.html files on
+    each package existing on testsuites.
+    @bug there will be a problem here, I don't know yet how to handle unnamed package :(
+--&gt;
+&lt;xsl:template match=&quot;testsuites&quot; mode=&quot;all.packages&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;All Unit Test Packages&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;h2&gt;&lt;a href=&quot;overview-summary.html&quot; target=&quot;classFrame&quot;&gt;Home&lt;/a&gt;&lt;/h2&gt;
+            &lt;h2&gt;Packages&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;testsuite[not(./@package = preceding-sibling::testsuite/@package)]&quot; mode=&quot;all.packages&quot;&gt;
+                    &lt;xsl:sort select=&quot;@package&quot;/&gt;
+                &lt;/xsl:apply-templates&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;all.packages&quot;&gt;
+    &lt;tr&gt;
+        &lt;td nowrap=&quot;nowrap&quot;&gt;
+            &lt;a href=&quot;./{translate(@package,'.','/')}/package-summary.html&quot; target=&quot;classFrame&quot;&gt;
+                &lt;xsl:value-of select=&quot;@package&quot;/&gt;
+                &lt;xsl:if test=&quot;@package = ''&quot;&gt;&lt;none&gt;&lt;/xsl:if&gt;
+            &lt;/a&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template match=&quot;testsuites&quot; mode=&quot;overview.packages&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;Unit Test Results: Summary&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+        &lt;xsl:attribute name=&quot;onload&quot;&gt;open('allclasses-frame.html','classListFrame')&lt;/xsl:attribute&gt;
+        &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+        &lt;h2&gt;Summary&lt;/h2&gt;
+        &lt;xsl:variable name=&quot;testCount&quot; select=&quot;sum(testsuite/@tests)&quot;/&gt;
+        &lt;xsl:variable name=&quot;errorCount&quot; select=&quot;sum(testsuite/@errors)&quot;/&gt;
+        &lt;xsl:variable name=&quot;failureCount&quot; select=&quot;sum(testsuite/@failures)&quot;/&gt;
+        &lt;xsl:variable name=&quot;timeCount&quot; select=&quot;sum(testsuite/@time)&quot;/&gt;
+        &lt;xsl:variable name=&quot;successRate&quot; select=&quot;($testCount - $failureCount - $errorCount) div $testCount&quot;/&gt;
+        &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+        &lt;tr valign=&quot;top&quot;&gt;
+            &lt;th&gt;Tests&lt;/th&gt;
+            &lt;th&gt;Failures&lt;/th&gt;
+            &lt;th&gt;Errors&lt;/th&gt;
+            &lt;th&gt;Success rate&lt;/th&gt;
+            &lt;th&gt;Time&lt;/th&gt;
+        &lt;/tr&gt;
+        &lt;tr valign=&quot;top&quot;&gt;
+            &lt;xsl:attribute name=&quot;class&quot;&gt;
+                &lt;xsl:choose&gt;
+                    &lt;xsl:when test=&quot;$errorCount &gt; 0&quot;&gt;Error&lt;/xsl:when&gt;
+                    &lt;xsl:when test=&quot;$failureCount &gt; 0&quot;&gt;Failure&lt;/xsl:when&gt;
+                    &lt;xsl:otherwise&gt;Pass&lt;/xsl:otherwise&gt;
+                &lt;/xsl:choose&gt;
+            &lt;/xsl:attribute&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;$testCount&quot;/&gt;&lt;/td&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;$failureCount&quot;/&gt;&lt;/td&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;$errorCount&quot;/&gt;&lt;/td&gt;
+            &lt;td&gt;
+                &lt;xsl:call-template name=&quot;display-percent&quot;&gt;
+                    &lt;xsl:with-param name=&quot;value&quot; select=&quot;$successRate&quot;/&gt;
+                &lt;/xsl:call-template&gt;
+            &lt;/td&gt;
+            &lt;td&gt;
+                &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                    &lt;xsl:with-param name=&quot;value&quot; select=&quot;$timeCount&quot;/&gt;
+                &lt;/xsl:call-template&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;/table&gt;
+        &lt;table border=&quot;0&quot; width=&quot;95%&quot;&gt;
+        &lt;tr&gt;
+        &lt;td style=&quot;text-align: justify;&quot;&gt;
+        Note: &lt;em&gt;failures&lt;/em&gt; are anticipated and checked for with assertions while &lt;em&gt;errors&lt;/em&gt; are unanticipated.
+        &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;/table&gt;
+
+        &lt;h2&gt;Packages&lt;/h2&gt;
+        &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+            &lt;xsl:call-template name=&quot;testsuite.test.header&quot;/&gt;
+            &lt;xsl:for-each select=&quot;testsuite[not(./@package = preceding-sibling::testsuite/@package)]&quot;&gt;
+                &lt;xsl:sort select=&quot;@package&quot; order=&quot;ascending&quot;/&gt;
+                &lt;!-- get the node set containing all testsuites that have the same package --&gt;
+                &lt;xsl:variable name=&quot;insamepackage&quot; select=&quot;/testsuites/testsuite[./@package = current()/@package]&quot;/&gt;
+                &lt;tr valign=&quot;top&quot;&gt;
+                    &lt;!-- display a failure if there is any failure/error in the package --&gt;
+                    &lt;xsl:attribute name=&quot;class&quot;&gt;
+                        &lt;xsl:choose&gt;
+                            &lt;xsl:when test=&quot;sum($insamepackage/@errors) &gt; 0&quot;&gt;Error&lt;/xsl:when&gt;
+                            &lt;xsl:when test=&quot;sum($insamepackage/@failures) &gt; 0&quot;&gt;Failure&lt;/xsl:when&gt;
+                            &lt;xsl:otherwise&gt;Pass&lt;/xsl:otherwise&gt;
+                        &lt;/xsl:choose&gt;
+                    &lt;/xsl:attribute&gt;
+                    &lt;td&gt;&lt;a href=&quot;./{translate(@package,'.','/')}/package-summary.html&quot;&gt;
+                        &lt;xsl:value-of select=&quot;@package&quot;/&gt;
+                        &lt;xsl:if test=&quot;@package = ''&quot;&gt;&lt;none&gt;&lt;/xsl:if&gt;
+                    &lt;/a&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;sum($insamepackage/@tests)&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;sum($insamepackage/@errors)&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;sum($insamepackage/@failures)&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;
+                    &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                        &lt;xsl:with-param name=&quot;value&quot; select=&quot;sum($insamepackage/@time)&quot;/&gt;
+                    &lt;/xsl:call-template&gt;
+                    &lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$insamepackage/@timestamp&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$insamepackage/@hostname&quot;/&gt;&lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/xsl:for-each&gt;
+        &lt;/table&gt;
+        &lt;/body&gt;
+        &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;package.summary&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;xsl:attribute name=&quot;onload&quot;&gt;open('package-frame.html','classListFrame')&lt;/xsl:attribute&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;h3&gt;Package &lt;xsl:value-of select=&quot;$name&quot;/&gt;&lt;/h3&gt;
+
+            &lt;!--table border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+                &lt;xsl:call-template name=&quot;class.metrics.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.metrics&quot;/&gt;
+            &lt;/table--&gt;
+
+            &lt;xsl:variable name=&quot;insamepackage&quot; select=&quot;/testsuites/testsuite[./@package = $name]&quot;/&gt;
+            &lt;xsl:if test=&quot;count($insamepackage) &gt; 0&quot;&gt;
+                &lt;h2&gt;Classes&lt;/h2&gt;
+                &lt;p&gt;
+                &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+                    &lt;xsl:call-template name=&quot;testsuite.test.header&quot;/&gt;
+                    &lt;xsl:apply-templates select=&quot;$insamepackage&quot; mode=&quot;print.test&quot;&gt;
+                        &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                    &lt;/xsl:apply-templates&gt;
+                &lt;/table&gt;
+                &lt;/p&gt;
+            &lt;/xsl:if&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    transform string like a.b.c to ../../../
+    @param path the path to transform into a descending directory path
+--&gt;
+&lt;xsl:template name=&quot;path&quot;&gt;
+    &lt;xsl:param name=&quot;path&quot;/&gt;
+    &lt;xsl:if test=&quot;contains($path,'.')&quot;&gt;
+        &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+        &lt;xsl:call-template name=&quot;path&quot;&gt;
+            &lt;xsl:with-param name=&quot;path&quot;&gt;&lt;xsl:value-of select=&quot;substring-after($path,'.')&quot;/&gt;&lt;/xsl:with-param&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:if test=&quot;not(contains($path,'.')) and not($path = '')&quot;&gt;
+        &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+    &lt;/xsl:if&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- create the link to the stylesheet based on the package name --&gt;
+&lt;xsl:template name=&quot;create.stylesheet.link&quot;&gt;
+    &lt;xsl:param name=&quot;package.name&quot;/&gt;
+    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; title=&quot;Style&quot;&gt;&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:if test=&quot;not($package.name = 'unnamed package')&quot;&gt;&lt;xsl:call-template name=&quot;path&quot;&gt;&lt;xsl:with-param name=&quot;path&quot; select=&quot;$package.name&quot;/&gt;&lt;/xsl:call-template&gt;&lt;/xsl:if&gt;stylesheet.css&lt;/xsl:attribute&gt;&lt;/link&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- Page HEADER --&gt;
+&lt;xsl:template name=&quot;pageHeader&quot;&gt;
+    &lt;h1&gt;Unit Test Results&lt;/h1&gt;
+    &lt;table width=&quot;100%&quot;&gt;
+    &lt;tr&gt;
+        &lt;td align=&quot;left&quot;&gt;&lt;/td&gt;
+        &lt;td align=&quot;right&quot;&gt;Designed for use with &lt;a href=&quot;<A HREF="http://www.junit.org/">http://www.junit.org/</A>&quot;&gt;JUnit&lt;/a&gt; and &lt;a href=&quot;<A HREF="http://ant.apache.org/">http://ant.apache.org/</A>&quot;&gt;Ant&lt;/a&gt;.&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;/table&gt;
+    &lt;hr size=&quot;1&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- class header --&gt;
+&lt;xsl:template name=&quot;testsuite.test.header&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+        &lt;th&gt;Tests&lt;/th&gt;
+        &lt;th&gt;Errors&lt;/th&gt;
+        &lt;th&gt;Failures&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time(s)&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time Stamp&lt;/th&gt;
+        &lt;th&gt;Host&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- method header --&gt;
+&lt;xsl:template name=&quot;testcase.test.header&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;th&gt;Name&lt;/th&gt;
+        &lt;th&gt;Status&lt;/th&gt;
+        &lt;th width=&quot;80%&quot;&gt;Type&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time(s)&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- class information --&gt;
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;print.test&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;xsl:attribute name=&quot;class&quot;&gt;
+            &lt;xsl:choose&gt;
+                &lt;xsl:when test=&quot;@errors[.&gt; 0]&quot;&gt;Error&lt;/xsl:when&gt;
+                &lt;xsl:when test=&quot;@failures[.&gt; 0]&quot;&gt;Failure&lt;/xsl:when&gt;
+                &lt;xsl:otherwise&gt;Pass&lt;/xsl:otherwise&gt;
+            &lt;/xsl:choose&gt;
+        &lt;/xsl:attribute&gt;
+        &lt;td&gt;&lt;a href=&quot;{@name}.html&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@tests&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@errors&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@failures&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                &lt;xsl:with-param name=&quot;value&quot; select=&quot;@time&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@timestamp&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@hostname&quot;/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;testcase&quot; mode=&quot;print.test&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;xsl:attribute name=&quot;class&quot;&gt;
+            &lt;xsl:choose&gt;
+                &lt;xsl:when test=&quot;error&quot;&gt;Error&lt;/xsl:when&gt;
+                &lt;xsl:when test=&quot;failure&quot;&gt;Failure&lt;/xsl:when&gt;
+                &lt;xsl:otherwise&gt;TableRowColor&lt;/xsl:otherwise&gt;
+            &lt;/xsl:choose&gt;
+        &lt;/xsl:attribute&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/td&gt;
+        &lt;xsl:choose&gt;
+            &lt;xsl:when test=&quot;failure&quot;&gt;
+                &lt;td&gt;Failure&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:apply-templates select=&quot;failure&quot;/&gt;&lt;/td&gt;
+            &lt;/xsl:when&gt;
+            &lt;xsl:when test=&quot;error&quot;&gt;
+                &lt;td&gt;Error&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:apply-templates select=&quot;error&quot;/&gt;&lt;/td&gt;
+            &lt;/xsl:when&gt;
+            &lt;xsl:otherwise&gt;
+                &lt;td&gt;Success&lt;/td&gt;
+                &lt;td&gt;&lt;/td&gt;
+            &lt;/xsl:otherwise&gt;
+        &lt;/xsl:choose&gt;
+        &lt;td&gt;
+            &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                &lt;xsl:with-param name=&quot;value&quot; select=&quot;@time&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- Note : the below template error and failure are the same style
+            so just call the same style store in the toolkit template --&gt;
+&lt;xsl:template match=&quot;failure&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-failures&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;error&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-failures&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- Style for the error and failure in the testcase template --&gt;
+&lt;xsl:template name=&quot;display-failures&quot;&gt;
+    &lt;xsl:choose&gt;
+        &lt;xsl:when test=&quot;not(@message)&quot;&gt;N/A&lt;/xsl:when&gt;
+        &lt;xsl:otherwise&gt;
+            &lt;xsl:value-of select=&quot;@message&quot;/&gt;
+        &lt;/xsl:otherwise&gt;
+    &lt;/xsl:choose&gt;
+    &lt;!-- display the stacktrace --&gt;
+    &lt;br/&gt;&lt;br/&gt;
+    &lt;code&gt;
+        &lt;xsl:call-template name=&quot;br-replace&quot;&gt;
+            &lt;xsl:with-param name=&quot;word&quot; select=&quot;.&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/code&gt;
+    &lt;!-- the latter is better but might be problematic for non-21&quot; monitors... --&gt;
+    &lt;!--pre&gt;&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/pre--&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;JS-escape&quot;&gt;
+    &lt;xsl:param name=&quot;string&quot;/&gt;
+    &lt;xsl:param name=&quot;tmp1&quot; select=&quot;stringutils:replace(string($string),'\','\\')&quot;/&gt;
+    &lt;xsl:param name=&quot;tmp2&quot; select=&quot;stringutils:replace(string($tmp1),&quot;'&quot;,&quot;\&apos;&quot;)&quot;/&gt;
+    &lt;xsl:value-of select=&quot;$tmp2&quot;/&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    template that will convert a carriage return into a br tag
+    @param word the text from which to convert CR to BR tag
+--&gt;
+&lt;xsl:template name=&quot;br-replace&quot;&gt;
+    &lt;xsl:param name=&quot;word&quot;/&gt;
+    &lt;xsl:param name=&quot;br&quot;&gt;&lt;br/&gt;&lt;/xsl:param&gt;
+    &lt;xsl:value-of select='stringutils:replace(string($word),&quot;&amp;#xA;&quot;,$br)'/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;display-time&quot;&gt;
+    &lt;xsl:param name=&quot;value&quot;/&gt;
+    &lt;xsl:value-of select=&quot;format-number($value,'0.000')&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;display-percent&quot;&gt;
+    &lt;xsl:param name=&quot;value&quot;/&gt;
+    &lt;xsl:value-of select=&quot;format-number($value,'0.00%')&quot;/&gt;
+&lt;/xsl:template&gt;
+&lt;/xsl:stylesheet&gt;

Added: branches/eschnepel/ant/etc/junit-frames.xsl
===================================================================
--- branches/eschnepel/ant/etc/junit-frames.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/junit-frames.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,875 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+    xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+    xmlns:redirect=&quot;<A HREF="http://xml.apache.org/xalan/redirect">http://xml.apache.org/xalan/redirect</A>&quot;
+    xmlns:stringutils=&quot;<A HREF="xalan://org.apache.tools.ant.util.StringUtils">xalan://org.apache.tools.ant.util.StringUtils</A>&quot;
+    extension-element-prefixes=&quot;redirect&quot;&gt;
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;/&gt;
+&lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot;/&gt;
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+ --&gt;
+
+&lt;!--
+
+ Sample stylesheet to be used with Ant JUnitReport output.
+
+ It creates a set of HTML files a la javadoc where you can browse easily
+ through all packages and classes.
+
+--&gt;
+&lt;xsl:param name=&quot;output.dir&quot; select=&quot;'.'&quot;/&gt;
+
+
+&lt;xsl:template match=&quot;testsuites&quot;&gt;
+    &lt;!-- create the index.html --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/index.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;index.html&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the stylesheet.css --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/stylesheet.css&quot;&gt;
+        &lt;xsl:call-template name=&quot;stylesheet.css&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the overview-packages.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/overview-summary.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;overview.packages&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-packages.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/overview-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.packages&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-classes.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/allclasses-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.classes&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-tests.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/all-tests.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.tests&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the alltests-fails.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/alltests-fails.html&quot;&gt;
+      &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.tests&quot;&gt;
+        &lt;xsl:with-param name=&quot;type&quot; select=&quot;'fails'&quot;/&gt;
+      &lt;/xsl:apply-templates&gt;
+    &lt;/redirect:write&gt;
+
+  &lt;!-- create the alltests-errors.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/alltests-errors.html&quot;&gt;
+      &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.tests&quot;&gt;
+        &lt;xsl:with-param name=&quot;type&quot; select=&quot;'errors'&quot;/&gt;
+      &lt;/xsl:apply-templates&gt;
+    &lt;/redirect:write&gt;
+
+  &lt;!-- process all packages --&gt;
+    &lt;xsl:for-each select=&quot;./testsuite[not(./@package = preceding-sibling::testsuite/@package)]&quot;&gt;
+        &lt;xsl:call-template name=&quot;package&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;@package&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;package&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;xsl:variable name=&quot;package.dir&quot;&gt;
+        &lt;xsl:if test=&quot;not($name = '')&quot;&gt;&lt;xsl:value-of select=&quot;translate($name,'.','/')&quot;/&gt;&lt;/xsl:if&gt;
+        &lt;xsl:if test=&quot;$name = ''&quot;&gt;.&lt;/xsl:if&gt;
+    &lt;/xsl:variable&gt;
+    &lt;!--Processing package &lt;xsl:value-of select=&quot;@name&quot;/&gt; in &lt;xsl:value-of select=&quot;$output.dir&quot;/&gt; --&gt;
+    &lt;!-- create a classes-list.html in the package directory --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-frame.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;classes.list&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;$name&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create a package-summary.html in the package directory --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-summary.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;package.summary&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;$name&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- for each class, creates a @name.html --&gt;
+    &lt;!-- @bug there will be a problem with inner classes having the same name, it will be overwritten --&gt;
+  &lt;xsl:for-each select=&quot;/testsuites/testsuite[@package = $name]&quot;&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@id}_{@name}.html&quot;&gt;
+      &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;class.details&quot;/&gt;
+    &lt;/redirect:write&gt;
+    &lt;xsl:if test=&quot;string-length(./system-out)!=0&quot;&gt;
+      &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@id}_{@name}-out.txt&quot;&gt;
+        &lt;xsl:value-of disable-output-escaping=&quot;yes&quot; select=&quot;./system-out&quot;/&gt;
+      &lt;/redirect:write&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:if test=&quot;string-length(./system-err)!=0&quot;&gt;
+      &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@id}_{@name}-err.txt&quot;&gt;
+        &lt;xsl:value-of disable-output-escaping=&quot;yes&quot; select=&quot;./system-err&quot;/&gt;
+      &lt;/redirect:write&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:if test=&quot;@failures != 0&quot;&gt;
+      &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@id}_{@name}-fails.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;class.details&quot;&gt;
+          &lt;xsl:with-param name=&quot;type&quot; select=&quot;'fails'&quot;/&gt;
+        &lt;/xsl:apply-templates&gt;
+      &lt;/redirect:write&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:if test=&quot;@errors != 0&quot;&gt;
+      &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@id}_{@name}-errors.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;class.details&quot;&gt;
+          &lt;xsl:with-param name=&quot;type&quot; select=&quot;'errors'&quot;/&gt;
+        &lt;/xsl:apply-templates&gt;
+      &lt;/redirect:write&gt;
+    &lt;/xsl:if&gt;
+  &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;index.html&quot;&gt;
+&lt;html&gt;
+    &lt;head&gt;
+        &lt;title&gt;Unit Test Results.&lt;/title&gt;
+    &lt;/head&gt;
+    &lt;frameset cols=&quot;20%,80%&quot;&gt;
+        &lt;frameset rows=&quot;30%,70%&quot;&gt;
+            &lt;frame src=&quot;overview-frame.html&quot; name=&quot;packageListFrame&quot;/&gt;
+            &lt;frame src=&quot;allclasses-frame.html&quot; name=&quot;classListFrame&quot;/&gt;
+        &lt;/frameset&gt;
+        &lt;frame src=&quot;overview-summary.html&quot; name=&quot;classFrame&quot;/&gt;
+        &lt;noframes&gt;
+            &lt;h2&gt;Frame Alert&lt;/h2&gt;
+            &lt;p&gt;
+                This document is designed to be viewed using the frames feature. If you see this message, you are using a non-frame-capable web client.
+            &lt;/p&gt;
+        &lt;/noframes&gt;
+    &lt;/frameset&gt;
+&lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- this is the stylesheet css to use for nearly everything --&gt;
+&lt;xsl:template name=&quot;stylesheet.css&quot;&gt;
+body {
+    font:normal 68% verdana,arial,helvetica;
+    color:#000000;
+}
+table tr td, table tr th {
+    font-size: 68%;
+}
+table.details tr th{
+    font-weight: bold;
+    text-align:left;
+    background:#a6caf0;
+}
+table.details tr td{
+    background:#eeeee0;
+}
+
+p {
+    line-height:1.5em;
+    margin-top:0.5em; margin-bottom:1.0em;
+}
+h1 {
+    margin: 0px 0px 5px; font: 165% verdana,arial,helvetica
+}
+h2 {
+    margin-top: 1em; margin-bottom: 0.5em; font: bold 125% verdana,arial,helvetica
+}
+h3 {
+    margin-bottom: 0.5em; font: bold 115% verdana,arial,helvetica
+}
+h4 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+}
+h5 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+}
+h6 {
+    margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+}
+.Error {
+    font-weight:bold; color:red;
+}
+.Failure {
+    font-weight:bold; color:purple;
+}
+.Properties {
+  text-align:right;
+}
+&lt;/xsl:template&gt;
+
+&lt;!-- Create list of all/failed/errored tests --&gt;
+&lt;xsl:template match=&quot;testsuites&quot; mode=&quot;all.tests&quot;&gt;
+    &lt;xsl:param name=&quot;type&quot; select=&quot;'all'&quot;/&gt;
+    &lt;html&gt;
+	&lt;xsl:variable name=&quot;title&quot;&gt;
+	    &lt;xsl:choose&gt;
+		&lt;xsl:when test=&quot;$type = 'fails'&quot;&gt;
+		    &lt;xsl:text&gt;All Failures&lt;/xsl:text&gt;
+		&lt;/xsl:when&gt;
+		&lt;xsl:when test=&quot;$type = 'errors'&quot;&gt;
+		    &lt;xsl:text&gt;All Errors&lt;/xsl:text&gt;
+		&lt;/xsl:when&gt;
+		&lt;xsl:otherwise&gt;
+		    &lt;xsl:text&gt;All Tests&lt;/xsl:text&gt;
+		&lt;/xsl:otherwise&gt;
+	    &lt;/xsl:choose&gt;
+	&lt;/xsl:variable&gt;
+	&lt;head&gt;
+	    &lt;title&gt;Unit Test Results: &lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/title&gt;
+	    &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+	&lt;/head&gt;
+	&lt;body&gt;
+	    &lt;xsl:attribute name=&quot;onload&quot;&gt;open('allclasses-frame.html','classListFrame')&lt;/xsl:attribute&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;h2&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/h2&gt;
+
+            &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+		&lt;xsl:call-template name=&quot;testcase.test.header&quot;&gt;
+		    &lt;xsl:with-param name=&quot;show.class&quot; select=&quot;'yes'&quot;/&gt;
+		&lt;/xsl:call-template&gt;
+		&lt;!--
+                test can even not be started at all (failure to load the class)
+		so report the error directly
+		--&gt;
+              &lt;xsl:if test=&quot;./error&quot;&gt;
+                &lt;tr class=&quot;Error&quot;&gt;
+                  &lt;td colspan=&quot;4&quot;&gt;
+                    &lt;xsl:apply-templates select=&quot;./error&quot;/&gt;
+                  &lt;/td&gt;
+                &lt;/tr&gt;
+              &lt;/xsl:if&gt;
+              &lt;xsl:choose&gt;
+                &lt;xsl:when test=&quot;$type = 'fails'&quot;&gt;
+                  &lt;xsl:apply-templates select=&quot;.//testcase[failure]&quot; mode=&quot;print.test&quot;&gt;
+                    &lt;xsl:with-param name=&quot;show.class&quot; select=&quot;'yes'&quot;/&gt;
+                  &lt;/xsl:apply-templates&gt;
+                &lt;/xsl:when&gt;
+                &lt;xsl:when test=&quot;$type = 'errors'&quot;&gt;
+                  &lt;xsl:apply-templates select=&quot;.//testcase[error]&quot; mode=&quot;print.test&quot;&gt;
+                    &lt;xsl:with-param name=&quot;show.class&quot; select=&quot;'yes'&quot;/&gt;
+                  &lt;/xsl:apply-templates&gt;
+                &lt;/xsl:when&gt;
+                &lt;xsl:otherwise&gt;
+                  &lt;xsl:apply-templates select=&quot;.//testcase&quot; mode=&quot;print.test&quot;&gt;
+                    &lt;xsl:with-param name=&quot;show.class&quot; select=&quot;'yes'&quot;/&gt;
+                  &lt;/xsl:apply-templates&gt;
+                &lt;/xsl:otherwise&gt;
+              &lt;/xsl:choose&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- ======================================================================
+    This page is created for every testsuite class.
+    It prints a summary of the testsuite and detailed information about
+    testcase methods.
+     ====================================================================== --&gt;
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;class.details&quot;&gt;
+    &lt;xsl:param name=&quot;type&quot; select=&quot;'all'&quot;/&gt;
+    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@package&quot;/&gt;
+    &lt;xsl:variable name=&quot;class.name&quot;&gt;&lt;xsl:if test=&quot;not($package.name = '')&quot;&gt;&lt;xsl:value-of select=&quot;$package.name&quot;/&gt;.&lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/xsl:variable&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+          &lt;title&gt;Unit Test Results: &lt;xsl:value-of select=&quot;$class.name&quot;/&gt;&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+       &lt;script type=&quot;text/javascript&quot; language=&quot;JavaScript&quot;&gt;
+        var TestCases = new Array();
+        var cur;
+        &lt;xsl:apply-templates select=&quot;properties&quot;/&gt;
+       &lt;/script&gt;
+       &lt;script type=&quot;text/javascript&quot; language=&quot;JavaScript&quot;&gt;&lt;![CDATA[
+        function displayProperties (name) {
+          var win = window.open('','JUnitSystemProperties','scrollbars=1,resizable=1');
+          var doc = win.document;
+          doc.open();
+          doc.write(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Properties of &quot; + name + &quot;&lt;/title&gt;&quot;);
+          doc.write(&quot;&lt;style type=\&quot;text/css\&quot;&gt;&quot;);
+          doc.write(&quot;body {font:normal 68% verdana,arial,helvetica; color:#000000; }&quot;);
+          doc.write(&quot;table tr td, table tr th { font-size: 68%; }&quot;);
+          doc.write(&quot;table.properties { border-collapse:collapse; border-left:solid 1 #cccccc; border-top:solid 1 #cccccc; padding:5px; }&quot;);
+          doc.write(&quot;table.properties th { text-align:left; border-right:solid 1 #cccccc; border-bottom:solid 1 #cccccc; background-color:#eeeeee; }&quot;);
+          doc.write(&quot;table.properties td { font:normal; text-align:left; border-right:solid 1 #cccccc; border-bottom:solid 1 #cccccc; background-color:#fffffff; }&quot;);
+          doc.write(&quot;h3 { margin-bottom: 0.5em; font: bold 115% verdana,arial,helvetica }&quot;);
+          doc.write(&quot;&lt;/style&gt;&quot;);
+          doc.write(&quot;&lt;/head&gt;&lt;body&gt;&quot;);
+          doc.write(&quot;&lt;h3&gt;Properties of &quot; + name + &quot;&lt;/h3&gt;&quot;);
+          doc.write(&quot;&lt;div align=\&quot;right\&quot;&gt;&lt;a href=\&quot;javascript:window.close();\&quot;&gt;Close&lt;/a&gt;&lt;/div&gt;&quot;);
+          doc.write(&quot;&lt;table class='properties'&gt;&quot;);
+          doc.write(&quot;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Value&lt;/th&gt;&lt;/tr&gt;&quot;);
+          for (prop in TestCases[name]) {
+            doc.write(&quot;&lt;tr&gt;&lt;th&gt;&quot; + prop + &quot;&lt;/th&gt;&lt;td&gt;&quot; + TestCases[name][prop] + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;);
+          }
+          doc.write(&quot;&lt;/table&gt;&quot;);
+          doc.write(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);
+          doc.close();
+          win.focus();
+        }
+      ]]&gt;
+      &lt;/script&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;h3&gt;Class &lt;xsl:value-of select=&quot;$class.name&quot;/&gt;&lt;/h3&gt;
+
+
+            &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+                &lt;xsl:call-template name=&quot;testsuite.test.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.test&quot;/&gt;
+            &lt;/table&gt;
+
+	    &lt;xsl:choose&gt;
+		&lt;xsl:when test=&quot;$type = 'fails'&quot;&gt;
+		    &lt;h2&gt;Failures&lt;/h2&gt;
+		&lt;/xsl:when&gt;
+		&lt;xsl:when test=&quot;$type = 'errors'&quot;&gt;
+		    &lt;h2&gt;Errors&lt;/h2&gt;
+		&lt;/xsl:when&gt;
+		&lt;xsl:otherwise&gt;
+		    &lt;h2&gt;Tests&lt;/h2&gt;
+		&lt;/xsl:otherwise&gt;
+	    &lt;/xsl:choose&gt;
+            &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+		&lt;xsl:call-template name=&quot;testcase.test.header&quot;/&gt;
+		&lt;!--
+                test can even not be started at all (failure to load the class)
+		so report the error directly
+		--&gt;
+                &lt;xsl:if test=&quot;./error&quot;&gt;
+                    &lt;tr class=&quot;Error&quot;&gt;
+                        &lt;td colspan=&quot;4&quot;&gt;&lt;xsl:apply-templates select=&quot;./error&quot;/&gt;&lt;/td&gt;
+                    &lt;/tr&gt;
+                &lt;/xsl:if&gt;
+		&lt;xsl:choose&gt;
+		    &lt;xsl:when test=&quot;$type = 'fails'&quot;&gt;
+			&lt;xsl:apply-templates select=&quot;./testcase[failure]&quot; mode=&quot;print.test&quot;/&gt;
+		    &lt;/xsl:when&gt;
+		    &lt;xsl:when test=&quot;$type = 'errors'&quot;&gt;
+			&lt;xsl:apply-templates select=&quot;./testcase[error]&quot; mode=&quot;print.test&quot;/&gt;
+		    &lt;/xsl:when&gt;
+		    &lt;xsl:otherwise&gt;
+			&lt;xsl:apply-templates select=&quot;./testcase&quot; mode=&quot;print.test&quot;/&gt;
+		    &lt;/xsl:otherwise&gt;
+		&lt;/xsl:choose&gt;
+            &lt;/table&gt;
+            &lt;div class=&quot;Properties&quot;&gt;
+                &lt;a&gt;
+                    &lt;xsl:attribute name=&quot;href&quot;&gt;javascript:displayProperties('&lt;xsl:value-of select=&quot;@package&quot;/&gt;.&lt;xsl:value-of select=&quot;@name&quot;/&gt;');&lt;/xsl:attribute&gt;
+                    Properties &#187;
+                &lt;/a&gt;
+            &lt;/div&gt;
+            &lt;xsl:if test=&quot;string-length(./system-out)!=0&quot;&gt;
+                &lt;div class=&quot;Properties&quot;&gt;
+                    &lt;a&gt;
+                        &lt;xsl:attribute name=&quot;href&quot;&gt;./&lt;xsl:value-of select=&quot;@id&quot;/&gt;_&lt;xsl:value-of select=&quot;@name&quot;/&gt;-out.txt&lt;/xsl:attribute&gt;
+                        System.out &#187;
+                    &lt;/a&gt;
+                &lt;/div&gt;
+            &lt;/xsl:if&gt;
+            &lt;xsl:if test=&quot;string-length(./system-err)!=0&quot;&gt;
+                &lt;div class=&quot;Properties&quot;&gt;
+                    &lt;a&gt;
+                        &lt;xsl:attribute name=&quot;href&quot;&gt;./&lt;xsl:value-of select=&quot;@id&quot;/&gt;_&lt;xsl:value-of select=&quot;@name&quot;/&gt;-err.txt&lt;/xsl:attribute&gt;
+                        System.err &#187;
+                    &lt;/a&gt;
+                &lt;/div&gt;
+            &lt;/xsl:if&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+  &lt;!--
+   Write properties into a JavaScript data structure.
+   This is based on the original idea by Erik Hatcher (<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">ehatcher at apache.org</A>)
+   --&gt;
+  &lt;xsl:template match=&quot;properties&quot;&gt;
+    cur = TestCases['&lt;xsl:value-of select=&quot;../@package&quot;/&gt;.&lt;xsl:value-of select=&quot;../@name&quot;/&gt;'] = new Array();
+    &lt;xsl:for-each select=&quot;property&quot;&gt;
+    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+        cur['&lt;xsl:value-of select=&quot;@name&quot;/&gt;'] = '&lt;xsl:call-template name=&quot;JS-escape&quot;&gt;&lt;xsl:with-param name=&quot;string&quot; select=&quot;@value&quot;/&gt;&lt;/xsl:call-template&gt;';
+    &lt;/xsl:for-each&gt;
+  &lt;/xsl:template&gt;
+
+
+&lt;!-- ======================================================================
+    This page is created for every package.
+    It prints the name of all classes that belongs to this package.
+    @param name the package name to print classes.
+     ====================================================================== --&gt;
+&lt;!-- list of classes in a package --&gt;
+&lt;xsl:template name=&quot;classes.list&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;Unit Test Classes: &lt;xsl:value-of select=&quot;$name&quot;/&gt;&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;tr&gt;
+                    &lt;td nowrap=&quot;nowrap&quot;&gt;
+                        &lt;h2&gt;&lt;a href=&quot;package-summary.html&quot; target=&quot;classFrame&quot;&gt;
+                            &lt;xsl:value-of select=&quot;$name&quot;/&gt;
+                            &lt;xsl:if test=&quot;$name = ''&quot;&gt;&lt;none&gt;&lt;/xsl:if&gt;
+                        &lt;/a&gt;&lt;/h2&gt;
+                    &lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/table&gt;
+
+            &lt;h2&gt;Classes&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:for-each select=&quot;/testsuites/testsuite[./@package = $name]&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                    &lt;tr&gt;
+                        &lt;td nowrap=&quot;nowrap&quot;&gt;
+                            &lt;a href=&quot;{@id}_{@name}.html&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;
+                        &lt;/td&gt;
+                    &lt;/tr&gt;
+                &lt;/xsl:for-each&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    Creates an all-classes.html file that contains a link to all package-summary.html
+    on each class.
+--&gt;
+&lt;xsl:template match=&quot;testsuites&quot; mode=&quot;all.classes&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;All Unit Test Classes&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;h2&gt;Classes&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;testsuite&quot; mode=&quot;all.classes&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                &lt;/xsl:apply-templates&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;all.classes&quot;&gt;
+    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@package&quot;/&gt;
+    &lt;tr&gt;
+        &lt;td nowrap=&quot;nowrap&quot;&gt;
+            &lt;a target=&quot;classFrame&quot;&gt;
+                &lt;xsl:attribute name=&quot;href&quot;&gt;
+                    &lt;xsl:if test=&quot;not($package.name='')&quot;&gt;
+                        &lt;xsl:value-of select=&quot;translate($package.name,'.','/')&quot;/&gt;&lt;xsl:text&gt;/&lt;/xsl:text&gt;
+                    &lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@id&quot;/&gt;_&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;xsl:text&gt;.html&lt;/xsl:text&gt;
+                &lt;/xsl:attribute&gt;
+                &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+            &lt;/a&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    Creates an html file that contains a link to all package-summary.html files on
+    each package existing on testsuites.
+    @bug there will be a problem here, I don't know yet how to handle unnamed package :(
+--&gt;
+&lt;xsl:template match=&quot;testsuites&quot; mode=&quot;all.packages&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;All Unit Test Packages&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;h2&gt;&lt;a href=&quot;overview-summary.html&quot; target=&quot;classFrame&quot;&gt;Home&lt;/a&gt;&lt;/h2&gt;
+            &lt;h2&gt;Packages&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;testsuite[not(./@package = preceding-sibling::testsuite/@package)]&quot; mode=&quot;all.packages&quot;&gt;
+                    &lt;xsl:sort select=&quot;@package&quot;/&gt;
+                &lt;/xsl:apply-templates&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;all.packages&quot;&gt;
+    &lt;tr&gt;
+        &lt;td nowrap=&quot;nowrap&quot;&gt;
+            &lt;a href=&quot;./{translate(@package,'.','/')}/package-summary.html&quot; target=&quot;classFrame&quot;&gt;
+                &lt;xsl:value-of select=&quot;@package&quot;/&gt;
+                &lt;xsl:if test=&quot;@package = ''&quot;&gt;&lt;none&gt;&lt;/xsl:if&gt;
+            &lt;/a&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template match=&quot;testsuites&quot; mode=&quot;overview.packages&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;Unit Test Results: Summary&lt;/title&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+        &lt;xsl:attribute name=&quot;onload&quot;&gt;open('allclasses-frame.html','classListFrame')&lt;/xsl:attribute&gt;
+        &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+        &lt;h2&gt;Summary&lt;/h2&gt;
+        &lt;xsl:variable name=&quot;testCount&quot; select=&quot;sum(testsuite/@tests)&quot;/&gt;
+        &lt;xsl:variable name=&quot;errorCount&quot; select=&quot;sum(testsuite/@errors)&quot;/&gt;
+        &lt;xsl:variable name=&quot;failureCount&quot; select=&quot;sum(testsuite/@failures)&quot;/&gt;
+        &lt;xsl:variable name=&quot;timeCount&quot; select=&quot;sum(testsuite/@time)&quot;/&gt;
+        &lt;xsl:variable name=&quot;successRate&quot; select=&quot;($testCount - $failureCount - $errorCount) div $testCount&quot;/&gt;
+        &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+        &lt;tr valign=&quot;top&quot;&gt;
+            &lt;th&gt;Tests&lt;/th&gt;
+            &lt;th&gt;Failures&lt;/th&gt;
+            &lt;th&gt;Errors&lt;/th&gt;
+            &lt;th&gt;Success rate&lt;/th&gt;
+            &lt;th&gt;Time&lt;/th&gt;
+        &lt;/tr&gt;
+        &lt;tr valign=&quot;top&quot;&gt;
+            &lt;xsl:attribute name=&quot;class&quot;&gt;
+                &lt;xsl:choose&gt;
+                    &lt;xsl:when test=&quot;$errorCount &gt; 0&quot;&gt;Error&lt;/xsl:when&gt;
+                    &lt;xsl:when test=&quot;$failureCount &gt; 0&quot;&gt;Failure&lt;/xsl:when&gt;
+                    &lt;xsl:otherwise&gt;Pass&lt;/xsl:otherwise&gt;
+                &lt;/xsl:choose&gt;
+            &lt;/xsl:attribute&gt;
+            &lt;td&gt;&lt;a title=&quot;Display all tests&quot; href=&quot;all-tests.html&quot;&gt;&lt;xsl:value-of select=&quot;$testCount&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+            &lt;td&gt;&lt;a title=&quot;Display all failures&quot; href=&quot;alltests-fails.html&quot;&gt;&lt;xsl:value-of select=&quot;$failureCount&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+            &lt;td&gt;&lt;a title=&quot;Display all errors&quot; href=&quot;alltests-errors.html&quot;&gt;&lt;xsl:value-of select=&quot;$errorCount&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+            &lt;td&gt;
+                &lt;xsl:call-template name=&quot;display-percent&quot;&gt;
+                    &lt;xsl:with-param name=&quot;value&quot; select=&quot;$successRate&quot;/&gt;
+                &lt;/xsl:call-template&gt;
+            &lt;/td&gt;
+            &lt;td&gt;
+                &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                    &lt;xsl:with-param name=&quot;value&quot; select=&quot;$timeCount&quot;/&gt;
+                &lt;/xsl:call-template&gt;
+            &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;/table&gt;
+        &lt;table border=&quot;0&quot; width=&quot;95%&quot;&gt;
+        &lt;tr&gt;
+        &lt;td style=&quot;text-align: justify;&quot;&gt;
+        Note: &lt;em&gt;failures&lt;/em&gt; are anticipated and checked for with assertions while &lt;em&gt;errors&lt;/em&gt; are unanticipated.
+        &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;/table&gt;
+
+        &lt;h2&gt;Packages&lt;/h2&gt;
+        &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+            &lt;xsl:call-template name=&quot;testsuite.test.header&quot;/&gt;
+            &lt;xsl:for-each select=&quot;testsuite[not(./@package = preceding-sibling::testsuite/@package)]&quot;&gt;
+                &lt;xsl:sort select=&quot;@package&quot; order=&quot;ascending&quot;/&gt;
+                &lt;!-- get the node set containing all testsuites that have the same package --&gt;
+                &lt;xsl:variable name=&quot;insamepackage&quot; select=&quot;/testsuites/testsuite[./@package = current()/@package]&quot;/&gt;
+                &lt;tr valign=&quot;top&quot;&gt;
+                    &lt;!-- display a failure if there is any failure/error in the package --&gt;
+                    &lt;xsl:attribute name=&quot;class&quot;&gt;
+                        &lt;xsl:choose&gt;
+                            &lt;xsl:when test=&quot;sum($insamepackage/@errors) &gt; 0&quot;&gt;Error&lt;/xsl:when&gt;
+                            &lt;xsl:when test=&quot;sum($insamepackage/@failures) &gt; 0&quot;&gt;Failure&lt;/xsl:when&gt;
+                            &lt;xsl:otherwise&gt;Pass&lt;/xsl:otherwise&gt;
+                        &lt;/xsl:choose&gt;
+                    &lt;/xsl:attribute&gt;
+                    &lt;td&gt;&lt;a href=&quot;./{translate(@package,'.','/')}/package-summary.html&quot;&gt;
+                        &lt;xsl:value-of select=&quot;@package&quot;/&gt;
+                        &lt;xsl:if test=&quot;@package = ''&quot;&gt;&lt;none&gt;&lt;/xsl:if&gt;
+                    &lt;/a&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;sum($insamepackage/@tests)&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;sum($insamepackage/@errors)&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;sum($insamepackage/@failures)&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;
+                    &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                        &lt;xsl:with-param name=&quot;value&quot; select=&quot;sum($insamepackage/@time)&quot;/&gt;
+                    &lt;/xsl:call-template&gt;
+                    &lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$insamepackage/@timestamp&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$insamepackage/@hostname&quot;/&gt;&lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/xsl:for-each&gt;
+        &lt;/table&gt;
+        &lt;/body&gt;
+        &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;package.summary&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;xsl:attribute name=&quot;onload&quot;&gt;open('package-frame.html','classListFrame')&lt;/xsl:attribute&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;h3&gt;Package &lt;xsl:value-of select=&quot;$name&quot;/&gt;&lt;/h3&gt;
+
+            &lt;!--table border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+                &lt;xsl:call-template name=&quot;class.metrics.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.metrics&quot;/&gt;
+            &lt;/table--&gt;
+
+            &lt;xsl:variable name=&quot;insamepackage&quot; select=&quot;/testsuites/testsuite[./@package = $name]&quot;/&gt;
+            &lt;xsl:if test=&quot;count($insamepackage) &gt; 0&quot;&gt;
+                &lt;h2&gt;Classes&lt;/h2&gt;
+                &lt;p&gt;
+                &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+                    &lt;xsl:call-template name=&quot;testsuite.test.header&quot;/&gt;
+                    &lt;xsl:apply-templates select=&quot;$insamepackage&quot; mode=&quot;print.test&quot;&gt;
+                        &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                    &lt;/xsl:apply-templates&gt;
+                &lt;/table&gt;
+                &lt;/p&gt;
+            &lt;/xsl:if&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    transform string like a.b.c to ../../../
+    @param path the path to transform into a descending directory path
+--&gt;
+&lt;xsl:template name=&quot;path&quot;&gt;
+    &lt;xsl:param name=&quot;path&quot;/&gt;
+    &lt;xsl:if test=&quot;contains($path,'.')&quot;&gt;
+        &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+        &lt;xsl:call-template name=&quot;path&quot;&gt;
+            &lt;xsl:with-param name=&quot;path&quot;&gt;&lt;xsl:value-of select=&quot;substring-after($path,'.')&quot;/&gt;&lt;/xsl:with-param&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:if test=&quot;not(contains($path,'.')) and not($path = '')&quot;&gt;
+        &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+    &lt;/xsl:if&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- create the link to the stylesheet based on the package name --&gt;
+&lt;xsl:template name=&quot;create.stylesheet.link&quot;&gt;
+    &lt;xsl:param name=&quot;package.name&quot;/&gt;
+    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; title=&quot;Style&quot;&gt;&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:if test=&quot;not($package.name = 'unnamed package')&quot;&gt;&lt;xsl:call-template name=&quot;path&quot;&gt;&lt;xsl:with-param name=&quot;path&quot; select=&quot;$package.name&quot;/&gt;&lt;/xsl:call-template&gt;&lt;/xsl:if&gt;stylesheet.css&lt;/xsl:attribute&gt;&lt;/link&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- Page HEADER --&gt;
+&lt;xsl:template name=&quot;pageHeader&quot;&gt;
+    &lt;h1&gt;Unit Test Results&lt;/h1&gt;
+    &lt;table width=&quot;100%&quot;&gt;
+    &lt;tr&gt;
+        &lt;td align=&quot;left&quot;&gt;&lt;/td&gt;
+        &lt;td align=&quot;right&quot;&gt;Designed for use with &lt;a href=&quot;<A HREF="http://www.junit.org/">http://www.junit.org/</A>&quot;&gt;JUnit&lt;/a&gt; and &lt;a href=&quot;<A HREF="http://ant.apache.org/">http://ant.apache.org/</A>&quot;&gt;Ant&lt;/a&gt;.&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;/table&gt;
+    &lt;hr size=&quot;1&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- class header --&gt;
+&lt;xsl:template name=&quot;testsuite.test.header&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+        &lt;th&gt;Tests&lt;/th&gt;
+        &lt;th&gt;Errors&lt;/th&gt;
+        &lt;th&gt;Failures&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time(s)&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time Stamp&lt;/th&gt;
+        &lt;th&gt;Host&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- method header --&gt;
+&lt;xsl:template name=&quot;testcase.test.header&quot;&gt;
+    &lt;xsl:param name=&quot;show.class&quot; select=&quot;''&quot;/&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+	&lt;xsl:if test=&quot;boolean($show.class)&quot;&gt;
+	    &lt;th&gt;Class&lt;/th&gt;
+	&lt;/xsl:if&gt;
+        &lt;th&gt;Name&lt;/th&gt;
+        &lt;th&gt;Status&lt;/th&gt;
+        &lt;th width=&quot;80%&quot;&gt;Type&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time(s)&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- class information --&gt;
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;print.test&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;xsl:attribute name=&quot;class&quot;&gt;
+            &lt;xsl:choose&gt;
+                &lt;xsl:when test=&quot;@errors[.&gt; 0]&quot;&gt;Error&lt;/xsl:when&gt;
+                &lt;xsl:when test=&quot;@failures[.&gt; 0]&quot;&gt;Failure&lt;/xsl:when&gt;
+                &lt;xsl:otherwise&gt;Pass&lt;/xsl:otherwise&gt;
+            &lt;/xsl:choose&gt;
+        &lt;/xsl:attribute&gt;
+        &lt;td&gt;&lt;a title=&quot;Display all tests&quot; href=&quot;{@id}_{@name}.html&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;a title=&quot;Display all tests&quot; href=&quot;{@id}_{@name}.html&quot;&gt;&lt;xsl:apply-templates select=&quot;@tests&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+        &lt;td&gt;
+	    &lt;xsl:choose&gt;
+		&lt;xsl:when test=&quot;@errors != 0&quot;&gt;
+		    &lt;a title=&quot;Display only errors&quot; href=&quot;{@id}_{@name}-errors.html&quot;&gt;&lt;xsl:apply-templates select=&quot;@errors&quot;/&gt;&lt;/a&gt;
+		&lt;/xsl:when&gt;
+		&lt;xsl:otherwise&gt;
+		    &lt;xsl:apply-templates select=&quot;@errors&quot;/&gt;
+		&lt;/xsl:otherwise&gt;
+	    &lt;/xsl:choose&gt;
+	&lt;/td&gt;
+        &lt;td&gt;
+	    &lt;xsl:choose&gt;
+		&lt;xsl:when test=&quot;@failures != 0&quot;&gt;
+		    &lt;a title=&quot;Display only failures&quot; href=&quot;{@id}_{@name}-fails.html&quot;&gt;&lt;xsl:apply-templates select=&quot;@failures&quot;/&gt;&lt;/a&gt;
+		&lt;/xsl:when&gt;
+		&lt;xsl:otherwise&gt;
+		    &lt;xsl:apply-templates select=&quot;@failures&quot;/&gt;
+		&lt;/xsl:otherwise&gt;
+	    &lt;/xsl:choose&gt;
+	&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                &lt;xsl:with-param name=&quot;value&quot; select=&quot;@time&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@timestamp&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@hostname&quot;/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;testcase&quot; mode=&quot;print.test&quot;&gt;
+    &lt;xsl:param name=&quot;show.class&quot; select=&quot;''&quot;/&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;xsl:attribute name=&quot;class&quot;&gt;
+            &lt;xsl:choose&gt;
+                &lt;xsl:when test=&quot;error&quot;&gt;Error&lt;/xsl:when&gt;
+                &lt;xsl:when test=&quot;failure&quot;&gt;Failure&lt;/xsl:when&gt;
+                &lt;xsl:otherwise&gt;TableRowColor&lt;/xsl:otherwise&gt;
+            &lt;/xsl:choose&gt;
+        &lt;/xsl:attribute&gt;
+	&lt;xsl:variable name=&quot;class.href&quot;&gt;
+	    &lt;xsl:value-of select=&quot;concat(translate(../@package,'.','/'), '/', ../@id, '_', ../@name, '.html')&quot;/&gt;
+	&lt;/xsl:variable&gt;
+	&lt;xsl:if test=&quot;boolean($show.class)&quot;&gt;
+	    &lt;td&gt;&lt;a href=&quot;{$class.href}&quot;&gt;&lt;xsl:value-of select=&quot;../@name&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+	&lt;/xsl:if&gt;
+        &lt;td&gt;
+	    &lt;a name=&quot;{@name}&quot;/&gt;
+	    &lt;xsl:choose&gt;
+		&lt;xsl:when test=&quot;boolean($show.class)&quot;&gt;
+		    &lt;a href=&quot;{concat($class.href, '#', @name)}&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;
+		&lt;/xsl:when&gt;
+		&lt;xsl:otherwise&gt;
+		    &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+		&lt;/xsl:otherwise&gt;
+	    &lt;/xsl:choose&gt;
+	&lt;/td&gt;
+        &lt;xsl:choose&gt;
+            &lt;xsl:when test=&quot;failure&quot;&gt;
+                &lt;td&gt;Failure&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:apply-templates select=&quot;failure&quot;/&gt;&lt;/td&gt;
+            &lt;/xsl:when&gt;
+            &lt;xsl:when test=&quot;error&quot;&gt;
+                &lt;td&gt;Error&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:apply-templates select=&quot;error&quot;/&gt;&lt;/td&gt;
+            &lt;/xsl:when&gt;
+            &lt;xsl:otherwise&gt;
+                &lt;td&gt;Success&lt;/td&gt;
+                &lt;td&gt;&lt;/td&gt;
+            &lt;/xsl:otherwise&gt;
+        &lt;/xsl:choose&gt;
+        &lt;td&gt;
+            &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                &lt;xsl:with-param name=&quot;value&quot; select=&quot;@time&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- Note : the below template error and failure are the same style
+            so just call the same style store in the toolkit template --&gt;
+&lt;xsl:template match=&quot;failure&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-failures&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;error&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-failures&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- Style for the error and failure in the testcase template --&gt;
+&lt;xsl:template name=&quot;display-failures&quot;&gt;
+    &lt;xsl:choose&gt;
+        &lt;xsl:when test=&quot;not(@message)&quot;&gt;N/A&lt;/xsl:when&gt;
+        &lt;xsl:otherwise&gt;
+            &lt;xsl:value-of select=&quot;@message&quot;/&gt;
+        &lt;/xsl:otherwise&gt;
+    &lt;/xsl:choose&gt;
+    &lt;!-- display the stacktrace --&gt;
+    &lt;br/&gt;&lt;br/&gt;
+    &lt;code&gt;
+        &lt;xsl:call-template name=&quot;br-replace&quot;&gt;
+            &lt;xsl:with-param name=&quot;word&quot; select=&quot;.&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/code&gt;
+    &lt;!-- the latter is better but might be problematic for non-21&quot; monitors... --&gt;
+    &lt;!--pre&gt;&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/pre--&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;JS-escape&quot;&gt;
+    &lt;xsl:param name=&quot;string&quot;/&gt;
+    &lt;xsl:param name=&quot;tmp1&quot; select=&quot;stringutils:replace(string($string),'\','\\')&quot;/&gt;
+    &lt;xsl:param name=&quot;tmp2&quot; select=&quot;stringutils:replace(string($tmp1),&quot;'&quot;,&quot;\&apos;&quot;)&quot;/&gt;
+    &lt;xsl:value-of select=&quot;$tmp2&quot;/&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    template that will convert a carriage return into a br tag
+    @param word the text from which to convert CR to BR tag
+--&gt;
+&lt;xsl:template name=&quot;br-replace&quot;&gt;
+    &lt;xsl:param name=&quot;word&quot;/&gt;
+    &lt;xsl:value-of disable-output-escaping=&quot;yes&quot; select='stringutils:replace(string($word),&quot;&amp;#xA;&quot;,&quot;&lt;br/&gt;&quot;)'/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;display-time&quot;&gt;
+    &lt;xsl:param name=&quot;value&quot;/&gt;
+    &lt;xsl:value-of select=&quot;format-number($value,'0.000')&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;display-percent&quot;&gt;
+    &lt;xsl:param name=&quot;value&quot;/&gt;
+    &lt;xsl:value-of select=&quot;format-number($value,'0.00%')&quot;/&gt;
+&lt;/xsl:template&gt;
+&lt;/xsl:stylesheet&gt;

Added: branches/eschnepel/ant/etc/junit-noframes.xsl
===================================================================
--- branches/eschnepel/ant/etc/junit-noframes.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/junit-noframes.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,464 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+        xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+        xmlns:stringutils=&quot;<A HREF="xalan://org.apache.tools.ant.util.StringUtils">xalan://org.apache.tools.ant.util.StringUtils</A>&quot;&gt;
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;
+  doctype-public=&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; /&gt;
+&lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot; /&gt;
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+ --&gt;
+
+&lt;!--
+
+ Sample stylesheet to be used with Ant JUnitReport output.
+
+ It creates a non-framed report that can be useful to send via
+ e-mail or such.
+
+--&gt;
+&lt;xsl:template match=&quot;testsuites&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;title&gt;Unit Test Results&lt;/title&gt;
+    &lt;style type=&quot;text/css&quot;&gt;
+      body {
+        font:normal 68% verdana,arial,helvetica;
+        color:#000000;
+      }
+      table tr td, table tr th {
+          font-size: 68%;
+      }
+      table.details tr th{
+        font-weight: bold;
+        text-align:left;
+        background:#a6caf0;
+      }
+      table.details tr td{
+        background:#eeeee0;
+      }
+
+      p {
+        line-height:1.5em;
+        margin-top:0.5em; margin-bottom:1.0em;
+      }
+      h1 {
+        margin: 0px 0px 5px; font: 165% verdana,arial,helvetica
+      }
+      h2 {
+        margin-top: 1em; margin-bottom: 0.5em; font: bold 125% verdana,arial,helvetica
+      }
+      h3 {
+        margin-bottom: 0.5em; font: bold 115% verdana,arial,helvetica
+      }
+      h4 {
+        margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+      }
+      h5 {
+        margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+      }
+      h6 {
+        margin-bottom: 0.5em; font: bold 100% verdana,arial,helvetica
+      }
+      .Error {
+        font-weight:bold; color:red;
+      }
+      .Failure {
+        font-weight:bold; color:purple;
+      }
+      .Properties {
+        text-align:right;
+      }
+      &lt;/style&gt;
+      &lt;script type=&quot;text/javascript&quot; language=&quot;JavaScript&quot;&gt;
+        var TestCases = new Array();
+        var cur;
+        &lt;xsl:for-each select=&quot;./testsuite&quot;&gt;
+            &lt;xsl:apply-templates select=&quot;properties&quot;/&gt;
+        &lt;/xsl:for-each&gt;
+
+       &lt;/script&gt;
+       &lt;script type=&quot;text/javascript&quot; language=&quot;JavaScript&quot;&gt;&lt;![CDATA[
+        function displayProperties (name) {
+          var win = window.open('','JUnitSystemProperties','scrollbars=1,resizable=1');
+          var doc = win.document;
+          doc.open();
+          doc.write(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;Properties of &quot; + name + &quot;&lt;/title&gt;&quot;);
+          doc.write(&quot;&lt;style&gt;&quot;)
+          doc.write(&quot;body {font:normal 68% verdana,arial,helvetica; color:#000000; }&quot;);
+          doc.write(&quot;table tr td, table tr th { font-size: 68%; }&quot;);
+          doc.write(&quot;table.properties { border-collapse:collapse; border-left:solid 1 #cccccc; border-top:solid 1 #cccccc; padding:5px; }&quot;);
+          doc.write(&quot;table.properties th { text-align:left; border-right:solid 1 #cccccc; border-bottom:solid 1 #cccccc; background-color:#eeeeee; }&quot;);
+          doc.write(&quot;table.properties td { font:normal; text-align:left; border-right:solid 1 #cccccc; border-bottom:solid 1 #cccccc; background-color:#fffffff; }&quot;);
+          doc.write(&quot;h3 { margin-bottom: 0.5em; font: bold 115% verdana,arial,helvetica }&quot;);
+          doc.write(&quot;&lt;/style&gt;&quot;);
+          doc.write(&quot;&lt;/head&gt;&lt;body&gt;&quot;);
+          doc.write(&quot;&lt;h3&gt;Properties of &quot; + name + &quot;&lt;/h3&gt;&quot;);
+          doc.write(&quot;&lt;div align=\&quot;right\&quot;&gt;&lt;a href=\&quot;javascript:window.close();\&quot;&gt;Close&lt;/a&gt;&lt;/div&gt;&quot;);
+          doc.write(&quot;&lt;table class='properties'&gt;&quot;);
+          doc.write(&quot;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Value&lt;/th&gt;&lt;/tr&gt;&quot;);
+          for (prop in TestCases[name]) {
+            doc.write(&quot;&lt;tr&gt;&lt;th&gt;&quot; + prop + &quot;&lt;/th&gt;&lt;td&gt;&quot; + TestCases[name][prop] + &quot;&lt;/td&gt;&lt;/tr&gt;&quot;);
+          }
+          doc.write(&quot;&lt;/table&gt;&quot;);
+          doc.write(&quot;&lt;/body&gt;&lt;/html&gt;&quot;);
+          doc.close();
+          win.focus();
+        }
+      ]]&gt;
+      &lt;/script&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;a name=&quot;top&quot;&gt;&lt;/a&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+
+            &lt;!-- Summary part --&gt;
+            &lt;xsl:call-template name=&quot;summary&quot;/&gt;
+            &lt;hr size=&quot;1&quot; width=&quot;95%&quot; align=&quot;left&quot;/&gt;
+
+            &lt;!-- Package List part --&gt;
+            &lt;xsl:call-template name=&quot;packagelist&quot;/&gt;
+            &lt;hr size=&quot;1&quot; width=&quot;95%&quot; align=&quot;left&quot;/&gt;
+
+            &lt;!-- For each package create its part --&gt;
+            &lt;xsl:call-template name=&quot;packages&quot;/&gt;
+            &lt;hr size=&quot;1&quot; width=&quot;95%&quot; align=&quot;left&quot;/&gt;
+
+            &lt;!-- For each class create the  part --&gt;
+            &lt;xsl:call-template name=&quot;classes&quot;/&gt;
+
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+
+    &lt;!-- ================================================================== --&gt;
+    &lt;!-- Write a list of all packages with an hyperlink to the anchor of    --&gt;
+    &lt;!-- of the package name.                                               --&gt;
+    &lt;!-- ================================================================== --&gt;
+    &lt;xsl:template name=&quot;packagelist&quot;&gt;
+        &lt;h2&gt;Packages&lt;/h2&gt;
+        Note: package statistics are not computed recursively, they only sum up all of its testsuites numbers.
+        &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+            &lt;xsl:call-template name=&quot;testsuite.test.header&quot;/&gt;
+            &lt;!-- list all packages recursively --&gt;
+            &lt;xsl:for-each select=&quot;./testsuite[not(./@package = preceding-sibling::testsuite/@package)]&quot;&gt;
+                &lt;xsl:sort select=&quot;@package&quot;/&gt;
+                &lt;xsl:variable name=&quot;testsuites-in-package&quot; select=&quot;/testsuites/testsuite[./@package = current()/@package]&quot;/&gt;
+                &lt;xsl:variable name=&quot;testCount&quot; select=&quot;sum($testsuites-in-package/@tests)&quot;/&gt;
+                &lt;xsl:variable name=&quot;errorCount&quot; select=&quot;sum($testsuites-in-package/@errors)&quot;/&gt;
+                &lt;xsl:variable name=&quot;failureCount&quot; select=&quot;sum($testsuites-in-package/@failures)&quot;/&gt;
+                &lt;xsl:variable name=&quot;timeCount&quot; select=&quot;sum($testsuites-in-package/@time)&quot;/&gt;
+
+                &lt;!-- write a summary for the package --&gt;
+                &lt;tr valign=&quot;top&quot;&gt;
+                    &lt;!-- set a nice color depending if there is an error/failure --&gt;
+                    &lt;xsl:attribute name=&quot;class&quot;&gt;
+                        &lt;xsl:choose&gt;
+                            &lt;xsl:when test=&quot;$failureCount &gt; 0&quot;&gt;Failure&lt;/xsl:when&gt;
+                            &lt;xsl:when test=&quot;$errorCount &gt; 0&quot;&gt;Error&lt;/xsl:when&gt;
+                        &lt;/xsl:choose&gt;
+                    &lt;/xsl:attribute&gt;
+                    &lt;td&gt;&lt;a href=&quot;#{@package}&quot;&gt;&lt;xsl:value-of select=&quot;@package&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$testCount&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$errorCount&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$failureCount&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;
+                    &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                        &lt;xsl:with-param name=&quot;value&quot; select=&quot;$timeCount&quot;/&gt;
+                    &lt;/xsl:call-template&gt;
+                    &lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$testsuites-in-package/@timestamp&quot;/&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;$testsuites-in-package/@hostname&quot;/&gt;&lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/xsl:for-each&gt;
+        &lt;/table&gt;
+    &lt;/xsl:template&gt;
+
+
+    &lt;!-- ================================================================== --&gt;
+    &lt;!-- Write a package level report                                       --&gt;
+    &lt;!-- It creates a table with values from the document:                  --&gt;
+    &lt;!-- Name | Tests | Errors | Failures | Time                            --&gt;
+    &lt;!-- ================================================================== --&gt;
+    &lt;xsl:template name=&quot;packages&quot;&gt;
+        &lt;!-- create an anchor to this package name --&gt;
+        &lt;xsl:for-each select=&quot;/testsuites/testsuite[not(./@package = preceding-sibling::testsuite/@package)]&quot;&gt;
+            &lt;xsl:sort select=&quot;@package&quot;/&gt;
+                &lt;a name=&quot;{@package}&quot;&gt;&lt;/a&gt;
+                &lt;h3&gt;Package &lt;xsl:value-of select=&quot;@package&quot;/&gt;&lt;/h3&gt;
+
+                &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+                    &lt;xsl:call-template name=&quot;testsuite.test.header&quot;/&gt;
+
+                    &lt;!-- match the testsuites of this package --&gt;
+                    &lt;xsl:apply-templates select=&quot;/testsuites/testsuite[./@package = current()/@package]&quot; mode=&quot;print.test&quot;/&gt;
+                &lt;/table&gt;
+                &lt;a href=&quot;#top&quot;&gt;Back to top&lt;/a&gt;
+                &lt;p/&gt;
+                &lt;p/&gt;
+        &lt;/xsl:for-each&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template name=&quot;classes&quot;&gt;
+        &lt;xsl:for-each select=&quot;testsuite&quot;&gt;
+            &lt;xsl:sort select=&quot;@name&quot;/&gt;
+            &lt;!-- create an anchor to this class name --&gt;
+            &lt;a name=&quot;{@name}&quot;&gt;&lt;/a&gt;
+            &lt;h3&gt;TestCase &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/h3&gt;
+
+            &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+              &lt;xsl:call-template name=&quot;testcase.test.header&quot;/&gt;
+              &lt;!--
+              test can even not be started at all (failure to load the class)
+              so report the error directly
+              --&gt;
+                &lt;xsl:if test=&quot;./error&quot;&gt;
+                    &lt;tr class=&quot;Error&quot;&gt;
+                        &lt;td colspan=&quot;4&quot;&gt;&lt;xsl:apply-templates select=&quot;./error&quot;/&gt;&lt;/td&gt;
+                    &lt;/tr&gt;
+                &lt;/xsl:if&gt;
+                &lt;xsl:apply-templates select=&quot;./testcase&quot; mode=&quot;print.test&quot;/&gt;
+            &lt;/table&gt;
+            &lt;div class=&quot;Properties&quot;&gt;
+                &lt;a&gt;
+                    &lt;xsl:attribute name=&quot;href&quot;&gt;javascript:displayProperties('&lt;xsl:value-of select=&quot;@package&quot;/&gt;.&lt;xsl:value-of select=&quot;@name&quot;/&gt;');&lt;/xsl:attribute&gt;
+                    Properties &#187;
+                &lt;/a&gt;
+            &lt;/div&gt;
+            &lt;p/&gt;
+
+            &lt;a href=&quot;#top&quot;&gt;Back to top&lt;/a&gt;
+        &lt;/xsl:for-each&gt;
+    &lt;/xsl:template&gt;
+
+    &lt;xsl:template name=&quot;summary&quot;&gt;
+        &lt;h2&gt;Summary&lt;/h2&gt;
+        &lt;xsl:variable name=&quot;testCount&quot; select=&quot;sum(testsuite/@tests)&quot;/&gt;
+        &lt;xsl:variable name=&quot;errorCount&quot; select=&quot;sum(testsuite/@errors)&quot;/&gt;
+        &lt;xsl:variable name=&quot;failureCount&quot; select=&quot;sum(testsuite/@failures)&quot;/&gt;
+        &lt;xsl:variable name=&quot;timeCount&quot; select=&quot;sum(testsuite/@time)&quot;/&gt;
+        &lt;xsl:variable name=&quot;successRate&quot; select=&quot;($testCount - $failureCount - $errorCount) div $testCount&quot;/&gt;
+        &lt;table class=&quot;details&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;95%&quot;&gt;
+        &lt;tr valign=&quot;top&quot;&gt;
+            &lt;th&gt;Tests&lt;/th&gt;
+            &lt;th&gt;Failures&lt;/th&gt;
+            &lt;th&gt;Errors&lt;/th&gt;
+            &lt;th&gt;Success rate&lt;/th&gt;
+            &lt;th&gt;Time&lt;/th&gt;
+        &lt;/tr&gt;
+        &lt;tr valign=&quot;top&quot;&gt;
+            &lt;xsl:attribute name=&quot;class&quot;&gt;
+                &lt;xsl:choose&gt;
+                    &lt;xsl:when test=&quot;$failureCount &gt; 0&quot;&gt;Failure&lt;/xsl:when&gt;
+                    &lt;xsl:when test=&quot;$errorCount &gt; 0&quot;&gt;Error&lt;/xsl:when&gt;
+                &lt;/xsl:choose&gt;
+            &lt;/xsl:attribute&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;$testCount&quot;/&gt;&lt;/td&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;$failureCount&quot;/&gt;&lt;/td&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;$errorCount&quot;/&gt;&lt;/td&gt;
+            &lt;td&gt;
+                &lt;xsl:call-template name=&quot;display-percent&quot;&gt;
+                    &lt;xsl:with-param name=&quot;value&quot; select=&quot;$successRate&quot;/&gt;
+                &lt;/xsl:call-template&gt;
+            &lt;/td&gt;
+            &lt;td&gt;
+                &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                    &lt;xsl:with-param name=&quot;value&quot; select=&quot;$timeCount&quot;/&gt;
+                &lt;/xsl:call-template&gt;
+            &lt;/td&gt;
+
+        &lt;/tr&gt;
+        &lt;/table&gt;
+        &lt;table border=&quot;0&quot; width=&quot;95%&quot;&gt;
+        &lt;tr&gt;
+        &lt;td style=&quot;text-align: justify;&quot;&gt;
+        Note: &lt;i&gt;failures&lt;/i&gt; are anticipated and checked for with assertions while &lt;i&gt;errors&lt;/i&gt; are unanticipated.
+        &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;/table&gt;
+    &lt;/xsl:template&gt;
+
+  &lt;!--
+   Write properties into a JavaScript data structure.
+   This is based on the original idea by Erik Hatcher (<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">ehatcher at apache.org</A>)
+   --&gt;
+  &lt;xsl:template match=&quot;properties&quot;&gt;
+    cur = TestCases['&lt;xsl:value-of select=&quot;../@package&quot;/&gt;.&lt;xsl:value-of select=&quot;../@name&quot;/&gt;'] = new Array();
+    &lt;xsl:for-each select=&quot;property&quot;&gt;
+    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+        cur['&lt;xsl:value-of select=&quot;@name&quot;/&gt;'] = '&lt;xsl:call-template name=&quot;JS-escape&quot;&gt;&lt;xsl:with-param name=&quot;string&quot; select=&quot;@value&quot;/&gt;&lt;/xsl:call-template&gt;';
+    &lt;/xsl:for-each&gt;
+  &lt;/xsl:template&gt;
+
+&lt;!-- Page HEADER --&gt;
+&lt;xsl:template name=&quot;pageHeader&quot;&gt;
+    &lt;h1&gt;Unit Test Results&lt;/h1&gt;
+    &lt;table width=&quot;100%&quot;&gt;
+    &lt;tr&gt;
+        &lt;td align=&quot;left&quot;&gt;&lt;/td&gt;
+        &lt;td align=&quot;right&quot;&gt;Designed for use with &lt;a href='<A HREF="http://www.junit.org">http://www.junit.org</A>'&gt;JUnit&lt;/a&gt; and &lt;a href='<A HREF="http://ant.apache.org/ant">http://ant.apache.org/ant</A>'&gt;Ant&lt;/a&gt;.&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;/table&gt;
+    &lt;hr size=&quot;1&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;header&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+        &lt;th&gt;Tests&lt;/th&gt;
+        &lt;th&gt;Errors&lt;/th&gt;
+        &lt;th&gt;Failures&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time(s)&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- class header --&gt;
+&lt;xsl:template name=&quot;testsuite.test.header&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+        &lt;th&gt;Tests&lt;/th&gt;
+        &lt;th&gt;Errors&lt;/th&gt;
+        &lt;th&gt;Failures&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time(s)&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time Stamp&lt;/th&gt;
+        &lt;th&gt;Host&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- method header --&gt;
+&lt;xsl:template name=&quot;testcase.test.header&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;th&gt;Name&lt;/th&gt;
+        &lt;th&gt;Status&lt;/th&gt;
+        &lt;th width=&quot;80%&quot;&gt;Type&lt;/th&gt;
+        &lt;th nowrap=&quot;nowrap&quot;&gt;Time(s)&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- class information --&gt;
+&lt;xsl:template match=&quot;testsuite&quot; mode=&quot;print.test&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;!-- set a nice color depending if there is an error/failure --&gt;
+        &lt;xsl:attribute name=&quot;class&quot;&gt;
+            &lt;xsl:choose&gt;
+                &lt;xsl:when test=&quot;@failures[.&gt; 0]&quot;&gt;Failure&lt;/xsl:when&gt;
+                &lt;xsl:when test=&quot;@errors[.&gt; 0]&quot;&gt;Error&lt;/xsl:when&gt;
+            &lt;/xsl:choose&gt;
+        &lt;/xsl:attribute&gt;
+
+        &lt;!-- print testsuite information --&gt;
+        &lt;td&gt;&lt;a href=&quot;#{@name}&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;@tests&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;@errors&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;@failures&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;
+            &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                &lt;xsl:with-param name=&quot;value&quot; select=&quot;@time&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@timestamp&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@hostname&quot;/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;testcase&quot; mode=&quot;print.test&quot;&gt;
+    &lt;tr valign=&quot;top&quot;&gt;
+        &lt;xsl:attribute name=&quot;class&quot;&gt;
+            &lt;xsl:choose&gt;
+                &lt;xsl:when test=&quot;failure | error&quot;&gt;Error&lt;/xsl:when&gt;
+            &lt;/xsl:choose&gt;
+        &lt;/xsl:attribute&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/td&gt;
+        &lt;xsl:choose&gt;
+            &lt;xsl:when test=&quot;failure&quot;&gt;
+                &lt;td&gt;Failure&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:apply-templates select=&quot;failure&quot;/&gt;&lt;/td&gt;
+            &lt;/xsl:when&gt;
+            &lt;xsl:when test=&quot;error&quot;&gt;
+                &lt;td&gt;Error&lt;/td&gt;
+                &lt;td&gt;&lt;xsl:apply-templates select=&quot;error&quot;/&gt;&lt;/td&gt;
+            &lt;/xsl:when&gt;
+            &lt;xsl:otherwise&gt;
+                &lt;td&gt;Success&lt;/td&gt;
+                &lt;td&gt;&lt;/td&gt;
+            &lt;/xsl:otherwise&gt;
+        &lt;/xsl:choose&gt;
+        &lt;td&gt;
+            &lt;xsl:call-template name=&quot;display-time&quot;&gt;
+                &lt;xsl:with-param name=&quot;value&quot; select=&quot;@time&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template match=&quot;failure&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-failures&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;error&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-failures&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- Style for the error and failure in the tescase template --&gt;
+&lt;xsl:template name=&quot;display-failures&quot;&gt;
+    &lt;xsl:choose&gt;
+        &lt;xsl:when test=&quot;not(@message)&quot;&gt;N/A&lt;/xsl:when&gt;
+        &lt;xsl:otherwise&gt;
+            &lt;xsl:value-of select=&quot;@message&quot;/&gt;
+        &lt;/xsl:otherwise&gt;
+    &lt;/xsl:choose&gt;
+    &lt;!-- display the stacktrace --&gt;
+    &lt;code&gt;
+        &lt;br/&gt;&lt;br/&gt;
+        &lt;xsl:call-template name=&quot;br-replace&quot;&gt;
+            &lt;xsl:with-param name=&quot;word&quot; select=&quot;.&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/code&gt;
+    &lt;!-- the later is better but might be problematic for non-21&quot; monitors... --&gt;
+    &lt;!--pre&gt;&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/pre--&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;JS-escape&quot;&gt;
+    &lt;xsl:param name=&quot;string&quot;/&gt;
+    &lt;xsl:param name=&quot;tmp1&quot; select=&quot;stringutils:replace(string($string),'\','\\')&quot;/&gt;
+    &lt;xsl:param name=&quot;tmp2&quot; select=&quot;stringutils:replace(string($tmp1),&quot;'&quot;,&quot;\&apos;&quot;)&quot;/&gt;
+    &lt;xsl:value-of select=&quot;$tmp2&quot;/&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    template that will convert a carriage return into a br tag
+    @param word the text from which to convert CR to BR tag
+--&gt;
+&lt;xsl:template name=&quot;br-replace&quot;&gt;
+    &lt;xsl:param name=&quot;word&quot;/&gt;
+    &lt;xsl:value-of disable-output-escaping=&quot;yes&quot; select='stringutils:replace(string($word),&quot;&amp;#xA;&quot;,&quot;&lt;br/&gt;&quot;)'/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;display-time&quot;&gt;
+    &lt;xsl:param name=&quot;value&quot;/&gt;
+    &lt;xsl:value-of select=&quot;format-number($value,'0.000')&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;display-percent&quot;&gt;
+    &lt;xsl:param name=&quot;value&quot;/&gt;
+    &lt;xsl:value-of select=&quot;format-number($value,'0.00%')&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;

Added: branches/eschnepel/ant/etc/log.xsl
===================================================================
--- branches/eschnepel/ant/etc/log.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/log.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,202 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;&gt;
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;/&gt;
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+   
+--&gt;
+ 
+&lt;!--
+
+  The purpose have this XSL is to provide a nice way to look at the output
+  from the Ant XmlLogger (ie: ant -listener org.apache.tools.ant.XmlLogger )
+  
+  @author &lt;a href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">sbailliez at apache.org</A>&quot;&gt;Stephane Bailliez&lt;/a&gt;
+  
+--&gt;
+&lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot; /&gt;
+
+&lt;xsl:template match=&quot;/&quot;&gt;
+&lt;html&gt;
+  &lt;head&gt;
+    &lt;style type=&quot;text/css&quot;&gt;
+    .bannercell {
+      border: 0px;
+      padding: 0px;
+    }
+    body {
+      margin: 0;
+      font:normal 100% arial,helvetica,sanserif;
+      background-color:#FFFFFF;
+      color:#000000;
+    }
+    table.status {
+      font:bold 80% arial,helvetica,sanserif;
+      background-color:#525D76;
+      color:#ffffff;
+    }
+    table.log tr td, tr th {
+      font-size: 80%;
+    }
+    .error {
+      color:red;
+    }
+    .warn {
+      color:brown;
+    }
+    .info {
+      color:gray;
+    }
+    .debug{
+      color:gray;
+    }
+    .failed {
+      font-size:80%;
+      background-color: red;
+      color:#FFFFFF;
+      font-weight: bold
+    }
+    .complete {
+      font-size:80%;
+      background-color: #525D76;
+      color:#FFFFFF;
+      font-weight: bold
+    }
+    .a td { 
+      background: #efefef;
+    }
+    .b td { 
+      background: #fff;
+    }
+    th, td {
+      text-align: left;
+      vertical-align: top;
+    }
+    th {
+      background: #ccc;
+      color: black;
+    }
+    table, th, td {
+      border: none
+    }
+    h3 {
+      font:bold 80% arial,helvetica,sanserif;
+      background: #525D76;
+      color: white;
+      text-decoration: none;
+      padding: 5px;
+      margin-right: 2px;
+      margin-left: 2px;
+      margin-bottom: 0;
+    }
+    &lt;/style&gt;
+  &lt;/head&gt;
+  &lt;body&gt;
+    &lt;!-- jakarta logo --&gt;
+    &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%&quot;&gt;
+    &lt;tr&gt;
+      &lt;td valign=&quot;top&quot; class=&quot;bannercell&quot;&gt;
+        &lt;a href=&quot;<A HREF="http://jakarta.apache.org/">http://jakarta.apache.org/</A>&quot;&gt;
+        &lt;img src=&quot;<A HREF="http://jakarta.apache.org/images/jakarta-logo.gif">http://jakarta.apache.org/images/jakarta-logo.gif</A>&quot; alt=&quot;<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>&quot; align=&quot;left&quot; border=&quot;0&quot;/&gt;
+        &lt;/a&gt;
+      &lt;/td&gt;
+      &lt;td style=&quot;text-align:right;vertical-align:bottom&quot;&gt;
+        &lt;a href=&quot;<A HREF="http://ant.apache.org/">http://ant.apache.org/</A>&quot;&gt;Apache Ant&lt;/a&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;/table&gt;
+      
+    &lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;
+    &lt;tr&gt;&lt;td&gt;&lt;hr noshade=&quot;yes&quot; size=&quot;1&quot;/&gt;&lt;/td&gt;&lt;/tr&gt;
+    &lt;/table&gt;
+
+    &lt;xsl:apply-templates select=&quot;build&quot;/&gt;
+
+  &lt;/body&gt;
+&lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;build&quot;&gt;
+  &lt;!-- build status --&gt;
+  &lt;table width=&quot;100%&quot;&gt;
+    &lt;xsl:attribute name=&quot;class&quot;&gt;
+      &lt;xsl:if test=&quot;@error&quot;&gt;failed&lt;/xsl:if&gt;
+      &lt;xsl:if test=&quot;not(@error)&quot;&gt;complete&lt;/xsl:if&gt;
+    &lt;/xsl:attribute&gt;
+    &lt;tr&gt;
+      &lt;xsl:if test=&quot;@error&quot;&gt;
+        &lt;td nowrap=&quot;yes&quot;&gt;Build Failed&lt;/td&gt; 
+      &lt;/xsl:if&gt;
+      &lt;xsl:if test=&quot;not(@error)&quot;&gt;
+        &lt;td nowrap=&quot;yes&quot;&gt;Build Complete&lt;/td&gt;
+      &lt;/xsl:if&gt;
+        &lt;td style=&quot;text-align:right&quot; nowrap=&quot;yes&quot;&gt;Total Time: &lt;xsl:value-of select=&quot;@time&quot;/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td colspan=&quot;2&quot;&gt;
+        &lt;xsl:if test=&quot;@error&quot;&gt;
+          &lt;tt&gt;&lt;xsl:value-of select=&quot;@error&quot;/&gt;&lt;/tt&gt;&lt;br/&gt;
+          &lt;i style=&quot;font-size:80%&quot;&gt;See the &lt;a href=&quot;#stacktrace&quot; alt=&quot;Click for details&quot;&gt;stacktrace&lt;/a&gt;.&lt;/i&gt;
+        &lt;/xsl:if&gt;
+      &lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/table&gt;
+  &lt;table border=&quot;1&quot; cellspacing=&quot;2&quot; cellpadding=&quot;3&quot; width=&quot;100%&quot; style=&quot;font-size:80%&quot;&gt;
+    &lt;tr class=&quot;a&quot;&gt;&lt;td width=&quot;1&quot;&gt;ant.file&lt;/td&gt;&lt;td&gt;&lt;xsl:value-of select=&quot;substring-after(//message[contains(text(),'ant.file')], '-&gt;')&quot;/&gt;&lt;/td&gt;&lt;/tr&gt;
+    &lt;tr class=&quot;b&quot;&gt;&lt;td width=&quot;1&quot;&gt;ant.version&lt;/td&gt;&lt;td&gt;&lt;xsl:value-of select=&quot;substring-after(//message[contains(text(),'ant.version')], '-&gt;')&quot;/&gt;&lt;/td&gt;&lt;/tr&gt;
+    &lt;tr class=&quot;a&quot;&gt;&lt;td width=&quot;1&quot;&gt;java.version&lt;/td&gt;&lt;td&gt;&lt;xsl:value-of select=&quot;substring-after(//message[contains(text(),'java.vm.version')], '-&gt;')&quot;/&gt;&lt;/td&gt;&lt;/tr&gt;
+    &lt;tr class=&quot;b&quot;&gt;&lt;td width=&quot;1&quot;&gt;os.name&lt;/td&gt;&lt;td&gt;&lt;xsl:value-of select=&quot;substring-after(//message[contains(text(),'os.name')], '-&gt;')&quot;/&gt;&lt;/td&gt;&lt;/tr&gt;
+  &lt;/table&gt;
+  &lt;!-- build information --&gt;
+  &lt;h3&gt;Build events&lt;/h3&gt;
+  &lt;table class=&quot;log&quot; border=&quot;1&quot; cellspacing=&quot;2&quot; cellpadding=&quot;3&quot; width=&quot;100%&quot;&gt;
+  &lt;tr&gt;
+    &lt;th nowrap=&quot;yes&quot; align=&quot;left&quot; width=&quot;1%&quot;&gt;target&lt;/th&gt;
+    &lt;th nowrap=&quot;yes&quot; align=&quot;left&quot; width=&quot;1%&quot;&gt;task&lt;/th&gt;
+    &lt;th nowrap=&quot;yes&quot; align=&quot;left&quot;&gt;message&lt;/th&gt;
+  &lt;/tr&gt;
+  &lt;xsl:apply-templates select=&quot;.//message[@priority != 'debug']&quot;/&gt;
+  &lt;/table&gt;
+  &lt;p&gt;
+  &lt;!-- stacktrace --&gt;
+  &lt;xsl:if test=&quot;stacktrace&quot;&gt;
+  &lt;a name=&quot;stacktrace&quot;/&gt;
+  &lt;h3&gt;Error details&lt;/h3&gt;
+  &lt;table width=&quot;100%&quot;&gt;
+    &lt;tr&gt;&lt;td&gt;
+      &lt;pre&gt;&lt;xsl:value-of select=&quot;stacktrace&quot;/&gt;&lt;/pre&gt;
+    &lt;/td&gt;&lt;/tr&gt;
+  &lt;/table&gt;
+  &lt;/xsl:if&gt;
+  &lt;/p&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- report every message but those with debug priority --&gt;
+&lt;xsl:template match=&quot;message[@priority!='debug']&quot;&gt;
+  &lt;tr valign=&quot;top&quot;&gt;
+    &lt;!-- alternated row style --&gt;
+    &lt;xsl:attribute name=&quot;class&quot;&gt;
+      &lt;xsl:if test=&quot;position() mod 2 = 1&quot;&gt;a&lt;/xsl:if&gt;
+      &lt;xsl:if test=&quot;position() mod 2 = 0&quot;&gt;b&lt;/xsl:if&gt;
+    &lt;/xsl:attribute&gt;
+    &lt;td nowrap=&quot;yes&quot; width=&quot;1%&quot;&gt;&lt;xsl:value-of select=&quot;../../@name&quot;/&gt;&lt;/td&gt;
+    &lt;td nowrap=&quot;yes&quot; style=&quot;text-align:right&quot; width=&quot;1%&quot;&gt;[ &lt;xsl:value-of select=&quot;../@name&quot;/&gt; ]&lt;/td&gt;
+    &lt;td class=&quot;{@priority}&quot; nowrap=&quot;yes&quot;&gt;
+            &lt;xsl:value-of select=&quot;text()&quot;/&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;

Added: branches/eschnepel/ant/etc/maudit-frames.xsl
===================================================================
--- branches/eschnepel/ant/etc/maudit-frames.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/maudit-frames.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,502 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+    xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+    xmlns:redirect=&quot;org.apache.xalan.lib.Redirect&quot;
+    extension-element-prefixes=&quot;redirect&quot;&gt;
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;/&gt;
+&lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot; /&gt;
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+--&gt;
+&lt;!--
+
+    Stylesheet to transform an XML file generated by the Ant MAudit task into
+    a set of JavaDoc-like HTML page to make pages more convenient to be browsed.
+
+    It use the Xalan redirect extension to write to multiple output files.
+
+    @author Stephane Bailliez &lt;a href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">sbailliez at apache.org</A>&quot;/&gt;
+--&gt;
+
+&lt;xsl:param name=&quot;output.dir&quot; select=&quot;'.'&quot;/&gt;
+
+
+&lt;xsl:template match=&quot;classes&quot;&gt;
+    &lt;!-- create the index.html --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/index.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;index.html&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the stylesheet.css --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/stylesheet.css&quot;&gt;
+        &lt;xsl:call-template name=&quot;stylesheet.css&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the overview-packages.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/overview-summary.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;overview.packages&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-packages.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/overview-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.packages&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create the all-classes.html at the root --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/allclasses-frame.html&quot;&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.classes&quot;/&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- process all packages --&gt;
+    &lt;xsl:for-each select=&quot;./class[not(./@package = preceding-sibling::class/@package)]&quot;&gt;
+        &lt;xsl:call-template name=&quot;package&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;@package&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;package&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;xsl:variable name=&quot;package.dir&quot;&gt;
+        &lt;xsl:if test=&quot;not($name = '')&quot;&gt;&lt;xsl:value-of select=&quot;translate($name,'.','/')&quot;/&gt;&lt;/xsl:if&gt;
+        &lt;xsl:if test=&quot;$name = ''&quot;&gt;.&lt;/xsl:if&gt;
+    &lt;/xsl:variable&gt;
+    &lt;!--Processing package &lt;xsl:value-of select=&quot;@name&quot;/&gt; in &lt;xsl:value-of select=&quot;$output.dir&quot;/&gt; --&gt;
+    &lt;!-- create a classes-list.html in the package directory --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-frame.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;classes.list&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;$name&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- create a package-summary.html in the package directory --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-summary.html&quot;&gt;
+        &lt;xsl:call-template name=&quot;package.summary&quot;&gt;
+            &lt;xsl:with-param name=&quot;name&quot; select=&quot;$name&quot;/&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/redirect:write&gt;
+
+    &lt;!-- for each class, creates a @name.html --&gt;
+    &lt;!-- @bug there will be a problem with inner classes having the same name, it will be overwritten --&gt;
+    &lt;xsl:for-each select=&quot;/classes/class[@package = $name]&quot;&gt;
+        &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@name}.html&quot;&gt;
+            &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;class.details&quot;/&gt;
+        &lt;/redirect:write&gt;
+    &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template name=&quot;index.html&quot;&gt;
+&lt;HTML&gt;
+    &lt;HEAD&gt;&lt;TITLE&gt;Audit Results.&lt;/TITLE&gt;&lt;/HEAD&gt;
+    &lt;FRAMESET cols=&quot;20%,80%&quot;&gt;
+        &lt;FRAMESET rows=&quot;30%,70%&quot;&gt;
+            &lt;FRAME src=&quot;overview-frame.html&quot; name=&quot;packageListFrame&quot;/&gt;
+            &lt;FRAME src=&quot;allclasses-frame.html&quot; name=&quot;classListFrame&quot;/&gt;
+        &lt;/FRAMESET&gt;
+        &lt;FRAME src=&quot;overview-summary.html&quot; name=&quot;classFrame&quot;/&gt;
+    &lt;/FRAMESET&gt;
+    &lt;noframes&gt;
+        &lt;H2&gt;Frame Alert&lt;/H2&gt;
+        &lt;P&gt;
+        This document is designed to be viewed using the frames feature. If you see this message, you are using a non-frame-capable web client.
+        &lt;/P&gt;
+    &lt;/noframes&gt;
+&lt;/HTML&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- this is the stylesheet css to use for nearly everything --&gt;
+&lt;xsl:template name=&quot;stylesheet.css&quot;&gt;
+    .bannercell {
+      border: 0px;
+      padding: 0px;
+    }
+    body {
+      margin-left: 10;
+      margin-right: 10;
+      font:normal 80% arial,helvetica,sanserif;
+      background-color:#FFFFFF;
+      color:#000000;
+    }
+    .a td {
+      background: #efefef;
+    }
+    .b td {
+      background: #fff;
+    }
+    th, td {
+      text-align: left;
+      vertical-align: top;
+    }
+    th {
+      font-weight:bold;
+      background: #ccc;
+      color: black;
+    }
+    table, th, td {
+      font-size:100%;
+      border: none
+    }
+    table.log tr td, tr th {
+
+    }
+    h2 {
+      font-weight:bold;
+      font-size:140%;
+      margin-bottom: 5;
+    }
+    h3 {
+      font-size:100%;
+      font-weight:bold;
+      background: #525D76;
+      color: white;
+      text-decoration: none;
+      padding: 5px;
+      margin-right: 2px;
+      margin-left: 2px;
+      margin-bottom: 0;
+    }
+&lt;/xsl:template&gt;
+
+
+&lt;!-- print the violations of the class --&gt;
+&lt;xsl:template match=&quot;class&quot; mode=&quot;class.details&quot;&gt;
+    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@package&quot;/&gt;
+    &lt;HTML&gt;
+        &lt;HEAD&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/HEAD&gt;
+        &lt;BODY&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;H3&gt;Class &lt;xsl:if test=&quot;not($package.name = '')&quot;&gt;&lt;xsl:value-of select=&quot;$package.name&quot;/&gt;.&lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/H3&gt;
+
+            &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                &lt;xsl:call-template name=&quot;class.audit.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.audit&quot;/&gt;
+            &lt;/table&gt;
+
+            &lt;H3&gt;Violations&lt;/H3&gt;
+            &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                &lt;xsl:call-template name=&quot;violation.audit.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;./violation&quot; mode=&quot;print.audit&quot;&gt;
+                    &lt;xsl:sort data-type=&quot;number&quot; select=&quot;@line&quot;/&gt;
+                &lt;/xsl:apply-templates&gt;
+            &lt;/table&gt;
+            &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+        &lt;/BODY&gt;
+    &lt;/HTML&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- list of classes in a package --&gt;
+&lt;xsl:template name=&quot;classes.list&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;HTML&gt;
+        &lt;HEAD&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/HEAD&gt;
+        &lt;BODY&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;tr&gt;
+                    &lt;td nowrap=&quot;nowrap&quot;&gt;
+                        &lt;H2&gt;&lt;a href=&quot;package-summary.html&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;$name&quot;/&gt;&lt;/a&gt;&lt;/H2&gt;
+                    &lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/table&gt;
+
+            &lt;h2&gt;Classes&lt;/h2&gt;
+            &lt;TABLE WIDTH=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;/classes/class[./@package = $name]&quot; mode=&quot;classes.list&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                &lt;/xsl:apply-templates&gt;
+            &lt;/TABLE&gt;
+        &lt;/BODY&gt;
+    &lt;/HTML&gt;
+&lt;/xsl:template&gt;
+&lt;!-- the class to list --&gt;
+&lt;xsl:template match=&quot;class&quot; mode=&quot;classes.list&quot;&gt;
+    &lt;tr&gt;
+        &lt;td nowrap=&quot;nowrap&quot;&gt;
+            &lt;!-- @bug naming to fix for inner classes --&gt;
+            &lt;a href=&quot;{@name}.html&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    Creates an all-classes.html file that contains a link to all package-summary.html
+    on each class.
+--&gt;
+&lt;xsl:template match=&quot;classes&quot; mode=&quot;all.classes&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;h2&gt;Classes&lt;/h2&gt;
+            &lt;table width=&quot;100%&quot;&gt;
+                &lt;xsl:apply-templates select=&quot;.//class&quot; mode=&quot;all.classes&quot;&gt;
+                    &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                &lt;/xsl:apply-templates&gt;
+            &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;class&quot; mode=&quot;all.classes&quot;&gt;
+    &lt;!-- (ancestor::package)[last()] is buggy in MSXML3 ? --&gt;
+    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@package&quot;/&gt;
+    &lt;tr&gt;
+        &lt;td nowrap=&quot;nowrap&quot;&gt;
+            &lt;a target=&quot;classFrame&quot;&gt;
+                &lt;xsl:attribute name=&quot;href&quot;&gt;
+                    &lt;xsl:if test=&quot;not($package.name='')&quot;&gt;
+                        &lt;xsl:value-of select=&quot;translate($package.name,'.','/')&quot;/&gt;&lt;xsl:text&gt;/&lt;/xsl:text&gt;
+                    &lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;xsl:text&gt;.html&lt;/xsl:text&gt;
+                &lt;/xsl:attribute&gt;
+                &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+            &lt;/a&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    Creates an html file that contains a link to all package-summary.html files on
+    each package existing on testsuites.
+    @bug there will be a problem here, I don't know yet how to handle unnamed package :(
+--&gt;
+&lt;xsl:template match=&quot;classes&quot; mode=&quot;all.packages&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body&gt;
+            &lt;h2&gt;&lt;a href=&quot;overview-summary.html&quot; target=&quot;classFrame&quot;&gt;Home&lt;/a&gt;&lt;/h2&gt;
+            &lt;h2&gt;Packages&lt;/h2&gt;
+                &lt;table width=&quot;100%&quot;&gt;
+                    &lt;xsl:apply-templates select=&quot;class[not(./@package = preceding-sibling::class/@package)]&quot; mode=&quot;all.packages&quot;&gt;
+                        &lt;xsl:sort select=&quot;@package&quot; order=&quot;ascending&quot;/&gt;
+                    &lt;/xsl:apply-templates&gt;
+                &lt;/table&gt;
+        &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;class&quot; mode=&quot;all.packages&quot;&gt;
+    &lt;tr&gt;
+        &lt;td nowrap=&quot;nowrap&quot;&gt;
+            &lt;a href=&quot;{translate(@package,'.','/')}/package-summary.html&quot; target=&quot;classFrame&quot;&gt;
+                &lt;xsl:value-of select=&quot;@package&quot;/&gt;
+            &lt;/a&gt;
+        &lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template match=&quot;classes&quot; mode=&quot;overview.packages&quot;&gt;
+    &lt;html&gt;
+        &lt;head&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/head&gt;
+        &lt;body onload=&quot;open('allclasses-frame.html','classListFrame')&quot;&gt;
+        &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+        &lt;h3&gt;Summary&lt;/h3&gt;
+        &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+        &lt;tr&gt;
+            &lt;th&gt;Audited classes&lt;/th&gt;
+            &lt;th&gt;Reported classes&lt;/th&gt;
+            &lt;th&gt;Violations&lt;/th&gt;
+        &lt;/tr&gt;
+        &lt;tr class=&quot;a&quot;&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;@audited&quot;/&gt;&lt;/td&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;@reported&quot;/&gt;&lt;/td&gt;
+            &lt;td&gt;&lt;xsl:value-of select=&quot;@violations&quot;/&gt;&lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;/table&gt;
+        &lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;
+        &lt;tr&gt;
+        &lt;td style=&quot;text-align: justify;&quot;&gt;
+        Note: Rules checked have originated from style guidelines suggested by the language designers,
+        experience from the Java development community and insite experience. Violations are generally
+        reported with a reference to the &lt;a href=&quot;<A HREF="http://java.sun.com/docs/books/jls/second_edition/html/jTOC.doc.html">http://java.sun.com/docs/books/jls/second_edition/html/jTOC.doc.html</A>&quot;&gt;Java Language Specifications&lt;/a&gt; (JLS x.x.x)
+        and Metamata Audit rules (x.x).
+        Please consult these documents for additional information about violations.
+        &lt;p/&gt;
+        Rules checked also enforce adherence to &lt;a href=&quot;<A HREF="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html">http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html</A>&quot;&gt;Sun Java coding guidelines&lt;/a&gt; in use at Jakarta.
+        &lt;p/&gt;
+        One should note that these violations do not necessary underline errors but should be used
+        as an indication for &lt;i&gt;possible&lt;/i&gt; errors. As always, use your best judgment and review
+        them carefully, it might save you hours of debugging.
+        &lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;/table&gt;
+
+        &lt;h3&gt;Packages&lt;/h3&gt;
+        &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+            &lt;xsl:call-template name=&quot;class.audit.header&quot;/&gt;
+            &lt;xsl:for-each select=&quot;class[not(./@package = preceding-sibling::class/@package)]&quot;&gt;
+                &lt;xsl:sort select=&quot;@package&quot; order=&quot;ascending&quot;/&gt;
+                &lt;tr&gt;
+          &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+                    &lt;td&gt;&lt;a href=&quot;{translate(@package,'.','/')}/package-summary.html&quot;&gt;&lt;xsl:value-of select=&quot;@package&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+                    &lt;td&gt;&lt;xsl:value-of select=&quot;sum(/classes/class[./@package = current()/@package]/@violations)&quot;/&gt;&lt;/td&gt;
+                &lt;/tr&gt;
+            &lt;/xsl:for-each&gt;
+        &lt;/table&gt;
+        &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+        &lt;/body&gt;
+        &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;package.summary&quot;&gt;
+    &lt;xsl:param name=&quot;name&quot;/&gt;
+    &lt;HTML&gt;
+        &lt;HEAD&gt;
+            &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+                &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$name&quot;/&gt;
+            &lt;/xsl:call-template&gt;
+        &lt;/HEAD&gt;
+        &lt;BODY&gt;
+            &lt;xsl:attribute name=&quot;onload&quot;&gt;open('package-frame.html','classListFrame')&lt;/xsl:attribute&gt;
+            &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+            &lt;h3&gt;Package &lt;xsl:value-of select=&quot;$name&quot;/&gt;&lt;/h3&gt;
+
+            &lt;!--table border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                &lt;xsl:call-template name=&quot;class.metrics.header&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.metrics&quot;/&gt;
+            &lt;/table--&gt;
+
+            &lt;xsl:if test=&quot;count(/classes/class[./@package = $name]) &gt; 0&quot;&gt;
+                &lt;H3&gt;Classes&lt;/H3&gt;
+                &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+                    &lt;xsl:call-template name=&quot;class.audit.header&quot;/&gt;
+                    &lt;xsl:apply-templates select=&quot;/classes/class[./@package = $name]&quot; mode=&quot;print.audit&quot;&gt;
+                        &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                    &lt;/xsl:apply-templates&gt;
+                &lt;/table&gt;
+            &lt;/xsl:if&gt;
+            &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+        &lt;/BODY&gt;
+    &lt;/HTML&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    transform string like a.b.c to ../../../
+    @param path the path to transform into a descending directory path
+--&gt;
+&lt;xsl:template name=&quot;path&quot;&gt;
+    &lt;xsl:param name=&quot;path&quot;/&gt;
+    &lt;xsl:if test=&quot;contains($path,'.')&quot;&gt;
+        &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+        &lt;xsl:call-template name=&quot;path&quot;&gt;
+            &lt;xsl:with-param name=&quot;path&quot;&gt;&lt;xsl:value-of select=&quot;substring-after($path,'.')&quot;/&gt;&lt;/xsl:with-param&gt;
+        &lt;/xsl:call-template&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:if test=&quot;not(contains($path,'.')) and not($path = '')&quot;&gt;
+        &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+    &lt;/xsl:if&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- create the link to the stylesheet based on the package name --&gt;
+&lt;xsl:template name=&quot;create.stylesheet.link&quot;&gt;
+    &lt;xsl:param name=&quot;package.name&quot;/&gt;
+    &lt;LINK REL =&quot;stylesheet&quot; TYPE=&quot;text/css&quot; TITLE=&quot;Style&quot;&gt;&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:if test=&quot;not($package.name = 'unnamed package')&quot;&gt;&lt;xsl:call-template name=&quot;path&quot;&gt;&lt;xsl:with-param name=&quot;path&quot; select=&quot;$package.name&quot;/&gt;&lt;/xsl:call-template&gt;&lt;/xsl:if&gt;stylesheet.css&lt;/xsl:attribute&gt;&lt;/LINK&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- Page HEADER --&gt;
+&lt;xsl:template name=&quot;pageHeader&quot;&gt;
+
+  &lt;!-- jakarta logo --&gt;
+  &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%&quot;&gt;
+  &lt;tr&gt;
+    &lt;td class=&quot;bannercell&quot; rowspan=&quot;2&quot;&gt;
+      &lt;a href=&quot;<A HREF="http://jakarta.apache.org/">http://jakarta.apache.org/</A>&quot;&gt;
+      &lt;img src=&quot;<A HREF="http://jakarta.apache.org/images/jakarta-logo.gif">http://jakarta.apache.org/images/jakarta-logo.gif</A>&quot; alt=&quot;<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>&quot; align=&quot;left&quot; border=&quot;0&quot;/&gt;
+      &lt;/a&gt;
+    &lt;/td&gt;
+        &lt;td style=&quot;text-align:right&quot;&gt;&lt;h2&gt;Source Code Audit&lt;/h2&gt;&lt;/td&gt;
+        &lt;/tr&gt;
+        &lt;tr&gt;
+        &lt;td style=&quot;text-align:right&quot;&gt;Designed for use with &lt;a href='<A HREF="http://www.webgain.com/products/quality_analyzer/">http://www.webgain.com/products/quality_analyzer/</A>'&gt;Webgain QA/Metamata Audit&lt;/a&gt; and &lt;a href='<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>'&gt;Ant&lt;/a&gt;.&lt;/td&gt;
+        &lt;/tr&gt;
+  &lt;/table&gt;
+    &lt;hr size=&quot;1&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- Page HEADER --&gt;
+&lt;xsl:template name=&quot;pageFooter&quot;&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- class header --&gt;
+&lt;xsl:template name=&quot;class.audit.header&quot;&gt;
+    &lt;tr&gt;
+        &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+        &lt;th&gt;Violations&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- method header --&gt;
+&lt;xsl:template name=&quot;violation.audit.header&quot;&gt;
+    &lt;tr&gt;
+        &lt;th&gt;Line&lt;/th&gt;
+        &lt;th&gt;Message&lt;/th&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- class information --&gt;
+&lt;xsl:template match=&quot;class&quot; mode=&quot;print.audit&quot;&gt;
+    &lt;tr&gt;
+    &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+        &lt;td&gt;&lt;a href=&quot;{@name}.html&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@violations&quot;/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;violation&quot; mode=&quot;print.audit&quot;&gt;
+    &lt;tr&gt;
+    &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+        &lt;td&gt;&lt;xsl:value-of select=&quot;@line&quot;/&gt;&lt;/td&gt;
+        &lt;td&gt;&lt;xsl:apply-templates select=&quot;@message&quot;/&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- alternated row style --&gt;
+&lt;xsl:template name=&quot;alternate-row&quot;&gt;
+&lt;xsl:attribute name=&quot;class&quot;&gt;
+  &lt;xsl:if test=&quot;position() mod 2 = 1&quot;&gt;a&lt;/xsl:if&gt;
+  &lt;xsl:if test=&quot;position() mod 2 = 0&quot;&gt;b&lt;/xsl:if&gt;
+&lt;/xsl:attribute&gt;
+&lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;
+

Added: branches/eschnepel/ant/etc/mmetrics-frames.xsl
===================================================================
--- branches/eschnepel/ant/etc/mmetrics-frames.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/mmetrics-frames.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,1025 @@
+&lt;xsl:stylesheet xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot; version=&quot;1.0&quot;
+  xmlns:lxslt=&quot;<A HREF="http://xml.apache.org/xslt">http://xml.apache.org/xslt</A>&quot;
+  xmlns:xalan=&quot;<A HREF="http://xml.apache.org/xalan">http://xml.apache.org/xalan</A>&quot;
+  xmlns:redirect=&quot;org.apache.xalan.lib.Redirect&quot;
+  exclude-result-prefixes=&quot;xalan&quot;
+  extension-element-prefixes=&quot;redirect&quot;&gt;
+&lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot; encoding=&quot;US-ASCII&quot;/&gt;
+&lt;xsl:decimal-format decimal-separator=&quot;.&quot; grouping-separator=&quot;,&quot; /&gt;
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+--&gt;
+&lt;!--
+  @author Stephane Bailliez &lt;a href=&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">sbailliez at apache.org</A>&quot;/&gt;
+  --&gt;
+&lt;xsl:param name=&quot;output.dir&quot; select=&quot;'.'&quot;/&gt;
+
+&lt;!-- default max value for the metrics --&gt;
+&lt;xsl:param name=&quot;vg.max&quot; select=&quot;10&quot;/&gt;
+&lt;xsl:param name=&quot;loc.max&quot; select=&quot;1000&quot;/&gt;
+&lt;xsl:param name=&quot;dit.max&quot; select=&quot;10&quot;/&gt;
+&lt;xsl:param name=&quot;noa.max&quot; select=&quot;250&quot;/&gt;
+&lt;xsl:param name=&quot;nrm.max&quot; select=&quot;50&quot;/&gt;
+&lt;xsl:param name=&quot;nlm.max&quot; select=&quot;250&quot;/&gt;
+&lt;xsl:param name=&quot;wmc.max&quot; select=&quot;250&quot;/&gt;
+&lt;xsl:param name=&quot;rfc.max&quot; select=&quot;50&quot;/&gt;
+&lt;xsl:param name=&quot;dac.max&quot; select=&quot;10&quot;/&gt;
+&lt;xsl:param name=&quot;fanout.max&quot; select=&quot;10&quot;/&gt;
+&lt;xsl:param name=&quot;cbo.max&quot; select=&quot;15&quot;/&gt;
+&lt;xsl:param name=&quot;lcom.max&quot; select=&quot;10&quot;/&gt;
+&lt;xsl:param name=&quot;nocl.max&quot; select=&quot;10&quot;/&gt;
+
+
+&lt;!-- create a tree fragment to speed up processing --&gt;
+&lt;xsl:variable name=&quot;doctree.var&quot;&gt;
+  &lt;xsl:element name=&quot;classes&quot;&gt;
+    &lt;xsl:for-each select=&quot;.//class&quot;&gt;
+      &lt;xsl:element name=&quot;class&quot;&gt;
+        &lt;xsl:attribute name=&quot;package&quot;&gt;
+          &lt;xsl:value-of select=&quot;(ancestor::package)[last()]/@name&quot;/&gt;
+        &lt;/xsl:attribute&gt;
+        &lt;xsl:copy-of select=&quot;@*&quot;/&gt;
+        &lt;xsl:attribute name=&quot;name&quot;&gt;
+          &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;class.name&quot;/&gt;
+        &lt;/xsl:attribute&gt;
+        &lt;xsl:copy-of select=&quot;method&quot;/&gt;
+      &lt;/xsl:element&gt;
+    &lt;/xsl:for-each&gt;
+  &lt;/xsl:element&gt;
+&lt;/xsl:variable&gt;
+
+&lt;xsl:variable name=&quot;doctree&quot; select=&quot;xalan:nodeset($doctree.var)&quot;/&gt;
+
+&lt;xsl:template match=&quot;metrics&quot;&gt;
+
+  &lt;!-- create the index.html --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/index.html&quot;&gt;
+    &lt;xsl:call-template name=&quot;index.html&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- create the stylesheet.css --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/stylesheet.css&quot;&gt;
+    &lt;xsl:call-template name=&quot;stylesheet.css&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;redirect:write file=&quot;{$output.dir}/metrics-reference.html&quot;&gt;
+    &lt;xsl:call-template name=&quot;metrics-reference.html&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- create the overview-packages.html at the root --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/overview-summary.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;overview.packages&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- create the all-packages.html at the root --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/overview-frame.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.packages&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- create the all-classes.html at the root --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/allclasses-frame.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.classes&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- process all packages --&gt;
+  &lt;xsl:apply-templates select=&quot;.//package&quot;/&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template match=&quot;package&quot;&gt;
+  &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@name&quot;/&gt;
+  &lt;xsl:variable name=&quot;package.dir&quot;&gt;
+    &lt;xsl:if test=&quot;not($package.name = 'unnamed package')&quot;&gt;&lt;xsl:value-of select=&quot;translate($package.name,'.','/')&quot;/&gt;&lt;/xsl:if&gt;
+    &lt;xsl:if test=&quot;$package.name = 'unnamed package'&quot;&gt;.&lt;/xsl:if&gt;
+  &lt;/xsl:variable&gt;
+  &lt;!-- create a classes-list.html in the package directory --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-frame.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;classes.list&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- create a package-summary.html in the package directory --&gt;
+  &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/package-summary.html&quot;&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;package.summary&quot;/&gt;
+  &lt;/redirect:write&gt;
+
+  &lt;!-- for each class, creates a @name.html --&gt;
+  &lt;!-- @bug there will be a problem with inner classes having the same name, it will be overwritten --&gt;
+  &lt;xsl:for-each select=&quot;$doctree/classes/class[@package = current()/@name]&quot;&gt;
+      &lt;!--Processing &lt;xsl:value-of select=&quot;$class.name&quot;/&gt;&lt;xsl:text&gt;&#10;&lt;/xsl:text&gt; --&gt;
+    &lt;redirect:write file=&quot;{$output.dir}/{$package.dir}/{@name}.html&quot;&gt;
+      &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;class.details&quot;/&gt;
+    &lt;/redirect:write&gt;
+  &lt;/xsl:for-each&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- little trick to compute the classname for inner and non inner classes --&gt;
+&lt;!-- this is all in one line to avoid CRLF in the name --&gt;
+&lt;xsl:template match=&quot;class&quot; mode=&quot;class.name&quot;&gt;
+    &lt;xsl:if test=&quot;parent::class&quot;&gt;&lt;xsl:apply-templates select=&quot;parent::class&quot; mode=&quot;class.name&quot;/&gt;.&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/xsl:if&gt;&lt;xsl:if test=&quot;not(parent::class)&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/xsl:if&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template name=&quot;index.html&quot;&gt;
+&lt;HTML&gt;
+  &lt;HEAD&gt;&lt;TITLE&gt;Metrics Results.&lt;/TITLE&gt;&lt;/HEAD&gt;
+  &lt;FRAMESET cols=&quot;20%,80%&quot;&gt;
+    &lt;FRAMESET rows=&quot;30%,70%&quot;&gt;
+      &lt;FRAME src=&quot;overview-frame.html&quot; name=&quot;packageListFrame&quot;/&gt;
+      &lt;FRAME src=&quot;allclasses-frame.html&quot; name=&quot;classListFrame&quot;/&gt;
+    &lt;/FRAMESET&gt;
+    &lt;FRAME src=&quot;overview-summary.html&quot; name=&quot;classFrame&quot;/&gt;
+  &lt;/FRAMESET&gt;
+  &lt;noframes&gt;
+    &lt;H2&gt;Frame Alert&lt;/H2&gt;
+    &lt;P&gt;
+    This document is designed to be viewed using the frames feature. If you see this message, you are using a non-frame-capable web client.
+    &lt;/P&gt;
+  &lt;/noframes&gt;
+&lt;/HTML&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- this is the stylesheet css to use for nearly everything --&gt;
+&lt;xsl:template name=&quot;metrics-reference.html&quot;&gt;
+&lt;html&gt;
+&lt;head&gt;
+&lt;link title=&quot;Style&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;stylesheet.css&quot;/&gt;
+&lt;/head&gt;
+&lt;body style=&quot;text-align:justify;&quot;&gt;
+&lt;h2&gt;Metrics Reference&lt;/h2&gt;
+&lt;a href=&quot;#V(G)&quot;&gt;V(G)&lt;/a&gt; |
+&lt;a href=&quot;#LOC&quot;&gt;LOC&lt;/a&gt; |
+&lt;a href=&quot;#DIT&quot;&gt;DIT&lt;/a&gt; |
+&lt;a href=&quot;#NOA&quot;&gt;NOA&lt;/a&gt; |
+&lt;a href=&quot;#NRM&quot;&gt;NRM&lt;/a&gt; |
+&lt;a href=&quot;#NLM&quot;&gt;NLM&lt;/a&gt; |
+&lt;a href=&quot;#WMC&quot;&gt;WMC&lt;/a&gt; |
+&lt;a href=&quot;#RFC&quot;&gt;RFC&lt;/a&gt; |
+&lt;a href=&quot;#DAC&quot;&gt;DAC&lt;/a&gt; |
+&lt;a href=&quot;#FANOUT&quot;&gt;FANOUT&lt;/a&gt; |
+&lt;a href=&quot;#CBO&quot;&gt;CBO&lt;/a&gt; |
+&lt;a href=&quot;#LCOM&quot;&gt;LCOM&lt;/a&gt; |
+&lt;a href=&quot;#NOC&quot;&gt;NOC&lt;/a&gt;
+
+&lt;a name=&quot;V(G)&quot;/&gt;
+&lt;h3&gt;Cyclomatic Complexity - V(G)&lt;/h3&gt;
+This metric was introduced in the 1970s to measure the amount of control
+flow complexity or branching complexity in a module such as a
+subroutine. It gives the number of paths that may be taken through the
+code, and was initially developed to give some measure of the cost of
+producing a test case for the module by executing each path.
+&lt;p/&gt;
+Methods with a high cyclomatic complexity tend to be more difficult to
+understand and maintain. In general the more complex the methods of an
+application, the more difficult it will be to test it, and this will adversely
+affect its reliability.
+&lt;p/&gt;
+V(G) is a measure of the control flow complexity of a method or
+constructor.  It counts the number of branches in the body of the method,
+defined as:
+&lt;ul&gt;
+&lt;li&gt;while statements;&lt;/li&gt;
+&lt;li&gt;if statements;&lt;/li&gt;
+&lt;li&gt;for statements.&lt;/li&gt;
+&lt;/ul&gt;
+
+The metric can also be configured to count each case of a switch
+statement as well.
+
+&lt;a name=&quot;LOC&quot;/&gt;
+&lt;h3&gt;Lines of Code - LOC&lt;/h3&gt;
+
+This is perhaps the simplest of all the metrics to define and compute.
+Counting lines has a long history as a software metric dating from before
+the rise of structured programming, and it is still in widespread use today.
+The size of a method affects the ease with which it can be understood, its
+reusability and its maintainability. There are a variety of ways that the size
+can be calculated. These include counting all the lines of code, the number
+of statements, the blank lines of code, the lines of commentary, and the
+lines consisting only of syntax such as block delimiters.
+&lt;p/&gt;
+This metric can also be used for sizing other constructs as well, for
+example, the overall size of a Java class or package can be measured by
+counting the number of source lines it consists of.
+&lt;p/&gt;
+LOC can be used to determine the size of a compilation unit (source file),
+class or interface, method, constructor, or field.  It can be configured to
+ignore:
+&lt;ul&gt;
+&lt;li&gt;blank lines;&lt;/li&gt;
+&lt;li&gt;lines consisting only of comments;&lt;/li&gt;
+&lt;li&gt;lines consisting only of opening and closing braces.&lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;a name=&quot;DIT&quot;/&gt;
+&lt;h3&gt;Depth of Inheritance Hierarchy - DIT&lt;/h3&gt;
+
+This metric calculates how far down the inheritance hierarchy a class is
+declared. In Java all classes have java.lang.Object as their ultimate
+superclass, which is defined to have a depth of 1. So a class that
+immediately extends java.lang.Object has a metric value of 2; any of its
+subclasses will have a value of 3, and so on.
+&lt;p/&gt;
+A class that is deep within the tree inherits more methods and state
+variables, thereby increasing its complexity and making it difficult to
+predict its behavior. It can be harder to understand a system with many
+inheritance layers.
+&lt;p/&gt;
+DIT is defined for classes and interfaces:
+&lt;ul&gt;
+&lt;li&gt;all interface types have a depth of 1;&lt;/li&gt;
+&lt;li&gt;the class java.lang.Object has a depth of 1;&lt;/li&gt;
+&lt;li&gt;all other classes have a depth of 1 + the depth of their super class.&lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;a name=&quot;NOA&quot;/&gt;
+&lt;h3&gt;Number of Attributes - NOA&lt;/h3&gt;
+
+The number of distinct state variables in a class serves as one measure of
+its complexity. The more state a class represents the more difficult it is to
+maintain invariants for it. It also hinders comprehensibility and reuse.
+&lt;p/&gt;
+In Java, state can be exposed to subclasses through protected fields, which
+entails that the subclass also be aware of and maintain any invariants. This
+interference with the class's data encapsulation can be a source of defects
+and hidden dependencies between the state variables.
+&lt;p/&gt;
+NOA is defined for classes and interfaces.  It counts the number of fields
+declared in the class or interface.
+
+&lt;a name=&quot;NRM&quot;/&gt;
+&lt;h3&gt;Number of Remote Methods - NRM&lt;/h3&gt;
+
+NRM is defined for classes.  A remote method call is defined as an
+invocation of a method that is not declared in any of:
+&lt;ul&gt;
+&lt;li&gt;the class itself;&lt;/li&gt;
+&lt;li&gt;a class or interface that the class extends or implements;&lt;/li&gt;
+&lt;li&gt;a class or method that extends the class.&lt;/li&gt;
+&lt;/ul&gt;
+
+The value is the count of all the remote method calls in all of the methods
+and constructors of the class.
+
+&lt;a name=&quot;NLM&quot;/&gt;
+&lt;h3&gt;Number of Local Methods - NLM&lt;/h3&gt;
+
+NLM is defined for classes and interfaces.  A local method is defined as a
+method that is declared in the class or interface. NLM can be configured to
+include the local methods of all of the class's superclasses.  Methods with
+public, protected, package and private visibility can be independently
+counted by setting configuration parameters.
+
+&lt;a name=&quot;WMC&quot;/&gt;
+&lt;h3&gt;Weighted Methods per Class - WMC&lt;/h3&gt;
+
+If the number of methods in a class can be determined during the design
+and modeling phase of a project, it can be used as a predictor of how
+much time and effort is needed to develop, debug and maintain it. This
+metric can be further refined by incorporating a weighting for the
+complexity of each method. The usual weighting is given by the cyclomatic
+complexity of the method.
+&lt;p/&gt;
+The subclasses of a class inherit all of its public and protected methods,
+and possibly its package methods as well, so the number of methods a
+class has directly impacts the complexity of its subclasses. Classes with
+large numbers of methods are often specific to a particular application,
+reducing the ability to reuse them.
+&lt;p/&gt;
+The definition of WMC is based upon NLM, and it provides the same
+configuration parameters for counting inherited methods and of varying
+visibility. The main difference is that NLM always counts each method as 1,
+whereas WMC will weight each method. There are two weighting schemes:
+&lt;ul&gt;
+&lt;li&gt;V(G) the cyclomatic complexity of the method is used as its weight.
+   Methods from class files are given a V(G) of 1.&lt;/li&gt;
+&lt;li&gt;the arity, or the number of parameters of the method are used to
+   determine the weight.&lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;a name=&quot;RFC&quot;/&gt;
+&lt;h3&gt;Response For Class - RFC&lt;/h3&gt;
+
+The response set of a class is the set of all methods that can be invoked as
+a result of a message sent to an object of the class. This includes methods
+in the class's inheritance hierarchy and methods that can be invoked on
+other objects. The Response For Class metric is defined to be size of the
+response set for the class. A class which provides a larger response set is
+considered to be more complex than one with a smaller response set.
+&lt;p/&gt;
+One reason for this is that if a method call on a class can result in a large
+number of different method calls on the target and other classes, then it
+can be harder to test the behavior of the class and debug problems. It will
+typically require a deeper understanding of the potential interactions that
+objects of the class can have with the rest of the system.
+&lt;p/&gt;
+RFC is defined as the sum of NLM and NRM for the class.  The local methods
+include all of the public, protected, package and private methods, but not
+methods declared only in a superclass.
+
+&lt;a name=&quot;DAC&quot;/&gt;
+&lt;h3&gt;Data Abstraction Coupling - DAC&lt;/h3&gt;
+
+DAC is defined for classes and interfaces.  It counts the number of reference
+types that are used in the field declarations of the class or interface.  The
+component types of arrays are also counted.  Any field with a type that is
+either a supertype or a subtype of the class is not counted.
+
+&lt;a name=&quot;FANOUT&quot;/&gt;
+&lt;h3&gt;Fan Out - FANOUT&lt;/h3&gt;
+
+FANOUT is defined for classes and interfaces, constructors and methods. It
+counts the number of reference types that are used in:
+&lt;ul&gt;
+&lt;li&gt;field declarations;&lt;/li&gt;
+&lt;li&gt;formal parameters and return types;&lt;/li&gt;
+&lt;li&gt;throws declarations;&lt;/li&gt;
+&lt;li&gt;local variables.&lt;/li&gt;
+&lt;/ul&gt;
+
+The component types of arrays are also counted. Any type that is either a
+supertype or a subtype of the class is not counted.
+
+&lt;a name=&quot;CBO&quot;/&gt;
+&lt;h3&gt;Coupling Between Objects - CBO&lt;/h3&gt;
+
+When one object or class uses another object or class they are said to be
+coupled. One major source of coupling is that between a superclass and a
+subclass. A coupling is also introduced when a method or field in another
+class is accessed, or when an object of another class is passed into or out
+of a method invocation. Coupling Between Objects is a measure of the
+non-inheritance coupling between two objects.
+&lt;p/&gt;
+A high value of coupling reduces the modularity of the class and makes
+reuse more difficult. The more independent a class is the more likely it is
+that it will be possible to reuse it in another part of the system. When a
+class is coupled to another class it becomes sensitive to changes in that
+class, thereby making maintenance for difficult. In addition, a class that is
+overly dependent on other classes can be difficult to understand and test in
+isolation.
+&lt;p/&gt;
+CBO is defined for classes and interfaces, constructors and methods. It
+counts the number of reference types that are used in:
+&lt;ul&gt;
+&lt;li&gt;field declarations&lt;/li&gt;
+&lt;li&gt;formal parameters and return types&lt;/li&gt;
+&lt;li&gt;throws declarations&lt;/li&gt;
+&lt;li&gt;local variables&lt;/li&gt;
+&lt;/ul&gt;
+
+It also counts:
+&lt;ul&gt;
+&lt;li&gt;types from which field and method selections are made&lt;/li&gt;
+&lt;/ul&gt;
+
+The component types of arrays are also counted. Any type that is either a
+supertype or a subtype of the class is not counted.
+
+&lt;a name=&quot;LCOM&quot;/&gt;
+&lt;h3&gt;Lack of Cohesion Of Methods - LCOM&lt;/h3&gt;
+
+The cohesion of a class is the degree to which its methods are related to
+each other. It is determined by examining the pattern of state variable
+accesses within the set of methods. If all the methods access the same state
+variables then they have high cohesion; if they access disjoint sets of
+variables then the cohesion is low. An extreme example of low cohesion
+would be if none of the methods accessed any of the state variables.
+
+If a class exhibits low method cohesion it indicates that the design of the
+class has probably been partitioned incorrectly, and could benefit by being
+split into more classes with individually higher cohesion. On the other
+hand, a high value of cohesion (a low lack of cohesion) implies that the
+class is well designed. A cohesive class will tend to provide a high degree
+of encapsulation, whereas a lack of cohesion decreases encapsulation and
+increases complexity.
+&lt;p/&gt;
+Another form of cohesion that is useful for Java programs is cohesion
+between nested and enclosing classes. A nested class that has very low
+cohesion with its enclosing class would probably better designed as a peer
+class rather than a nested class.
+&lt;p/&gt;
+LCOM is defined for classes. Operationally, LCOM takes each pair of
+methods in the class and determines the set of fields they each access. If
+they have disjoint sets of field accesses increase the count P by one. If they
+share at least one field access then increase Q by one. After considering
+each pair of methods,
+LCOM = (P &gt; Q) ? (P - Q) : 0
+&lt;p/&gt;
+Indirect access to fields via local methods can be considered by setting a
+metric configuration parameter.
+
+&lt;a name=&quot;NOC&quot;/&gt;
+&lt;h3&gt;Number Of Classes - NOC&lt;/h3&gt;
+
+The overall size of the system can be estimated by calculating the number
+of classes it contains. A large system with more classes is more complex
+than a smaller one because the number of potential interactions between
+objects is higher. This reduces the comprehensibility of the system which
+in turn makes it harder to test, debug and maintain.
+&lt;p/&gt;
+If the number of classes in the system can be projected during the initial
+design phase of the project it can serve as a base for estimating the total
+effort and cost of developing, debugging and maintaining the system.
+&lt;p/&gt;
+The NOC metric can also usefully be applied at the package and class level
+as well as the total system.
+&lt;p/&gt;
+NOCL is defined for class and interfaces. It counts the number of classes or
+interfaces that are declared. This is usually 1, but nested class declarations
+will increase this number.
+&lt;/body&gt;
+&lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- this is the stylesheet css to use for nearly everything --&gt;
+&lt;xsl:template name=&quot;stylesheet.css&quot;&gt;
+    .bannercell {
+      border: 0px;
+      padding: 0px;
+    }
+    body {
+      margin-left: 10;
+      margin-right: 10;
+      font:normal 80% arial,helvetica,sanserif;
+      background-color:#FFFFFF;
+      color:#000000;
+    }
+    .a td {
+      background: #efefef;
+    }
+    .b td {
+      background: #fff;
+    }
+    th, td {
+      text-align: left;
+      vertical-align: top;
+    }
+    th {
+      font-weight:bold;
+      background: #ccc;
+      color: black;
+    }
+    table, th, td {
+      font-size:100%;
+      border: none
+    }
+    table.log tr td, tr th {
+
+    }
+    h2 {
+      font-weight:bold;
+      font-size:140%;
+      margin-bottom: 5;
+    }
+    h3 {
+      font-size:100%;
+      font-weight:bold;
+      background: #525D76;
+      color: white;
+      text-decoration: none;
+      padding: 5px;
+      margin-right: 2px;
+      margin-left: 2px;
+      margin-bottom: 0;
+    }
+    .Error {
+      font-weight:bold; color:red;
+    }
+
+&lt;/xsl:template&gt;
+
+&lt;!-- print the metrics of the class --&gt;
+&lt;xsl:template match=&quot;class&quot; mode=&quot;class.details&quot;&gt;
+  &lt;!--xsl:variable name=&quot;package.name&quot; select=&quot;(ancestor::package)[last()]/@name&quot;/--&gt;
+  &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@package&quot;/&gt;
+  &lt;HTML&gt;
+    &lt;HEAD&gt;
+      &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+        &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;$package.name&quot;/&gt;
+      &lt;/xsl:call-template&gt;
+    &lt;/HEAD&gt;
+    &lt;BODY&gt;
+      &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+
+      &lt;H3&gt;Class &lt;xsl:if test=&quot;not($package.name = 'unnamed package')&quot;&gt;&lt;xsl:value-of select=&quot;$package.name&quot;/&gt;.&lt;/xsl:if&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/H3&gt;
+      &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+        &lt;xsl:call-template name=&quot;all.metrics.header&quot;/&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.metrics&quot;/&gt;
+      &lt;/table&gt;
+
+      &lt;H3&gt;Methods&lt;/H3&gt;
+      &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+        &lt;xsl:call-template name=&quot;method.metrics.header&quot;/&gt;
+        &lt;xsl:apply-templates select=&quot;method&quot; mode=&quot;print.metrics&quot;/&gt;
+      &lt;/table&gt;
+
+      &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+    &lt;/BODY&gt;
+  &lt;/HTML&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- list of classes in a package --&gt;
+&lt;xsl:template match=&quot;package&quot; mode=&quot;classes.list&quot;&gt;
+  &lt;HTML&gt;
+    &lt;HEAD&gt;
+      &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+        &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;@name&quot;/&gt;
+      &lt;/xsl:call-template&gt;
+    &lt;/HEAD&gt;
+    &lt;BODY&gt;
+      &lt;table width=&quot;100%&quot;&gt;
+        &lt;tr&gt;
+          &lt;td nowrap=&quot;nowrap&quot;&gt;
+            &lt;H2&gt;&lt;a href=&quot;package-summary.html&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/H2&gt;
+          &lt;/td&gt;
+        &lt;/tr&gt;
+      &lt;/table&gt;
+
+      &lt;H2&gt;Classes&lt;/H2&gt;
+      &lt;TABLE WIDTH=&quot;100%&quot;&gt;
+        &lt;!-- xalan-nodeset:nodeset for Xalan 1.2.2 --&gt;
+            &lt;xsl:for-each select=&quot;$doctree/classes/class[@package = current()/@name]&quot;&gt;
+                &lt;xsl:sort select=&quot;@name&quot;/&gt;
+          &lt;tr&gt;
+            &lt;td nowrap=&quot;nowrap&quot;&gt;
+              &lt;a href=&quot;{@name}.html&quot; target=&quot;classFrame&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;
+            &lt;/td&gt;
+          &lt;/tr&gt;
+            &lt;/xsl:for-each&gt;
+      &lt;/TABLE&gt;
+    &lt;/BODY&gt;
+  &lt;/HTML&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+  Creates an all-classes.html file that contains a link to all package-summary.html
+  on each class.
+--&gt;
+&lt;xsl:template match=&quot;metrics&quot; mode=&quot;all.classes&quot;&gt;
+  &lt;html&gt;
+    &lt;head&gt;
+      &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+        &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;''&quot;/&gt;
+      &lt;/xsl:call-template&gt;
+    &lt;/head&gt;
+    &lt;body&gt;
+      &lt;h2&gt;Classes&lt;/h2&gt;
+      &lt;table width=&quot;100%&quot;&gt;
+          &lt;xsl:for-each select=&quot;$doctree/classes/class&quot;&gt;
+              &lt;xsl:sort select=&quot;@name&quot;/&gt;
+              &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;all.classes&quot;/&gt;
+          &lt;/xsl:for-each&gt;
+      &lt;/table&gt;
+    &lt;/body&gt;
+  &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;class&quot; mode=&quot;all.classes&quot;&gt;
+    &lt;xsl:variable name=&quot;package.name&quot; select=&quot;@package&quot;/&gt;
+    &lt;xsl:variable name=&quot;class.name&quot; select=&quot;@name&quot;/&gt;
+  &lt;tr&gt;
+    &lt;td nowrap=&quot;nowrap&quot;&gt;
+      &lt;a target=&quot;classFrame&quot;&gt;
+        &lt;xsl:attribute name=&quot;href&quot;&gt;
+          &lt;xsl:if test=&quot;not($package.name='unnamed package')&quot;&gt;
+            &lt;xsl:value-of select=&quot;translate($package.name,'.','/')&quot;/&gt;&lt;xsl:text&gt;/&lt;/xsl:text&gt;
+          &lt;/xsl:if&gt;
+          &lt;xsl:value-of select=&quot;$class.name&quot;/&gt;&lt;xsl:text&gt;.html&lt;/xsl:text&gt;
+        &lt;/xsl:attribute&gt;
+        &lt;xsl:value-of select=&quot;$class.name&quot;/&gt;
+      &lt;/a&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!--
+  Creates an html file that contains a link to all package-summary.html files on
+  each package existing on testsuites.
+  @bug there will be a problem here, I don't know yet how to handle unnamed package :(
+--&gt;
+&lt;xsl:template match=&quot;metrics&quot; mode=&quot;all.packages&quot;&gt;
+  &lt;html&gt;
+    &lt;head&gt;
+      &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+        &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;./package/@name&quot;/&gt;
+      &lt;/xsl:call-template&gt;
+    &lt;/head&gt;
+    &lt;body&gt;
+      &lt;h2&gt;&lt;a href=&quot;overview-summary.html&quot; target=&quot;classFrame&quot;&gt;Home&lt;/a&gt;&lt;/h2&gt;
+      &lt;h2&gt;Packages&lt;/h2&gt;
+        &lt;table width=&quot;100%&quot;&gt;
+          &lt;xsl:apply-templates select=&quot;.//package[not(./@name = 'unnamed package')]&quot; mode=&quot;all.packages&quot;&gt;
+            &lt;xsl:sort select=&quot;@name&quot;/&gt;
+          &lt;/xsl:apply-templates&gt;
+        &lt;/table&gt;
+    &lt;/body&gt;
+  &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;package&quot; mode=&quot;all.packages&quot;&gt;
+  &lt;tr&gt;
+    &lt;td nowrap=&quot;nowrap&quot;&gt;
+      &lt;a href=&quot;{translate(@name,'.','/')}/package-summary.html&quot; target=&quot;classFrame&quot;&gt;
+        &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+      &lt;/a&gt;
+    &lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;xsl:template match=&quot;metrics&quot; mode=&quot;overview.packages&quot;&gt;
+  &lt;html&gt;
+    &lt;head&gt;
+      &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+        &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;''&quot;/&gt;
+      &lt;/xsl:call-template&gt;
+    &lt;/head&gt;
+    &lt;body onload=&quot;open('allclasses-frame.html','classListFrame')&quot;&gt;
+    &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+    &lt;h3&gt;Summary&lt;/h3&gt;
+    &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+    &lt;tr&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#V(G)&quot;&gt;V(G)&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#LOC&quot;&gt;LOC&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#DIT&quot;&gt;DIT&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#NOA&quot;&gt;NOA&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#NRM&quot;&gt;NRM&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#NLM&quot;&gt;NLM&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#WMC&quot;&gt;WMC&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#RFC&quot;&gt;RFC&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#DAC&quot;&gt;DAC&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#FANOUT&quot;&gt;FANOUT&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#CBO&quot;&gt;CBO&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#LCOM&quot;&gt;LCOM&lt;/a&gt;&lt;/th&gt;
+      &lt;th&gt;&lt;a href=&quot;metrics-reference.html#NOCL&quot;&gt;NOCL&lt;/a&gt;&lt;/th&gt;
+    &lt;/tr&gt;
+    &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.metrics&quot;/&gt;
+    &lt;/table&gt;
+    &lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;
+    &lt;tr&gt;
+    &lt;td style=&quot;text-align: justify;&quot;&gt;
+    Note: Metrics evaluate the quality of software by analyzing the program source and quantifying
+    various kind of complexity. Complexity is a common source of problems and defects in software.
+    High complexity makes it more difficult to develop, understand, maintain, extend, test and debug
+    a program.
+    &lt;p/&gt;
+    The primary use of metrics is to focus your attention on those parts of code that potentially are
+    complexity hot spots. Once the complex areas your program have been uncovered, you can take remedial
+    actions.
+    For additional information about metrics and their meaning, please consult
+    Metamata Metrics manual.
+    &lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;/table&gt;
+
+    &lt;h3&gt;Packages&lt;/h3&gt;
+    &lt;table border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+      &lt;xsl:call-template name=&quot;all.metrics.header&quot;/&gt;
+      &lt;xsl:for-each select=&quot;.//package[not(@name = 'unnamed package')]&quot;&gt;
+        &lt;xsl:sort select=&quot;@name&quot; order=&quot;ascending&quot;/&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.metrics&quot;/&gt;
+      &lt;/xsl:for-each&gt;
+    &lt;/table&gt;
+    &lt;!-- @bug there could some classes at this level (classes in unnamed package) --&gt;
+    &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+    &lt;/body&gt;
+    &lt;/html&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;package&quot; mode=&quot;package.summary&quot;&gt;
+  &lt;HTML&gt;
+    &lt;HEAD&gt;
+      &lt;xsl:call-template name=&quot;create.stylesheet.link&quot;&gt;
+        &lt;xsl:with-param name=&quot;package.name&quot; select=&quot;@name&quot;/&gt;
+      &lt;/xsl:call-template&gt;
+    &lt;/HEAD&gt;
+    &lt;body onload=&quot;open('package-frame.html','classListFrame')&quot;&gt;
+      &lt;xsl:call-template name=&quot;pageHeader&quot;/&gt;
+      &lt;!-- create an anchor to this package name --&gt;
+      &lt;h3&gt;Package &lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/h3&gt;
+
+      &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+        &lt;xsl:call-template name=&quot;all.metrics.header&quot;/&gt;
+        &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.metrics&quot;/&gt;
+      &lt;/table&gt;
+
+      &lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;
+      &lt;tr&gt;
+      &lt;td style=&quot;text-align: justify;&quot;&gt;
+      Note: Metrics evaluate the quality of software by analyzing the program source and quantifying
+      various kind of complexity. Complexity is a common source of problems and defects in software.
+      High complexity makes it more difficult to develop, understand, maintain, extend, test and debug
+      a program.
+      &lt;p/&gt;
+      The primary use of metrics is to focus your attention on those parts of code that potentially are
+      complexity hot spots. Once the complex areas your program have been uncovered, you can take remedial
+      actions.
+      For additional information about metrics and their meaning, please consult
+      Metamata Metrics manual.
+      &lt;/td&gt;
+      &lt;/tr&gt;
+      &lt;/table&gt;
+
+      &lt;xsl:variable name=&quot;classes-in-package&quot; select=&quot;$doctree/classes/class[@package = current()/@name]&quot;/&gt;
+      &lt;xsl:if test=&quot;count($classes-in-package) &gt; 0&quot;&gt;
+        &lt;H3&gt;Classes&lt;/H3&gt;
+        &lt;table class=&quot;log&quot; border=&quot;0&quot; cellpadding=&quot;5&quot; cellspacing=&quot;2&quot; width=&quot;100%&quot;&gt;
+          &lt;xsl:call-template name=&quot;all.metrics.header&quot;/&gt;
+          &lt;xsl:for-each select=&quot;$classes-in-package&quot;&gt;
+                &lt;xsl:sort select=&quot;@name&quot;/&gt;
+                &lt;xsl:apply-templates select=&quot;.&quot; mode=&quot;print.metrics&quot;/&gt;
+          &lt;/xsl:for-each&gt;
+        &lt;/table&gt;
+      &lt;/xsl:if&gt;
+
+      &lt;xsl:call-template name=&quot;pageFooter&quot;/&gt;
+    &lt;/body&gt;
+  &lt;/HTML&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!--
+    transform string like a.b.c to ../../../
+    @param path the path to transform into a descending directory path
+--&gt;
+&lt;xsl:template name=&quot;path&quot;&gt;
+  &lt;xsl:param name=&quot;path&quot;/&gt;
+  &lt;xsl:if test=&quot;contains($path,'.')&quot;&gt;
+    &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+    &lt;xsl:call-template name=&quot;path&quot;&gt;
+      &lt;xsl:with-param name=&quot;path&quot;&gt;&lt;xsl:value-of select=&quot;substring-after($path,'.')&quot;/&gt;&lt;/xsl:with-param&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:if&gt;
+  &lt;xsl:if test=&quot;not(contains($path,'.')) and not($path = '')&quot;&gt;
+    &lt;xsl:text&gt;../&lt;/xsl:text&gt;
+  &lt;/xsl:if&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- create the link to the stylesheet based on the package name --&gt;
+&lt;xsl:template name=&quot;create.stylesheet.link&quot;&gt;
+  &lt;xsl:param name=&quot;package.name&quot;/&gt;
+  &lt;LINK REL =&quot;stylesheet&quot; TYPE=&quot;text/css&quot; TITLE=&quot;Style&quot;&gt;&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:if test=&quot;not($package.name = 'unnamed package')&quot;&gt;&lt;xsl:call-template name=&quot;path&quot;&gt;&lt;xsl:with-param name=&quot;path&quot; select=&quot;$package.name&quot;/&gt;&lt;/xsl:call-template&gt;&lt;/xsl:if&gt;stylesheet.css&lt;/xsl:attribute&gt;&lt;/LINK&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- Page Header --&gt;
+&lt;xsl:template name=&quot;pageHeader&quot;&gt;
+
+  &lt;!-- jakarta logo --&gt;
+  &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%&quot;&gt;
+  &lt;tr&gt;
+    &lt;td class=&quot;bannercell&quot; rowspan=&quot;2&quot;&gt;
+      &lt;a href=&quot;<A HREF="http://jakarta.apache.org/">http://jakarta.apache.org/</A>&quot;&gt;
+      &lt;img src=&quot;<A HREF="http://jakarta.apache.org/images/jakarta-logo.gif">http://jakarta.apache.org/images/jakarta-logo.gif</A>&quot; alt=&quot;<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>&quot; align=&quot;left&quot; border=&quot;0&quot;/&gt;
+      &lt;/a&gt;
+    &lt;/td&gt;
+    &lt;td style=&quot;text-align:right&quot;&gt;&lt;h2&gt;Source Code Metrics&lt;/h2&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+    &lt;td style=&quot;text-align:right&quot;&gt;Designed for use with &lt;a href='<A HREF="http://www.webgain.com/products/quality_analyzer/">http://www.webgain.com/products/quality_analyzer/</A>'&gt;Webgain QA/Metamata Metrics&lt;/a&gt; and &lt;a href='<A HREF="http://jakarta.apache.org">http://jakarta.apache.org</A>'&gt;Ant&lt;/a&gt;.&lt;/td&gt;
+    &lt;/tr&gt;
+  &lt;/table&gt;
+  &lt;hr size=&quot;1&quot;/&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- Page Footer --&gt;
+&lt;xsl:template name=&quot;pageFooter&quot;&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- class header --&gt;
+&lt;xsl:template name=&quot;all.metrics.header&quot;&gt;
+  &lt;tr&gt;
+    &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+    &lt;th nowrap=&quot;nowrap&quot;&gt;V(G)&lt;/th&gt;
+    &lt;th&gt;LOC&lt;/th&gt;
+    &lt;th&gt;DIT&lt;/th&gt;
+    &lt;th&gt;NOA&lt;/th&gt;
+    &lt;th&gt;NRM&lt;/th&gt;
+    &lt;th&gt;NLM&lt;/th&gt;
+    &lt;th&gt;WMC&lt;/th&gt;
+    &lt;th&gt;RFC&lt;/th&gt;
+    &lt;th&gt;DAC&lt;/th&gt;
+    &lt;th&gt;FANOUT&lt;/th&gt;
+    &lt;th&gt;CBO&lt;/th&gt;
+    &lt;th&gt;LCOM&lt;/th&gt;
+    &lt;th&gt;NOCL&lt;/th&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- method header --&gt;
+&lt;xsl:template name=&quot;method.metrics.header&quot;&gt;
+  &lt;tr&gt;
+    &lt;th width=&quot;80%&quot;&gt;Name&lt;/th&gt;
+    &lt;th nowrap=&quot;nowrap&quot;&gt;V(G)&lt;/th&gt;
+    &lt;th&gt;LOC&lt;/th&gt;
+    &lt;th&gt;FANOUT&lt;/th&gt;
+    &lt;th&gt;CBO&lt;/th&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- method information --&gt;
+&lt;xsl:template match=&quot;method&quot; mode=&quot;print.metrics&quot;&gt;
+  &lt;tr&gt;
+    &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@name&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@vg&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@loc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@fanout&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@cbo&quot;/&gt;&lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- class information --&gt;
+&lt;xsl:template match=&quot;class&quot; mode=&quot;print.metrics&quot;&gt;
+  &lt;tr&gt;
+    &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+    &lt;td&gt;&lt;a href=&quot;{@name}.html&quot;&gt;&lt;xsl:value-of select=&quot;@name&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@vg&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@loc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@dit&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@noa&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@nrm&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@nlm&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@wmc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@rfc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@dac&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@fanout&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@cbo&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@lcom&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@nocl&quot;/&gt;&lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;file|package&quot; mode=&quot;print.metrics&quot;&gt;
+  &lt;tr&gt;
+    &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+    &lt;td&gt;
+    &lt;a href=&quot;{translate(@name,'.','/')}/package-summary.html&quot; target=&quot;classFrame&quot;&gt;
+    &lt;xsl:value-of select=&quot;@name&quot;/&gt;
+    &lt;/a&gt;
+    &lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@vg&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@loc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@dit&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@noa&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@nrm&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@nlm&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@wmc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@rfc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@dac&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@fanout&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@cbo&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@lcom&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;@nocl&quot;/&gt;&lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;xsl:template match=&quot;metrics&quot; mode=&quot;print.metrics&quot;&gt;
+  &lt;tr&gt;
+    &lt;xsl:call-template name=&quot;alternate-row&quot;/&gt;
+      &lt;!-- the global metrics is the top package metrics --&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@vg&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@loc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@dit&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@noa&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@nrm&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@nlm&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@wmc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@rfc&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@dac&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@fanout&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@cbo&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@lcom&quot;/&gt;&lt;/td&gt;
+    &lt;td&gt;&lt;xsl:apply-templates select=&quot;./package/@nocl&quot;/&gt;&lt;/td&gt;
+  &lt;/tr&gt;
+&lt;/xsl:template&gt;
+
+&lt;!-- alternated row style --&gt;
+&lt;xsl:template name=&quot;alternate-row&quot;&gt;
+&lt;xsl:attribute name=&quot;class&quot;&gt;
+  &lt;xsl:if test=&quot;position() mod 2 = 1&quot;&gt;a&lt;/xsl:if&gt;
+  &lt;xsl:if test=&quot;position() mod 2 = 0&quot;&gt;b&lt;/xsl:if&gt;
+&lt;/xsl:attribute&gt;
+&lt;/xsl:template&gt;
+
+
+&lt;!-- how to display the metrics with their max value --&gt;
+&lt;!-- @todo the max values must be external to the xsl --&gt;
+
+  &lt;xsl:template match=&quot;@vg&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$vg.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@loc&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$loc.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@dit&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$dit.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@noa&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$noa.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@nrm&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$nrm.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@nlm&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$nlm.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@wmc&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$wmc.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@rfc&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$rfc.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@dac&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$dac.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@fanout&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$fanout.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@cbo&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$cbo.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@lcom&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$lcom.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;@nocl&quot;&gt;
+    &lt;xsl:call-template name=&quot;display-value&quot;&gt;
+      &lt;xsl:with-param name=&quot;value&quot; select=&quot;current()&quot;/&gt;
+      &lt;xsl:with-param name=&quot;max&quot; select=&quot;$nocl.max&quot;/&gt;
+    &lt;/xsl:call-template&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template name=&quot;display-value&quot;&gt;
+    &lt;xsl:param name=&quot;value&quot;/&gt;
+    &lt;xsl:param name=&quot;max&quot;/&gt;
+    &lt;xsl:if test=&quot;$value &gt; $max&quot;&gt;
+      &lt;xsl:attribute name=&quot;class&quot;&gt;Error&lt;/xsl:attribute&gt;
+    &lt;/xsl:if&gt;
+    &lt;xsl:value-of select=&quot;$value&quot;/&gt;
+  &lt;/xsl:template&gt;
+
+&lt;/xsl:stylesheet&gt;
+

Added: branches/eschnepel/ant/etc/tagdiff.xsl
===================================================================
--- branches/eschnepel/ant/etc/tagdiff.xsl	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/etc/tagdiff.xsl	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,178 @@
+&lt;!--
+   Licensed to the Apache Software Foundation (ASF) under one or more
+   contributor license agreements.  See the NOTICE file distributed with
+   this work for additional information regarding copyright ownership.
+   The ASF licenses this file to You under the Apache License, Version 2.0
+   (the &quot;License&quot;); you may not use this file except in compliance with
+   the License.  You may obtain a copy of the License at
+
+       <A HREF="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</A>
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
+--&gt;
+&lt;!-- a stylesheet to display changelogs ala netbeans --&gt;
+&lt;xsl:stylesheet
+    xmlns:xsl=&quot;<A HREF="http://www.w3.org/1999/XSL/Transform">http://www.w3.org/1999/XSL/Transform</A>&quot;
+    version=&quot;1.0&quot;&gt;
+  &lt;xsl:param name=&quot;title&quot;/&gt;
+  &lt;xsl:param name=&quot;module&quot;/&gt;
+  &lt;xsl:param name=&quot;cvsweb&quot;/&gt;
+
+  &lt;xsl:output method=&quot;html&quot; indent=&quot;yes&quot;/&gt;
+
+  &lt;!-- Copy standard document elements.  Elements that
+       should be ignored must be filtered by apply-templates
+       tags. --&gt;
+  &lt;xsl:template match=&quot;*&quot;&gt;
+    &lt;xsl:copy&gt;
+      &lt;xsl:copy-of select=&quot;attribute::*[. != '']&quot;/&gt;
+      &lt;xsl:apply-templates/&gt;
+    &lt;/xsl:copy&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;tagdiff&quot;&gt;
+    &lt;html&gt;
+      &lt;head&gt;
+        &lt;title&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/title&gt;
+        &lt;style type=&quot;text/css&quot;&gt;
+          body, p {
+          font-family: verdana,arial,helvetica;
+          font-size: 80%;
+          color:#000000;
+          }
+	  .dateAndAuthor {
+          font-family: verdana,arial,helvetica;
+          font-size: 80%;
+          font-weight: bold;
+          text-align:left;
+          background:#a6caf0;
+	  }
+          tr, td{
+          font-family: verdana,arial,helvetica;
+          font-size: 80%;
+          background:#eeeee0;
+          }	  
+	  &lt;/style&gt; 
+      &lt;/head&gt;
+      &lt;body link=&quot;#000000&quot; alink=&quot;#000000&quot; vlink=&quot;#000000&quot; text=&quot;#000000&quot;&gt;       
+          &lt;h1&gt;
+            &lt;a name=&quot;top&quot;&gt;&lt;xsl:value-of select=&quot;$title&quot;/&gt;&lt;/a&gt;
+          &lt;/h1&gt;
+          Tagdiff between &lt;xsl:value-of select=&quot;@startTag&quot;/&gt; &lt;xsl:value-of select=&quot;@startDate&quot;/&gt; and
+			&lt;xsl:value-of select=&quot;@endTag&quot;/&gt; &lt;xsl:value-of select=&quot;@endDate&quot;/&gt;
+          &lt;p align=&quot;right&quot;&gt;Designed for use with &lt;a href=&quot;<A HREF="http://ant.apache.org/">http://ant.apache.org/</A>&quot;&gt;Ant&lt;/a&gt;.&lt;/p&gt;
+          &lt;hr size=&quot;2&quot;/&gt;
+	&lt;a name=&quot;TOP&quot;/&gt;
+	&lt;table width=&quot;100%&quot;&gt;
+		&lt;tr&gt;
+			&lt;td align=&quot;right&quot;&gt;
+				&lt;a href=&quot;#New&quot;&gt;New Files&lt;/a&gt; |
+				&lt;a href=&quot;#Modified&quot;&gt;Modified Files&lt;/a&gt; |
+				&lt;a href=&quot;#Removed&quot;&gt;Removed Files&lt;/a&gt;
+			&lt;/td&gt;
+		&lt;/tr&gt;
+	&lt;/table&gt;
+        &lt;table border=&quot;0&quot; width=&quot;100%&quot; cellpadding=&quot;3&quot; cellspacing=&quot;1&quot;&gt;
+		&lt;xsl:call-template name=&quot;show-entries&quot;&gt;
+			&lt;xsl:with-param name=&quot;title&quot;&gt;New Files&lt;/xsl:with-param&gt;
+			&lt;xsl:with-param name=&quot;anchor&quot;&gt;New&lt;/xsl:with-param&gt;
+			&lt;xsl:with-param name=&quot;entries&quot; select=&quot;.//entry[file/revision][not(file/prevrevision)]&quot;/&gt;
+		&lt;/xsl:call-template&gt;
+
+		&lt;xsl:call-template name=&quot;show-entries&quot;&gt;
+			&lt;xsl:with-param name=&quot;title&quot;&gt;Modified Files&lt;/xsl:with-param&gt;
+			&lt;xsl:with-param name=&quot;anchor&quot;&gt;Modified&lt;/xsl:with-param&gt;
+			&lt;xsl:with-param name=&quot;entries&quot; select=&quot;.//entry[file/revision][file/prevrevision]&quot;/&gt;
+		&lt;/xsl:call-template&gt;
+
+		&lt;!-- change to entries select to address bug #36827 --&gt;
+		&lt;xsl:call-template name=&quot;show-entries&quot;&gt;
+			&lt;xsl:with-param name=&quot;title&quot;&gt;Removed Files&lt;/xsl:with-param&gt;
+			&lt;xsl:with-param name=&quot;anchor&quot;&gt;Removed&lt;/xsl:with-param&gt;
+			&lt;xsl:with-param name=&quot;entries&quot; select=&quot;.//entry[not(file/revision)][file/prevrevision]&quot;/&gt;
+		&lt;/xsl:call-template&gt;
+        &lt;/table&gt;
+        
+      &lt;/body&gt;
+    &lt;/html&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template name=&quot;show-entries&quot;&gt;
+	&lt;xsl:param name=&quot;title&quot;/&gt;
+	&lt;xsl:param name=&quot;anchor&quot;/&gt;
+	&lt;xsl:param name=&quot;entries&quot;/&gt;
+	&lt;tr&gt;
+		&lt;td colspan=&quot;2&quot; class=&quot;dateAndAuthor&quot;&gt;
+			&lt;a&gt;
+				&lt;xsl:attribute name=&quot;name&quot;&gt;&lt;xsl:value-of select=&quot;$anchor&quot;/&gt;&lt;/xsl:attribute&gt;
+				&lt;xsl:value-of select=&quot;$title&quot;/&gt; - &lt;xsl:value-of select=&quot;count($entries)&quot;/&gt; entries
+			&lt;/a&gt;
+			&lt;a href=&quot;#TOP&quot;&gt;(back to top)&lt;/a&gt;
+		&lt;/td&gt;
+	&lt;/tr&gt;
+	&lt;tr&gt;
+		&lt;td width=&quot;20&quot;&gt;
+			&lt;xsl:text&gt;    &lt;/xsl:text&gt;
+		&lt;/td&gt;
+		&lt;td&gt;
+		        &lt;ul&gt;
+				&lt;xsl:apply-templates select=&quot;$entries&quot;/&gt;
+			&lt;/ul&gt;
+		&lt;/td&gt;
+	&lt;/tr&gt;
+  &lt;/xsl:template&gt;  
+
+  &lt;xsl:template match=&quot;entry&quot;&gt;
+	&lt;xsl:apply-templates select=&quot;file&quot;/&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;date&quot;&gt;
+    &lt;i&gt;&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/i&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;time&quot;&gt;
+    &lt;i&gt;&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/i&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;author&quot;&gt;
+    &lt;i&gt;
+      &lt;a&gt;
+        &lt;xsl:attribute name=&quot;href&quot;&gt;mailto:&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;/xsl:attribute&gt;
+        &lt;xsl:value-of select=&quot;.&quot;/&gt;
+      &lt;/a&gt;
+    &lt;/i&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;xsl:template match=&quot;file&quot;&gt;
+    &lt;li&gt;
+      &lt;a target=&quot;_new&quot;&gt;
+        &lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:value-of select=&quot;$cvsweb&quot;/&gt;&lt;xsl:value-of select=&quot;$module&quot; /&gt;/&lt;xsl:value-of select=&quot;name&quot; /&gt;&lt;/xsl:attribute&gt;
+        &lt;xsl:value-of select=&quot;name&quot; /&gt;
+      &lt;/a&gt;
+      &lt;xsl:if test=&quot;string-length(prevrevision) &gt; 0 or string-length(revision) &gt; 0&quot;&gt;
+      &lt;xsl:text&gt; &lt;/xsl:text&gt;
+      &lt;a target=&quot;_new&quot;&gt;
+        &lt;xsl:choose&gt;
+          &lt;xsl:when test=&quot;string-length(prevrevision) = 0 &quot;&gt;
+            &lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:value-of select=&quot;$cvsweb&quot;/&gt;&lt;xsl:value-of select=&quot;$module&quot; /&gt;/&lt;xsl:value-of select=&quot;name&quot; /&gt;?rev=&lt;xsl:value-of select=&quot;revision&quot; /&gt;&amp;content-type=text/x-cvsweb-markup&lt;/xsl:attribute&gt;
+          &lt;/xsl:when&gt;
+          &lt;xsl:otherwise&gt;
+            &lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:value-of select=&quot;$cvsweb&quot;/&gt;&lt;xsl:value-of select=&quot;$module&quot; /&gt;/&lt;xsl:value-of select=&quot;name&quot; /&gt;?r1=&lt;xsl:value-of select=&quot;revision&quot; /&gt;&amp;r2=&lt;xsl:value-of select=&quot;prevrevision&quot;/&gt;&amp;diff_format=h&lt;/xsl:attribute&gt;
+          &lt;/xsl:otherwise&gt;
+        &lt;/xsl:choose&gt; (&lt;xsl:value-of select=&quot;revision&quot;/&gt;)
+      &lt;/a&gt;
+      &lt;/xsl:if&gt;
+    &lt;/li&gt;
+  &lt;/xsl:template&gt;
+
+  &lt;!-- Any elements within a msg are processed,
+       so that we can preserve HTML tags. --&gt;
+  &lt;xsl:template match=&quot;msg&quot;&gt;
+    &lt;b&gt;&lt;xsl:apply-templates/&gt;&lt;/b&gt;
+  &lt;/xsl:template&gt;
+  
+&lt;/xsl:stylesheet&gt;

Added: branches/eschnepel/ant/lib/README
===================================================================
--- branches/eschnepel/ant/lib/README	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/lib/README	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,15 @@
+Please refer to the Ant manual under Installing Ant / Library
+Dependencies for a list of the jar requirements for various optional
+tasks and features.
+
+This directory contains xercesImpl.jar from the 2.6.2 release of
+Apache Xerces.  For more information or newer releases see
+&lt;<A HREF="http://xml.apache.org/xerces2-j/">http://xml.apache.org/xerces2-j/</A>&gt;.  See the file LICENSE.xerces for
+the terms of distribution.
+
+It also contains xml-apis.jar, an Apache-controlled collection of
+standard classes from the 1.0b2 release of the Apache XML-Commons
+release.  For more information or newer releases see
+&lt;<A HREF="http://xml.apache.org/commons/">http://xml.apache.org/commons/</A>&gt;.  See the files LICENSE.dom and
+LICENSE.sax for the terms of distribution.
+

Added: branches/eschnepel/ant/lib/ant-antlr.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-antlr.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-apache-bcel.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-apache-bcel.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-apache-bsf.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-apache-bsf.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-apache-log4j.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-apache-log4j.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-apache-oro.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-apache-oro.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-apache-regexp.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-apache-regexp.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-apache-resolver.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-apache-resolver.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-commons-logging.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-commons-logging.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-commons-net.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-commons-net.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-contrib-1.0b3.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-contrib-1.0b3.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-jai.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-jai.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-javamail.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-javamail.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-jdepend.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-jdepend.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-jmf.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-jmf.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-jsch.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-jsch.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-junit.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-junit.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-launcher.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-launcher.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-netrexx.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-netrexx.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-nodeps.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-nodeps.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-starteam.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-starteam.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-stylebook.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-stylebook.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-swing.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-swing.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-testutil.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-testutil.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-trax.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-trax.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant-weblogic.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant-weblogic.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/ant.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/ant.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/libraries.properties
===================================================================
--- branches/eschnepel/ant/lib/libraries.properties	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/ant/lib/libraries.properties	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,46 @@
+#this file declares the libraries for use in 
+#a given release of the components
+
+#if you change this, change the checksum to match
+m2.version=2.0.4
+m2.url=<A HREF="http://ibiblio.org/maven2/">http://ibiblio.org/maven2/</A>
+m2.artifact-name=maven-artifact-ant
+m2.jar.name=${m2.artifact-name}-${m2.version}-dep.jar
+#this is the URL of the antlib library, that is pulled down for everything else.
+m2.antlib.url=${m2.url}/org/apache/maven/${m2.artifact-name}/${m2.version}/${m2.jar.name}
+#this is the sha1 checksum of the artifact
+m2.sha1.checksum=4e7ddfdb91600e9b59bb965ff8eef2f06015df50
+
+
+#versions of different libraries. Please keep in alphabetical order, except
+#when a specific dependency forces them to be out-of-order
+antlr.version=2.7.2
+bcel.version=5.1
+bsf.version=2.4.0
+bsh.version=2.0b4
+bsh-core.version=${bsh.version}
+commons-net.version=1.4.0
+commons-logging.version=1.0.4
+commons-logging-api.version=${commons-logging.version}
+jdepend.version=2.7
+jruby.version=0.8.3
+junit.version=3.8.2
+jsch.version=0.1.29
+jython.version=2.1
+log4j.version=1.2.13
+#js is the javascript implementation of the rhino project
+js.version=1.6R3
+oro.version=2.0.8
+regexp.version=1.3
+which.version=1.0
+xerces.version=2.8.1
+xercesImpl.version=${xerces.version}
+#should be in sync w/ xerces, but not in the maven repository
+#xmlParserAPIs.version=${xerces.version}
+xmlParserAPIs.version=2.6.1
+xalan.version=2.7.0
+xml-resolver.version=1.1
+
+#paired
+jacl.version=1.2.6
+tcljava.version=${jacl.version}

Added: branches/eschnepel/ant/lib/xercesImpl.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/xercesImpl.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/eschnepel/ant/lib/xml-apis.jar
===================================================================
(Binary files differ)


Property changes on: branches/eschnepel/ant/lib/xml-apis.jar
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: branches/eschnepel/build-development.xml
===================================================================
--- branches/eschnepel/build-development.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/build-development.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -18,7 +18,7 @@
 		&lt;/javac&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;build&quot; depends=&quot;compile&quot; description=&quot;build jar files&quot;&gt;
+	&lt;target name=&quot;-build-self&quot; depends=&quot;compile&quot;&gt;
 		&lt;!-- monolith --&gt;
 		&lt;mkdir dir=&quot;${client}&quot; /&gt;
 		&lt;jar jarfile=&quot;${client}/DeepaMehta.jar&quot; basedir=&quot;${build}&quot;&gt;
@@ -73,6 +73,11 @@
 			&lt;include name=&quot;de/deepamehta/assocs/**/*.class&quot; /&gt;
 		&lt;/jar&gt;
 	&lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;-build-self&quot; description=&quot;build jar files&quot;&gt;
+		&lt;ant target=&quot;-call-examples&quot;&gt;
+			&lt;property name=&quot;target&quot; value=&quot;build&quot;/&gt;
+		&lt;/ant&gt;
+	&lt;/target&gt;
 
 	&lt;target name=&quot;sign&quot; depends=&quot;build&quot; description=&quot;sign client&quot;&gt;
 		&lt;signjar jar=&quot;${client}/DeepaMehtaClient.jar&quot; alias=&quot;tomcat&quot; storepass=&quot;kspw01&quot; keypass=&quot;kspw01&quot; signedjar=&quot;${client}/sDeepaMehtaClient.jar&quot; /&gt;

Modified: branches/eschnepel/build.properties
===================================================================
--- branches/eschnepel/build.properties	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/build.properties	2007-09-17 18:46:21 UTC (rev 202)
@@ -33,3 +33,4 @@
 
 dm.instance.property-file		=${config}/dm-${dm.instance}.properties
 dm.instance.build-property-file	=${config}/build-${dm.instance}.properties
+dm.instance.config-property-file=${config}/config-${dm.instance}.properties

Modified: branches/eschnepel/build.xml
===================================================================
--- branches/eschnepel/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,4 +1,4 @@
-&lt;project name=&quot;DeepaMehta&quot; default=&quot;dm&quot; basedir=&quot;.&quot;&gt;
+&lt;project name=&quot;DeepaMehta&quot; default=&quot;-default&quot; basedir=&quot;.&quot;&gt;
 
 	&lt;description&gt;
 		DeepaMehta build file
@@ -8,6 +8,7 @@
 
 	&lt;import file=&quot;${db-specific}/${db.create-db}&quot; /&gt;
 	&lt;import file=&quot;${db-specific}/${db.drop-db}&quot; /&gt;
+	&lt;target name=&quot;dropdb&quot; depends=&quot;-dropdb&quot;/&gt;
 
 	&lt;import file=&quot;build-development.xml&quot; optional=&quot;true&quot;/&gt;
 	
@@ -30,70 +31,180 @@
 		&lt;!-- configure this --&gt;
 	&lt;/path&gt;
 
-	&lt;!-- Install --&gt;
+	&lt;target name=&quot;-default&quot;&gt;
+		&lt;antcall target=&quot;${main-target}&quot;&gt;&lt;/antcall&gt;
+	&lt;/target&gt;
+	
+	&lt;!-- Configuration --&gt;
 
-	&lt;target name=&quot;preinstall&quot;&gt;
-		&lt;echo message=&quot;--- DeepaMehta Installation ---&quot; /&gt;
-		&lt;echo message=&quot;You are about to create a database '${db.name}' and an user '${db.user}' (password '${db.password}').&quot; /&gt;
-		&lt;echo message=&quot;You will be asked for the MySQL root user password.&quot; /&gt;
-		&lt;echo message=&quot;If you want change these settings, type 'n' and edit config.xml (section 'Database')&quot; /&gt;
-		&lt;echo message=&quot;or use command line options -Ddb.name=... -Ddb.user=... -Ddb.password=...&quot; /&gt;
-		&lt;input message=&quot;Continue? &quot; validargs=&quot;y,n&quot; addproperty=&quot;do.install&quot; /&gt;
-		&lt;condition property=&quot;do.abort&quot;&gt;
-			&lt;equals arg1=&quot;${do.install}&quot; arg2=&quot;n&quot; /&gt;
+	&lt;target name=&quot;config&quot; depends=&quot;-config-web-root,-config-instance,-config-examples&quot; description=&quot;Configures the application DeepaMehta&quot;&gt;
+		&lt;propertyfile file=&quot;${config.properties}&quot; &gt;
+			&lt;entry key=&quot;main-target&quot; default=&quot;dm&quot;/&gt;
+		&lt;/propertyfile&gt;
+		&lt;echo&gt;
+Your choices are stored in the &quot;${config.properties}&quot; file.
+If you want to change the settings you have made please edit
+this file or call the config target again.
+		&lt;/echo&gt;
+	&lt;/target&gt;
+	&lt;target name=&quot;-config-web&quot;&gt;
+		&lt;condition property=&quot;old.do.installweb&quot; value=&quot;n&quot;&gt;
+			&lt;isfalse value=&quot;${web.deploy.do}&quot;/&gt;
 		&lt;/condition&gt;
-		&lt;fail if=&quot;do.abort&quot; message=&quot;==&gt; Installation aborted by user -- revisit with 'ant [options] install'&quot; /&gt;
+		&lt;condition property=&quot;old.do.installweb&quot; value=&quot;y&quot;&gt;
+			&lt;istrue value=&quot;${web.deploy.do}&quot;/&gt;
+		&lt;/condition&gt;
+		&lt;input
+			message=&quot;Do you want to install web applications?&quot;
+			validargs=&quot;y,n&quot;
+			addproperty=&quot;new.do.installweb&quot;
+			defaultvalue=&quot;${old.do.installweb}&quot;/&gt;
+		&lt;condition property=&quot;new.web.deploy.do&quot; value=&quot;false&quot;&gt;
+				&lt;equals arg1=&quot;${new.do.installweb}&quot; arg2=&quot;n&quot; /&gt;
+		&lt;/condition&gt;
+		&lt;condition property=&quot;new.web.deploy.do&quot; value=&quot;true&quot;&gt;
+			&lt;not&gt;&lt;equals arg1=&quot;${new.do.installweb}&quot; arg2=&quot;n&quot; /&gt;&lt;/not&gt;
+		&lt;/condition&gt;
+		&lt;condition property=&quot;new.do.web.deploy&quot;&gt;
+			&lt;istrue value=&quot;${new.web.deploy.do}&quot; /&gt;
+		&lt;/condition&gt;
+		&lt;propertyfile file=&quot;${config.properties}&quot; &gt;
+			&lt;entry key=&quot;web.deploy.do&quot; value=&quot;${new.web.deploy.do}&quot;/&gt;
+		&lt;/propertyfile&gt;
+		&lt;var name=&quot;do.web.deploy&quot; unset=&quot;true&quot;/&gt;
+		&lt;condition property=&quot;do.web.deploy&quot; value=&quot;true&quot;&gt;
+			&lt;istrue value=&quot;${web.deploy.do}&quot;/&gt;
+		&lt;/condition&gt;
 	&lt;/target&gt;
-	
-	&lt;target name=&quot;install&quot; depends=&quot;preinstall&quot; description=&quot;initialises the database&quot;&gt;
-		&lt;antcall target=&quot;createdb&quot; /&gt;
-		&lt;antcall target=&quot;createtables&quot; /&gt;
-		&lt;antcall target=&quot;initdb&quot; /&gt;
+	&lt;target name=&quot;-config-web-root&quot; if=&quot;new.do.web.deploy&quot; depends=&quot;-config-web&quot;&gt;
+		&lt;input
+			message=&quot;Please enter the root directory of your application server.&quot;
+			addproperty=&quot;new.tomcat.root&quot;
+			defaultvalue=&quot;${tomcat.root}&quot;/&gt;
+		&lt;propertyfile file=&quot;${config.properties}&quot; &gt;
+			&lt;entry key=&quot;tomcat.root&quot; value=&quot;${new.tomcat.root}&quot;/&gt;
+		&lt;/propertyfile&gt;
+	&lt;/target&gt;
+	&lt;target name=&quot;-config-which-instance&quot;&gt;
+		&lt;echo&gt;Please select one of the following instance configurations:&lt;/echo&gt;
+		&lt;echo/&gt;
+		&lt;for param=&quot;list.instance.config.file&quot;&gt;
+			&lt;path&gt;
+				&lt;fileset dir=&quot;${config}&quot; includes=&quot;dm-*.properties&quot;/&gt;
+			&lt;/path&gt;
+			&lt;sequential&gt;
+				&lt;var name=&quot;list.instance&quot; unset=&quot;true&quot;/&gt;
+				&lt;var name=&quot;list.dm-instance&quot; unset=&quot;true&quot;/&gt;
+				&lt;basename file=&quot;@{list.instance.config.file}&quot; property=&quot;list.dm-instance&quot; suffix=&quot;.properties&quot;/&gt;
+				&lt;propertyregex property=&quot;list.instance&quot;
+	              input=&quot;${list.dm-instance}&quot;
+	              regexp=&quot;dm-(.*)&quot;
+	              select=&quot;\1&quot;/&gt;
+				&lt;echo&gt;${list.instance}&lt;/echo&gt;
+			&lt;/sequential&gt;
+		&lt;/for&gt;
+		&lt;echo/&gt;
+		&lt;input
+			message=&quot;currently set (default)&quot;
+			addproperty=&quot;new.dm.instance&quot;
+			defaultvalue=&quot;${dm.instance}&quot;/&gt;
+
+		&lt;fileset dir=&quot;${config}&quot; includes=&quot;dm-${new.dm.instance}.properties&quot; id=&quot;instance.config.fileset&quot;/&gt;
+		&lt;var name=&quot;correct&quot; unset=&quot;true&quot;/&gt;
+		&lt;condition property=&quot;correct&quot;&gt;
+			&lt;resourcecount refid=&quot;instance.config.fileset&quot; when=&quot;equal&quot; count=&quot;1&quot; /&gt;
+		&lt;/condition&gt;
+		&lt;fail
+			unless=&quot;correct&quot;
+			message=&quot;${new.dm.instance} does not refer to an instance configuration&quot; /&gt;
+		&lt;propertyfile file=&quot;${config.properties}&quot; &gt;
+			&lt;entry key=&quot;dm.instance&quot; value=&quot;${new.dm.instance}&quot;/&gt;
+		&lt;/propertyfile&gt;
+	&lt;/target&gt;
+	&lt;target name=&quot;-config-instance&quot; depends=&quot;-config-which-instance&quot;&gt;
+		&lt;echo&gt;configuring now the DeepaMehta instance &quot;${dm.instance}...&lt;/echo&gt;
+		&lt;ant target=&quot;-config-instance2&quot; inheritall=&quot;false&quot;/&gt;
+	&lt;/target&gt;
+	&lt;target name=&quot;-config-instance2&quot; depends=&quot;-config-instance-db.host,-config-instance-db.name,-config-instance-db.user&quot;&gt;
+		&lt;echo&gt;completed configuring instance &quot;${dm.instance}&quot;&lt;/echo&gt;
+		&lt;echo&gt;Instance-related settings are stored in &quot;${dm.instance.config-property-file}.&lt;/echo&gt;
+	&lt;/target&gt;
+	&lt;target name=&quot;-config-instance-db.host&quot; if=&quot;do.config.db.host&quot;&gt;
+		&lt;input
+			message=&quot;Please enter the host of your database:&quot;
+			addproperty=&quot;new.db.host&quot;
+			defaultvalue=&quot;${db.host}&quot;/&gt;
+		&lt;propertyfile file=&quot;${dm.instance.config-property-file}&quot; &gt;
+			&lt;entry key=&quot;db.host&quot; value=&quot;${new.db.host}&quot;/&gt;
+		&lt;/propertyfile&gt;
+	&lt;/target&gt;
+	&lt;target name=&quot;-config-instance-db.name&quot; if=&quot;do.config.db.name&quot;&gt;
+		&lt;input
+			message=&quot;Please enter the name of your database:&quot;
+			addproperty=&quot;new.db.name&quot;
+			defaultvalue=&quot;${db.name}&quot;/&gt;
+		&lt;propertyfile file=&quot;${dm.instance.config-property-file}&quot; &gt;
+			&lt;entry key=&quot;db.name&quot; value=&quot;${new.db.name}&quot;/&gt;
+		&lt;/propertyfile&gt;
+	&lt;/target&gt;
+	&lt;target name=&quot;-config-instance-db.user&quot; if=&quot;do.config.db.user&quot;&gt;
+		&lt;echo&gt;It is strongly advised to change the database user and password before creation!&lt;/echo&gt;
+		&lt;input
+			message=&quot;Please enter the user to use:&quot;
+			addproperty=&quot;new.db.user&quot;
+			defaultvalue=&quot;${db.user}&quot;/&gt;
+		&lt;input
+			message=&quot;Please enter the password to use:&quot;
+			addproperty=&quot;new.db.password&quot;
+			defaultvalue=&quot;${db.password}&quot;/&gt;
+		&lt;propertyfile file=&quot;${dm.instance.config-property-file}&quot; &gt;
+			&lt;entry key=&quot;db.user&quot; value=&quot;${new.db.user}&quot;/&gt;
+			&lt;entry key=&quot;db.password&quot; value=&quot;${new.db.password}&quot;/&gt;
+		&lt;/propertyfile&gt;
+	&lt;/target&gt;
+	&lt;target name=&quot;-config-examples&quot;&gt;
+		&lt;ant target=&quot;-call-examples&quot;&gt;
+			&lt;property name=&quot;target&quot; value=&quot;config&quot;/&gt;
+		&lt;/ant&gt;
+	&lt;/target&gt;
+
+	&lt;!-- Install --&gt;
+
+	&lt;target name=&quot;install&quot; description=&quot;initialises the database&quot;&gt;
+		&lt;antcall target=&quot;-createdb&quot; /&gt;
+		&lt;antcall target=&quot;-createtables&quot; /&gt;
+		&lt;antcall target=&quot;-initdb&quot; /&gt;
 		&lt;!-- example applications --&gt;
-		&lt;antcall target=&quot;installmovies&quot; /&gt;
-		
-		&lt;!-- this should be a seperate call to ant--&gt;
-		
-		&lt;!--antcall target=&quot;installweb&quot; /--&gt;
+		&lt;antcall target=&quot;-installexamples&quot; /&gt;
 	&lt;/target&gt;
 
 	&lt;!-- Movies --&gt;
-	&lt;target name=&quot;dropmovies&quot;&gt;
-		&lt;condition property=&quot;withsyspass&quot; value=&quot;true&quot;&gt;
-			&lt;isset property=&quot;db.syspass&quot; /&gt;
-		&lt;/condition&gt;
-		&lt;ant antfile=&quot;build.xml&quot; dir=&quot;${examples}/movies&quot; target=&quot;dropmoviesdb&quot; inheritall=&quot;false&quot; inheritrefs=&quot;false&quot;&gt;
-			&lt;property name=&quot;syspass&quot; value=&quot;${db.syspass}&quot; /&gt;
-			&lt;property name=&quot;withsyspass&quot; value=&quot;${withsyspass}&quot; /&gt;
+	&lt;target name=&quot;dropmovies&quot; depends=&quot;-testsyspass&quot;&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;movies&quot;/&gt;
+			&lt;property name=&quot;target&quot; value=&quot;dropmoviesdb&quot;/&gt;
 		&lt;/ant&gt;
 	&lt;/target&gt;
-	&lt;target name=&quot;installmovies&quot;&gt;
-		&lt;condition property=&quot;withsyspass&quot; value=&quot;true&quot;&gt;
-			&lt;isset property=&quot;db.syspass&quot; /&gt;
-		&lt;/condition&gt;
-		&lt;ant antfile=&quot;build.xml&quot; dir=&quot;${examples}/movies&quot; target=&quot;install&quot; inheritall=&quot;false&quot; inheritrefs=&quot;false&quot;&gt;
-			&lt;property name=&quot;syspass&quot; value=&quot;${db.syspass}&quot; /&gt;
-			&lt;property name=&quot;withsyspass&quot; value=&quot;${withsyspass}&quot; /&gt;
+	&lt;target name=&quot;-installexamples&quot; depends=&quot;-testsyspass&quot;&gt;
+		&lt;ant target=&quot;-call-examples&quot;&gt;
+			&lt;property name=&quot;target&quot; value=&quot;install&quot;/&gt;
 		&lt;/ant&gt;
 	&lt;/target&gt;
 
 	&lt;!-- Web-related tasks --&gt;
-	&lt;target name=&quot;installweb-ask&quot;&gt;
-		&lt;echo message=&quot;You are about to install the web applications to '${web.deploy.dir}'.&quot; /&gt;
-		&lt;echo message=&quot;The directory for the servlet engines shared libraries is set to '${web.lib.dir}'.&quot; /&gt;
-		&lt;echo message=&quot;If you want change these settings, type 'n' and edit config.xml (section 'Servlet Engine')&quot; /&gt;
-		&lt;echo message=&quot;or use command line options -Dweb.deploy.dir=... -Dweb.lib.dir=...&quot; /&gt;
-		&lt;input message=&quot;Continue? &quot; validargs=&quot;y,n&quot; addproperty=&quot;do.installweb&quot; /&gt;
-		&lt;condition property=&quot;do.abortweb&quot;&gt;
-			&lt;equals arg1=&quot;${do.installweb}&quot; arg2=&quot;n&quot; /&gt;
-		&lt;/condition&gt;
+	&lt;target name=&quot;-installweb-ask&quot; depends=&quot;-config-web-root&quot; unless=&quot;web.deploy.do&quot;/&gt;
+	&lt;target name=&quot;-installweb-unless&quot; unless=&quot;do.web.deploy&quot; depends=&quot;-installweb-ask&quot;&gt;
+		&lt;echo&gt;
+=========================
+Deployment not configured
+=========================
+Please run the config target if you want to have
+your DeepaMehta installed into your tomcat.
+		&lt;/echo&gt;
 	&lt;/target&gt;
-	&lt;target name=&quot;installweb-if&quot; if=&quot;do.abortweb&quot; depends=&quot;installweb-ask&quot;&gt;
-		&lt;echo message=&quot;==&gt; Installation aborted by user -- revisit with 'ant [options] installweb'&quot; /&gt;
-	&lt;/target&gt;
-	&lt;target name=&quot;installweb-unless&quot; unless=&quot;do.abortweb&quot; depends=&quot;installweb-ask&quot;&gt;
+	&lt;target name=&quot;-installweb-if&quot; if=&quot;do.web.deploy&quot; depends=&quot;-installweb-ask&quot;&gt;
 		&lt;!-- copy shared libraries --&gt;
-		&lt;antcall target=&quot;deploylibs&quot; /&gt;
+		&lt;antcall target=&quot;-deploylibs&quot; /&gt;
 		&lt;copy todir=&quot;${web.lib.dir}&quot; &gt;
 			&lt;fileset dir=&quot;${dm.base-dir}&quot;&gt;
 				&lt;include name=&quot;${db.libs}&quot; /&gt;
@@ -102,19 +213,15 @@
 		&lt;copy file=&quot;${libpath}/googleapi.jar&quot; todir=&quot;${web.lib.dir}&quot; /&gt;
 		&lt;copy file=&quot;${libpath}/commons-fileupload-1.0.jar&quot; todir=&quot;${web.lib.dir}&quot; /&gt;
 		&lt;!-- deploy web applications --&gt;
-		&lt;ant antfile=&quot;${examples}/dm-browser/build.xml&quot; dir=&quot;${examples}/dm-browser&quot; target=&quot;deploy&quot; /&gt;
-		&lt;ant antfile=&quot;${examples}/dm-search/build.xml&quot; dir=&quot;${examples}/dm-search&quot; target=&quot;deploy&quot; /&gt;
-		&lt;ant antfile=&quot;${examples}/messageboard/build.xml&quot; dir=&quot;${examples}/messageboard&quot; target=&quot;deploy&quot; /&gt;
-		&lt;ant antfile=&quot;${examples}/musicforum/build.xml&quot; dir=&quot;${examples}/musicforum&quot; target=&quot;deploy&quot; /&gt;
-		&lt;ant antfile=&quot;${examples}/kompetenzstern/build.xml&quot; dir=&quot;${examples}/kompetenzstern&quot; target=&quot;deploy&quot; /&gt;
+		&lt;ant target=&quot;-call-examples-web&quot;&gt;
+			&lt;property name=&quot;target&quot; value=&quot;deploy&quot;/&gt;
+		&lt;/ant&gt;
 	&lt;/target&gt;
-	&lt;target name=&quot;installweb&quot; depends=&quot;installweb-if,installweb-unless&quot; /&gt;
+	&lt;target name=&quot;-installweb&quot; depends=&quot;-installweb-if,-installweb-unless&quot; /&gt;
 
-	&lt;target name=&quot;deploy&quot; depends=&quot;build,installweb-ask&quot;&gt;
-		&lt;antcall target=&quot;deploylibs&quot; /&gt;
-	&lt;/target&gt;
+	&lt;target name=&quot;deploy&quot; depends=&quot;-build-self,-installweb&quot; description=&quot;Does everything to setup your Tomcat.&quot;/&gt;
 
-	&lt;target name=&quot;deploylibs&quot; unless=&quot;do.abortweb&quot;&gt;
+	&lt;target name=&quot;-deploylibs&quot; if=&quot;do.web.deploy&quot;&gt;
 		&lt;copy file=&quot;${server}/DeepaMehtaService.jar&quot; todir=&quot;${web.lib.dir}&quot; /&gt;
 		&lt;copy file=&quot;${server}/DeepaMehtaTopics.jar&quot; todir=&quot;${web.lib.dir}&quot; /&gt;
 	&lt;/target&gt;
@@ -122,7 +229,7 @@
 	&lt;!-- The target createdb has been &quot;outsourced&quot; to ${db.create-db}--&gt;
 	&lt;!-- The target dropdb has been &quot;outsourced&quot; to ${db.drop-db}--&gt;
 
-	&lt;target name=&quot;createtables&quot;&gt;
+	&lt;target name=&quot;-createtables&quot;&gt;
 		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
 			&lt;fileset dir=&quot;${db-specific}&quot;&gt;
 				&lt;include name=&quot;${db.tables}&quot; /&gt;
@@ -131,10 +238,10 @@
 				&lt;include name=&quot;${db.close-session}&quot; /&gt;
 			&lt;/fileset&gt;
 		&lt;/sql&gt;
-		&lt;antcall target=&quot;optimize&quot; /&gt;
+		&lt;antcall target=&quot;-optimize&quot; /&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;optimize&quot;&gt;
+	&lt;target name=&quot;-optimize&quot;&gt;
 		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
 			&lt;fileset dir=&quot;${db-specific}&quot;&gt;
 				&lt;include name=&quot;${db.optimize}&quot; /&gt;
@@ -145,7 +252,7 @@
 		&lt;/sql&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;initdb&quot;&gt;
+	&lt;target name=&quot;-initdb&quot;&gt;
 		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
 			&lt;fileset dir=&quot;${db}&quot;&gt;
 				&lt;include name=&quot;cm.sql&quot; /&gt;
@@ -159,18 +266,6 @@
 			&lt;/fileset&gt;
 		&lt;/sql&gt;
 		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
-			&lt;fileset dir=&quot;${examples}&quot;&gt;
-				&lt;include name=&quot;movies/db/dmdb-movies.sql&quot; /&gt;
-				&lt;include name=&quot;movies/db/dmdb-movies-${dm.instance}.sql&quot; /&gt;
-				&lt;include name=&quot;musicforum/music.sql&quot; /&gt;
-				&lt;include name=&quot;kompetenzstern/kompetenzstern.sql&quot; /&gt;
-				&lt;include name=&quot;kompetenzstern/businesscheck.sql&quot; /&gt;
-			&lt;/fileset&gt;
-			&lt;fileset dir=&quot;${db-specific}&quot;&gt;
-				&lt;include name=&quot;${db.close-session}&quot; /&gt;
-			&lt;/fileset&gt;
-		&lt;/sql&gt;
-		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
 			&lt;fileset dir=&quot;${db}/patches&quot;&gt;
 				&lt;include name=&quot;names.sql&quot; /&gt;
 				&lt;include name=&quot;help.sql&quot; /&gt;
@@ -179,10 +274,10 @@
 				&lt;include name=&quot;${db.close-session}&quot; /&gt;
 			&lt;/fileset&gt;
 		&lt;/sql&gt;
-		&lt;antcall target=&quot;optimize&quot; /&gt;
+		&lt;antcall target=&quot;-optimize&quot; /&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;droptables&quot;&gt;
+	&lt;target name=&quot;-droptables&quot;&gt;
 		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
 			&lt;fileset dir=&quot;${db-specific}&quot;&gt;
 				&lt;include name=&quot;${db.drop-tables}&quot; /&gt;
@@ -224,7 +319,7 @@
 				&lt;include name=&quot;${db.close-session}&quot; /&gt;
 			&lt;/fileset&gt;
 		&lt;/sql&gt;
-		&lt;antcall target=&quot;optimize&quot; /&gt;
+		&lt;antcall target=&quot;-optimize&quot; /&gt;
 	&lt;/target&gt;
 
 	&lt;!-- Run --&gt;
@@ -275,4 +370,64 @@
 		&lt;/java&gt;
 	&lt;/target&gt;
 
+	&lt;!-- Herlper Targets --&gt;
+
+	&lt;target name=&quot;-testsyspass&quot;&gt;
+		&lt;condition property=&quot;withsyspass&quot; value=&quot;true&quot;&gt;
+			&lt;isset property=&quot;db.syspass&quot; /&gt;
+		&lt;/condition&gt;
+	&lt;/target&gt;
+
+    &lt;target name=&quot;-call-examples&quot;&gt;
+    	&lt;antcall target=&quot;-call-examples-noweb&quot;/&gt;
+    	&lt;antcall target=&quot;-call-examples-web&quot;/&gt;
+    &lt;/target&gt;
+	&lt;target name=&quot;-call-examples-noweb&quot;&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;ldap&quot;/&gt;
+		&lt;/ant&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;movies&quot;/&gt;
+		&lt;/ant&gt;
+    &lt;/target&gt;
+	&lt;target name=&quot;-call-examples-web&quot;&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;dm-browser&quot;/&gt;
+		&lt;/ant&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;dm-search&quot;/&gt;
+		&lt;/ant&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;dm-topicmapviewer&quot;/&gt;
+		&lt;/ant&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;dm-web&quot;/&gt;
+		&lt;/ant&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;knoppixforum&quot;/&gt;
+		&lt;/ant&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;kompetenzstern&quot;/&gt;
+		&lt;/ant&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;messageboard&quot;/&gt;
+		&lt;/ant&gt;
+		&lt;ant target=&quot;-call-example&quot;&gt;
+			&lt;property name=&quot;example&quot; value=&quot;musicforum&quot;/&gt;
+		&lt;/ant&gt;
+    &lt;/target&gt;
+    &lt;target name=&quot;-call-example&quot;&gt;
+    	&lt;echo&gt;calling target &quot;${target}&quot; in example &quot;${example}&quot;&lt;/echo&gt;
+		&lt;trycatch&gt;
+			&lt;try&gt;
+				&lt;ant antfile=&quot;build.xml&quot; dir=&quot;${examples}/${example}&quot; target=&quot;${target}&quot; inheritall=&quot;false&quot;&gt;
+					&lt;property name=&quot;syspass&quot; value=&quot;${db.syspass}&quot; /&gt;
+					&lt;property name=&quot;withsyspass&quot; value=&quot;${withsyspass}&quot; /&gt;
+				&lt;/ant&gt;
+			&lt;/try&gt;
+			&lt;catch/&gt;
+		&lt;/trycatch&gt;
+    	&lt;echo&gt;finished target &quot;${target}&quot; in example &quot;${example}&quot;&lt;/echo&gt;
+	&lt;/target&gt;
+
 &lt;/project&gt;

Modified: branches/eschnepel/config.xml
===================================================================
--- branches/eschnepel/config.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/config.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -5,7 +5,11 @@
 		&lt;/not&gt;
 	&lt;/condition&gt;
 
+	&lt;property name=&quot;config.properties&quot; value=&quot;${dm.base-dir}/config.properties&quot;/&gt;
+
+	&lt;property file=&quot;${config.properties}&quot; /&gt;
 	&lt;property file=&quot;${dm.base-dir}/build.properties&quot; /&gt;
+	&lt;property file=&quot;${dm.instance.config-property-file}&quot; /&gt;
 	&lt;property file=&quot;${dm.instance.property-file}&quot; /&gt;
 	&lt;property file=&quot;${dm.instance.build-property-file}&quot; /&gt;
 
@@ -13,6 +17,8 @@
 
 	&lt;property file=&quot;${db.type.property-file}&quot; /&gt;
 
+	&lt;property name=&quot;main-target&quot; value=&quot;config&quot;/&gt;
+
 	&lt;path id=&quot;javalibs&quot;&gt;
 		&lt;fileset dir=&quot;${dm.base-dir}&quot;&gt;
 			&lt;include name=&quot;${db.libs}&quot; /&gt;
@@ -37,4 +43,20 @@
 		     takes care of this. --&gt;
 		&lt;map from=&quot;${dm.base-dir}/${libpath}&quot; to=&quot;../../libs&quot; /&gt;
 	&lt;/pathconvert&gt;
+
+	&lt;condition property=&quot;do.web.deploy&quot; value=&quot;true&quot;&gt;
+		&lt;istrue value=&quot;${web.deploy.do}&quot;/&gt;
+	&lt;/condition&gt;
+	&lt;condition property=&quot;do.config.db.host&quot; value=&quot;true&quot;&gt;
+		&lt;istrue value=&quot;${config.db.host}&quot;/&gt;
+	&lt;/condition&gt;
+	&lt;condition property=&quot;do.config.db.name&quot; value=&quot;true&quot;&gt;
+		&lt;istrue value=&quot;${config.db.name}&quot;/&gt;
+	&lt;/condition&gt;
+	&lt;condition property=&quot;do.config.db.user&quot; value=&quot;true&quot;&gt;
+		&lt;istrue value=&quot;${config.db.user}&quot;/&gt;
+	&lt;/condition&gt;
+
+	&lt;taskdef resource=&quot;net/sf/antcontrib/antcontrib.properties&quot;/&gt;
+	&lt;taskdef name=&quot;for&quot; classname=&quot;net.sf.antcontrib.logic.ForTask&quot;/&gt;
 &lt;/project&gt;

Modified: branches/eschnepel/develop/src/de/deepamehta/service/db/DatabaseSweeper.java
===================================================================
--- branches/eschnepel/develop/src/de/deepamehta/service/db/DatabaseSweeper.java	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/develop/src/de/deepamehta/service/db/DatabaseSweeper.java	2007-09-17 18:46:21 UTC (rev 202)
@@ -38,32 +38,38 @@
 		}
 
 		private void sweep(Statement statement) throws SQLException {
-			sweep(statement,
-					&quot;Association a WHERE NOT EXISTS (SELECT * FROM Topic t WHERE &quot;
-							+ compareIDVer(&quot;a.Topic&quot;, &quot;1&quot;, &quot;t.&quot;, &quot;&quot;) + &quot;)&quot;,
-					&quot;Associations with stale source Topic&quot;);
-			sweep(statement,
-					&quot;Association a WHERE NOT EXISTS (SELECT * FROM Topic t WHERE &quot;
-							+ compareIDVer(&quot;a.Topic&quot;, &quot;2&quot;, &quot;t.&quot;, &quot;&quot;) + &quot;)&quot;,
-					&quot;Associations with stale target Topic&quot;);
-			sweep(statement,
-					&quot;ViewAssociation va WHERE NOT EXISTS (SELECT * FROM Association a WHERE &quot;
-							+ compareIDVer(&quot;a.&quot;, &quot;&quot;, &quot;va.Association&quot;, &quot;&quot;)
-							+ &quot;)&quot;, &quot;non-existent ViewAssociations&quot;);
-			sweep(statement,
-					&quot;ViewTopic vt WHERE NOT EXISTS (SELECT * FROM Topic t WHERE &quot;
-							+ compareIDVer(&quot;t.&quot;, &quot;&quot;, &quot;vt.Topic&quot;, &quot;&quot;) + &quot;)&quot;,
-					&quot;non-existent ViewTopic&quot;);
-			sweep(statement,
-					&quot;ViewAssociation va WHERE NOT EXISTS (SELECT * FROM Association a WHERE &quot;
-							+ compareIDVer(&quot;a.&quot;, &quot;&quot;, &quot;va.Association&quot;, &quot;&quot;)
-							+ &quot;)&quot;, &quot;non-existent View in ViewAssociations&quot;);
-			sweep(statement,
-					&quot;ViewTopic vt WHERE NOT EXISTS (SELECT * FROM Topic t WHERE &quot;
-							+ compareIDVer(&quot;t.&quot;, &quot;&quot;, &quot;vt.Topic&quot;, &quot;&quot;) + &quot;)&quot;,
-					&quot;non-existent View in ViewTopic&quot;);
+			sweepAssocStaleTopic(statement, &quot;1&quot;, &quot;source&quot;);
+			sweepAssocStaleTopic(statement, &quot;2&quot;, &quot;target&quot;);
+			sweepNoneViewTopicInView(statement, &quot;Association&quot;);
+			sweepNoneViewTopicInView(statement, &quot;Topic&quot;);
+			sweepRropNoRef(statement, &quot;Association&quot;);
+			sweepRropNoRef(statement, &quot;Topic&quot;);
 		}
 
+		private void sweepAssocStaleTopic(Statement statement, String whichRef,
+				String whichDesc) throws SQLException {
+			sweep(statement, &quot;Association a LEFT JOIN Topic t ON &quot;
+					+ compareIDVer(&quot;a.Topic&quot;, whichRef, &quot;t.&quot;, &quot;&quot;)
+					+ &quot; WHERE t.ID IS NULL&quot;, &quot;Associations with stale &quot;
+					+ whichDesc + &quot; Topic&quot;);
+		}
+
+		private void sweepNoneViewTopicInView(Statement statement, String what)
+				throws SQLException {
+			sweep(statement, &quot;View&quot; + what + &quot; v LEFT JOIN Topic t ON &quot;
+					+ compareIDVer(&quot;t.&quot;, &quot;&quot;, &quot;v.ViewTopic&quot;, &quot;&quot;)
+					+ &quot; WHERE t.ID IS NULL&quot;, &quot;non-existent ViewTopic in &quot;
+					+ what + &quot;s&quot;);
+		}
+
+		private void sweepRropNoRef(Statement statement, String what)
+				throws SQLException {
+			sweep(statement, what + &quot;Prop p LEFT JOIN &quot; + what + &quot; r ON &quot;
+					+ compareIDVer(&quot;r.&quot;, &quot;&quot;, &quot;p.&quot; + what, &quot;&quot;)
+					+ &quot; WHERE r.ID IS NULL&quot;, &quot;non-existent &quot; + what + &quot; in &quot;
+					+ what + &quot;Properties&quot;);
+		}
+
 		private String compareIDVer(String cmp1, String add1, String cmp2,
 				String add2) {
 			return cmp1 + &quot;ID&quot; + add1 + &quot; = &quot; + cmp2 + &quot;ID&quot; + add2 + &quot; AND &quot;
@@ -90,10 +96,10 @@
 					}
 					System.out.println(sb.toString());
 				} while (res.next());
-				query = &quot;DELETE FROM &quot; + cmd;
-				System.out.println(query);
-				int cnt = statement.executeUpdate(query);
-				System.out.println(&quot;*** Deleted &quot; + cnt + &quot; &quot; + message + &quot;!&quot;);
+//				query = &quot;DELETE FROM &quot; + cmd;
+//				System.out.println(query);
+//				int cnt = statement.executeUpdate(query);
+//				System.out.println(&quot;*** Deleted &quot; + cnt + &quot; &quot; + message + &quot;!&quot;);
 			}
 		}
 	}

Modified: branches/eschnepel/develop/src/de/deepamehta/service/web/DeepaMehtaServlet.java
===================================================================
--- branches/eschnepel/develop/src/de/deepamehta/service/web/DeepaMehtaServlet.java	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/develop/src/de/deepamehta/service/web/DeepaMehtaServlet.java	2007-09-17 18:46:21 UTC (rev 202)
@@ -103,7 +103,7 @@
 		String service = sc.getInitParameter(&quot;service&quot;);
 		// Note: the current working directory is the directory from where tomcat was started
 		ApplicationServiceInstance instance = ApplicationServiceInstance.lookup(
-			service, home != null ? home + &quot;/install/client/dms.rc&quot; : &quot;dms.rc&quot;);
+			service, home != null ? home + &quot;/install/client/dm.properties&quot; : &quot;dm.properties&quot;);
 		as = ApplicationService.create(this, instance);		// throws DME ### servlet is not properly inited
 		cm = as.cm;
 		// --- create external connection ---


Property changes on: branches/eschnepel/install/config
___________________________________________________________________
Name: svn:ignore
   + config-*.properties


Modified: branches/eschnepel/install/config/build-derby-intern.properties
===================================================================
--- branches/eschnepel/install/config/build-derby-intern.properties	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/config/build-derby-intern.properties	2007-09-17 18:46:21 UTC (rev 202)
@@ -16,3 +16,6 @@
 db.syspass			=${db.password}
 db.sysurl			=${db.url};create=true
 
+config.db.host		=false
+config.db.name		=true
+config.db.user		=false

Modified: branches/eschnepel/install/config/build-hsqldb-intern.properties
===================================================================
--- branches/eschnepel/install/config/build-hsqldb-intern.properties	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/config/build-hsqldb-intern.properties	2007-09-17 18:46:21 UTC (rev 202)
@@ -15,3 +15,7 @@
 db.sysuser			=${db.user}
 db.syspass			=${db.password}
 db.sysurl			=${db.url}
+
+config.db.host		=false
+config.db.name		=true
+config.db.user		=false

Modified: branches/eschnepel/install/config/build-mysql.properties
===================================================================
--- branches/eschnepel/install/config/build-mysql.properties	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/config/build-mysql.properties	2007-09-17 18:46:21 UTC (rev 202)
@@ -14,3 +14,7 @@
 db.sysname			=mysql
 db.sysuser			=root
 db.sysurl			=jdbc:<A HREF="mysql://${db.host">mysql://${db.host</A>}/${db.sysname}?useUnicode=true
+
+config.db.user		=true
+config.db.name		=true
+config.db.host		=true

Modified: branches/eschnepel/install/config/dm-mysql.properties
===================================================================
--- branches/eschnepel/install/config/dm-mysql.properties	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/config/dm-mysql.properties	2007-09-17 18:46:21 UTC (rev 202)
@@ -3,8 +3,8 @@
 dm.comporate-memory.class=RelationalCorporateMemory
 
 # Database
-db.name				=DeepaMehta2
-db.user				=dm2
+db.name				=DeepaMehta
+db.user				=dm
 db.password			=dm
 db.type				=mysql
 

Modified: branches/eschnepel/install/db/db-specific/createdb-CONNECT.xml
===================================================================
--- branches/eschnepel/install/db/db-specific/createdb-CONNECT.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/db/db-specific/createdb-CONNECT.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,10 +1,6 @@
 &lt;project name=&quot;DeepaMehta-db-createdb-CONNECT&quot; &gt;
-&lt;!-- DeepaMehta Database creation script.--&gt;
-&lt;!-- must run as database root user.--&gt;
-	&lt;target name=&quot;asksyspass&quot; unless=&quot;db.syspass&quot;&gt;
-		&lt;input message=&quot;Enter database ${db.sysuser} user password: &quot; addproperty=&quot;db.syspass&quot;/&gt;
-	&lt;/target&gt;
-	&lt;target name=&quot;createdb&quot; depends=&quot;asksyspass&quot;&gt;
+	&lt;import file=&quot;createdb-ask.xml&quot;/&gt;
+	&lt;target name=&quot;-createdb&quot; depends=&quot;-askcreatedb&quot; unless=&quot;do.abort&quot;&gt;
 		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.sysurl}&quot; userid=&quot;${db.sysuser}&quot; password=&quot;${db.syspass}&quot; classpathref=&quot;javalibs&quot;&gt;
 			&lt;fileset dir=&quot;${db}&quot;&gt;
 				&lt;include name=&quot;EMPTY.sql&quot;/&gt;

Modified: branches/eschnepel/install/db/db-specific/createdb-EMPTY.xml
===================================================================
--- branches/eschnepel/install/db/db-specific/createdb-EMPTY.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/db/db-specific/createdb-EMPTY.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,5 +1,6 @@
 &lt;project name=&quot;DeepaMehta-db-createdb-EMPTY&quot; &gt;
-	&lt;target name=&quot;createdb&quot;&gt;
+	&lt;import file=&quot;createdb-ask.xml&quot;/&gt;
+	&lt;target name=&quot;-createdb&quot; depends=&quot;-askcreatedb&quot; unless=&quot;do.abort&quot;&gt;
 		&lt;echo message=&quot;There is nothing to do to create a db for this type database&quot;/&gt;
 	&lt;/target&gt;
 &lt;/project&gt;

Added: branches/eschnepel/install/db/db-specific/createdb-ask.xml
===================================================================
--- branches/eschnepel/install/db/db-specific/createdb-ask.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/db/db-specific/createdb-ask.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,22 @@
+&lt;project name=&quot;DeepaMehta-db-createdb-hsqldb&quot;&gt;
+	&lt;target name=&quot;-askcreatedb&quot;&gt;
+		&lt;echo&gt;
+--- DeepaMehta Installation ---
+You are about to create a database '${db.name}' and an
+user '${db.user}' (password '${db.password}') with corresponding grants.
+Eventually you will be asked for the database ${db.sysuser} password.
+If you want change these settings, type 'n' and edit
+config.xml (section 'Database') or use the command line options
+
+    for the target database:
+        -Ddb.name=... -Ddb.suser=... -Ddb.password=...
+
+    for the creation process:
+        -Ddb.sysuser=... -Ddb.syspassword=...
+		&lt;/echo&gt;
+		&lt;input message=&quot;Continue? &quot; validargs=&quot;y,n&quot; addproperty=&quot;do.drop&quot; /&gt;
+		&lt;condition property=&quot;do.abort&quot;&gt;
+			&lt;equals arg1=&quot;${do.drop}&quot; arg2=&quot;n&quot; /&gt;
+		&lt;/condition&gt;
+	&lt;/target&gt;
+&lt;/project&gt;

Modified: branches/eschnepel/install/db/db-specific/createdb-sql92.xml
===================================================================
--- branches/eschnepel/install/db/db-specific/createdb-sql92.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/db/db-specific/createdb-sql92.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,10 +1,6 @@
 &lt;project name=&quot;DeepaMehta-db-createdb-sql92&quot; &gt;
-&lt;!-- DeepaMehta Database creation script.--&gt;
-&lt;!-- must run as database root user.--&gt;
-	&lt;target name=&quot;asksyspass&quot; unless=&quot;db.syspass&quot;&gt;
-		&lt;input message=&quot;Enter database ${db.sysuser} user password: &quot; addproperty=&quot;db.syspass&quot;/&gt;
-	&lt;/target&gt;
-	&lt;target name=&quot;createdb&quot; depends=&quot;asksyspass&quot;&gt;
+	&lt;import file=&quot;createdb-ask.xml&quot;/&gt;
+	&lt;target name=&quot;-createdb&quot; depends=&quot;-askcreatedb&quot; unless=&quot;do.abort&quot;&gt;
 		&lt;echo&gt;Creating Database ${db.name} for user ${db.user} with password ${db.password} ...&lt;/echo&gt;
 		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.sysurl}&quot; userid=&quot;${db.sysuser}&quot; password=&quot;${db.syspass}&quot; classpathref=&quot;javalibs&quot;&gt;
 			CREATE DATABASE ${db.name};

Modified: branches/eschnepel/install/db/db-specific/dropdb-ask.xml
===================================================================
--- branches/eschnepel/install/db/db-specific/dropdb-ask.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/db/db-specific/dropdb-ask.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,8 +1,10 @@
-&lt;project name=&quot;DeepaMehta-db-dropedb-hsqldb&quot;&gt;
-	&lt;target name=&quot;askdropdb&quot;&gt;
-		&lt;echo message=&quot;You are about to delete the database '${db.name}'.&quot; /&gt;
-		&lt;echo message=&quot;If you want delete another database, type 'n' and edit config.xml (section 'Database')&quot; /&gt;
-		&lt;echo message=&quot;or use command line options -Ddb.name=... -Ddb.userid=...&quot; /&gt;
+&lt;project name=&quot;DeepaMehta-db-askdropdb&quot;&gt;
+	&lt;target name=&quot;-askdropdb&quot;&gt;
+		&lt;echo&gt;
+You are about to delete the database '${db.name}'.
+If you want delete another database, type 'n' and edit config.xml (section 'Database')
+or use command line options -Ddb.name=... -Ddb.userid=...
+		&lt;/echo&gt;
 		&lt;input message=&quot;Continue? &quot; validargs=&quot;y,n&quot; addproperty=&quot;do.drop&quot; /&gt;
 		&lt;condition property=&quot;do.abort&quot;&gt;
 			&lt;equals arg1=&quot;${do.drop}&quot; arg2=&quot;n&quot; /&gt;

Modified: branches/eschnepel/install/db/db-specific/dropdb-derby.xml
===================================================================
--- branches/eschnepel/install/db/db-specific/dropdb-derby.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/db/db-specific/dropdb-derby.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,13 +1,6 @@
-&lt;project name=&quot;DeepaMehta-db-dropedb-hsqldb&quot;&gt;
-	&lt;target name=&quot;dropdb&quot;&gt;
-		&lt;echo message=&quot;You are about to delete the DeepaMehta database '${db.name}'.&quot; /&gt;
-		&lt;echo message=&quot;If you want delete another database, type 'n' and edit config.xml (section 'Database')&quot; /&gt;
-		&lt;echo message=&quot;or use command line options -Ddb.name=... -Ddb.userid=...&quot; /&gt;
-		&lt;input message=&quot;Continue? &quot; validargs=&quot;y,n&quot; addproperty=&quot;do.drop&quot; /&gt;
-		&lt;condition property=&quot;do.abort&quot;&gt;
-			&lt;equals arg1=&quot;${do.drop}&quot; arg2=&quot;n&quot; /&gt;
-		&lt;/condition&gt;
-		&lt;fail if=&quot;do.abort&quot; message=&quot;==&gt; Aborted by user -- revisit with 'ant [options] dropdb'&quot; /&gt;
+&lt;project name=&quot;DeepaMehta-db-dropdb-derby&quot;&gt;
+	&lt;import file=&quot;dropdb-ask.xml&quot;/&gt;
+	&lt;target name=&quot;-dropdb&quot; depends=&quot;-askdropdb&quot; unless=&quot;do.abort&quot;&gt;
 		&lt;delete dir=&quot;${db.derby.path}&quot; /&gt;
 	&lt;/target&gt;
 &lt;/project&gt;

Modified: branches/eschnepel/install/db/db-specific/dropdb-hsqldb.xml
===================================================================
--- branches/eschnepel/install/db/db-specific/dropdb-hsqldb.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/db/db-specific/dropdb-hsqldb.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,6 +1,6 @@
 &lt;project name=&quot;DeepaMehta-db-dropdb-hsqldb&quot;&gt;
 	&lt;import file=&quot;dropdb-ask.xml&quot;/&gt;
-	&lt;target name=&quot;dropdb&quot; depends=&quot;askdropdb&quot; unless=&quot;do.abort&quot;&gt;
+	&lt;target name=&quot;-dropdb&quot; depends=&quot;-askdropdb&quot; unless=&quot;do.abort&quot;&gt;
 		&lt;delete&gt;
 			&lt;fileset dir=&quot;${db.hsqldb.base-path}&quot;&gt;
 				&lt;include name=&quot;${db.name}.*&quot; /&gt;

Modified: branches/eschnepel/install/db/db-specific/dropdb-sql92.xml
===================================================================
--- branches/eschnepel/install/db/db-specific/dropdb-sql92.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/db/db-specific/dropdb-sql92.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -1,19 +1,6 @@
-&lt;project name=&quot;DeepaMehta-db-dropedb-sql92&quot; &gt;
-	&lt;target name=&quot;predropdb&quot;&gt;
-		&lt;echo message=&quot;You are about to drop the DeepaMehta database '${db.name}' and the user '${db.user}'.&quot;/&gt;
-		&lt;echo message=&quot;You will be asked for the database ${db.sysuser} user password.&quot;/&gt;
-		&lt;echo message=&quot;If you want drop another database and user, type 'n' and edit config.xml (section 'Database')&quot;/&gt;
-		&lt;echo message=&quot;or use command line options -Ddb.name=... -Ddb.user=...&quot;/&gt;
-		&lt;input message=&quot;Continue? &quot; validargs=&quot;y,n&quot; addproperty=&quot;do.drop&quot;/&gt;
-		&lt;condition property=&quot;do.abort&quot;&gt;
-			&lt;equals arg1=&quot;${do.drop}&quot; arg2=&quot;n&quot;/&gt;
-		&lt;/condition&gt;
-		&lt;fail if=&quot;do.abort&quot; message=&quot;==&gt; Aborted by user -- revisit with 'ant [options] dropdb'&quot;/&gt;
-	&lt;/target&gt;
-	&lt;target name=&quot;asksyspass&quot; depends=&quot;predropdb&quot; unless=&quot;db.syspass&quot;&gt;
-		&lt;input message=&quot;Enter database ${db.sysuser} user password: &quot; addproperty=&quot;db.syspass&quot;/&gt;
-	&lt;/target&gt;
-	&lt;target name=&quot;dropdb&quot; depends=&quot;asksyspass&quot;&gt;
+&lt;project name=&quot;DeepaMehta-db-dropdb-sql92&quot; &gt;
+	&lt;import file=&quot;dropdb-ask.xml&quot;/&gt;
+	&lt;target name=&quot;-dropdb&quot; depends=&quot;-askdropdb&quot; unless=&quot;do.abort&quot;&gt;
 		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.sysurl}&quot; userid=&quot;${db.sysuser}&quot; password=&quot;${db.syspass}&quot; classpathref=&quot;javalibs&quot;&gt;
 			DROP DATABASE ${db.name};
 			DELETE FROM user where User='${db.user}';

Modified: branches/eschnepel/install/examples/artfacts/build.xml
===================================================================
--- branches/eschnepel/install/examples/artfacts/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/artfacts/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -7,8 +7,10 @@
 	&lt;property name=&quot;jar&quot; value=&quot;ArtfactsTopics.jar&quot;/&gt;
 	&lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;init&quot; description=&quot;create build directory&quot;&gt;
 		&lt;mkdir dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
@@ -29,6 +31,8 @@
 		&lt;/jar&gt;
 	&lt;/target&gt;
 
+	&lt;target name=&quot;build&quot; depends=&quot;jar&quot;/&gt;
+
 	&lt;target name=&quot;cleanup&quot; description=&quot;remove build directory&quot;&gt;
 		&lt;delete dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;


Property changes on: branches/eschnepel/install/examples/dm-browser
___________________________________________________________________
Name: svn:ignore
   + build
dm-browser.war


Modified: branches/eschnepel/install/examples/dm-browser/build.xml
===================================================================
--- branches/eschnepel/install/examples/dm-browser/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/dm-browser/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -8,8 +8,10 @@
 	&lt;property name=&quot;war&quot; value=&quot;${project.name}.war&quot;/&gt;
 	&lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;init&quot; description=&quot;create build directory&quot;&gt;
 		&lt;mkdir dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
@@ -35,11 +37,9 @@
 		&lt;/war&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;build&quot; depends=&quot;war&quot;&gt;
-		&lt;antcall target=&quot;deploy&quot;/&gt;
-	&lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;war&quot;/&gt;
 
-	&lt;target name=&quot;deploy&quot;&gt;
+	&lt;target name=&quot;deploy&quot; if=&quot;do.web.deploy&quot;&gt;
         &lt;copy file=&quot;${war}&quot; todir=&quot;${web.deploy.dir}&quot;/&gt;
         &lt;copy file=&quot;browser.xsl&quot; todir=&quot;../../client/stylesheets/browser&quot;/&gt;
 	&lt;/target&gt;
@@ -47,5 +47,4 @@
 	&lt;target name=&quot;cleanup&quot; description=&quot;remove build directory&quot;&gt;
 		&lt;delete dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
-
 &lt;/project&gt;


Property changes on: branches/eschnepel/install/examples/dm-search
___________________________________________________________________
Name: svn:ignore
   + build
dm-search.war


Modified: branches/eschnepel/install/examples/dm-search/build.xml
===================================================================
--- branches/eschnepel/install/examples/dm-search/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/dm-search/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -8,8 +8,10 @@
 	&lt;property name=&quot;war&quot; value=&quot;${project.name}.war&quot;/&gt;
 	&lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;init&quot; description=&quot;create build directory&quot;&gt;
 		&lt;mkdir dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
@@ -36,11 +38,9 @@
 		&lt;/war&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;build&quot; depends=&quot;war&quot;&gt;
-		&lt;antcall target=&quot;deploy&quot;/&gt;
-	&lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;war&quot;/&gt;
 
-	&lt;target name=&quot;deploy&quot;&gt;
+	&lt;target name=&quot;deploy&quot; if=&quot;do.web.deploy&quot;&gt;
         &lt;copy file=&quot;${war}&quot; todir=&quot;${web.deploy.dir}&quot;/&gt;
         &lt;copy file=&quot;bundles/SearchBundle_de_DE.properties&quot; todir=&quot;${web.classes.dir}&quot;/&gt;
         &lt;copy file=&quot;bundles/SearchBundle_en_US.properties&quot; todir=&quot;${web.classes.dir}&quot;/&gt;
@@ -51,4 +51,5 @@
 		&lt;delete dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
 
+	&lt;target name=&quot;install&quot;/&gt;
 &lt;/project&gt;


Property changes on: branches/eschnepel/install/examples/dm-topicmapviewer
___________________________________________________________________
Name: svn:ignore
   + build
dm-topicmapviewer.war


Modified: branches/eschnepel/install/examples/dm-topicmapviewer/build.xml
===================================================================
--- branches/eschnepel/install/examples/dm-topicmapviewer/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/dm-topicmapviewer/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -8,8 +8,10 @@
 	&lt;property name=&quot;war&quot; value=&quot;${project.name}.war&quot;/&gt;
 	&lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;init&quot; description=&quot;create build directory&quot;&gt;
 		&lt;mkdir dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
@@ -37,11 +39,9 @@
 		&lt;/war&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;build&quot; depends=&quot;war&quot;&gt;
-		&lt;antcall target=&quot;deploy&quot;/&gt;
-	&lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;war&quot;/&gt;
 
-	&lt;target name=&quot;deploy&quot;&gt;
+	&lt;target name=&quot;deploy&quot; if=&quot;do.web.deploy&quot;&gt;
         &lt;copy file=&quot;${war}&quot; todir=&quot;${web.deploy.dir}&quot;/&gt;
 	&lt;/target&gt;
 


Property changes on: branches/eschnepel/install/examples/dm-web
___________________________________________________________________
Name: svn:ignore
   + build
dm-web.war


Modified: branches/eschnepel/install/examples/dm-web/build.xml
===================================================================
--- branches/eschnepel/install/examples/dm-web/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/dm-web/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -8,8 +8,10 @@
 	&lt;property name=&quot;war&quot; value=&quot;${project.name}.war&quot;/&gt;
 	&lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;init&quot; description=&quot;create build directory&quot;&gt;
 		&lt;mkdir dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
@@ -36,16 +38,13 @@
 		&lt;/war&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;build&quot; depends=&quot;war&quot;&gt;
-		&lt;antcall target=&quot;deploy&quot;/&gt;
-	&lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;war&quot;/&gt;
 
-	&lt;target name=&quot;deploy&quot;&gt;
+	&lt;target name=&quot;deploy&quot; if=&quot;do.web.deploy&quot;&gt;
         &lt;copy file=&quot;${war}&quot; todir=&quot;${web.deploy.dir}&quot;/&gt;
 	&lt;/target&gt;
 
 	&lt;target name=&quot;cleanup&quot; description=&quot;remove build directory&quot;&gt;
 		&lt;delete dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
-
 &lt;/project&gt;


Property changes on: branches/eschnepel/install/examples/knoppixforum
___________________________________________________________________
Name: svn:ignore
   + knoppixforum.war


Modified: branches/eschnepel/install/examples/knoppixforum/build.xml
===================================================================
--- branches/eschnepel/install/examples/knoppixforum/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/knoppixforum/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -7,8 +7,10 @@
 	&lt;property name=&quot;project.name&quot; value=&quot;knoppixforum&quot;/&gt;
 	&lt;property name=&quot;war&quot; value=&quot;${project.name}.war&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;war&quot;&gt;
    	    &lt;war warfile=&quot;${war}&quot; webxml=&quot;config/web.xml&quot;&gt;
 		    &lt;classes dir=&quot;../messageboard/build&quot;&gt;
@@ -21,8 +23,9 @@
 		&lt;/war&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;deploy&quot; depends=&quot;war&quot;&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;war&quot;/&gt;
+
+	&lt;target name=&quot;deploy&quot; if=&quot;do.web.deploy&quot;&gt;
         &lt;copy file=&quot;${war}&quot; todir=&quot;${web.deploy.dir}&quot;/&gt;
 	&lt;/target&gt;
-
 &lt;/project&gt;


Property changes on: branches/eschnepel/install/examples/kompetenzstern
___________________________________________________________________
Name: svn:ignore
   + kompetenzstern.jar
kompetenzstern.war
build


Modified: branches/eschnepel/install/examples/kompetenzstern/build.xml
===================================================================
--- branches/eschnepel/install/examples/kompetenzstern/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/kompetenzstern/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -9,8 +9,10 @@
 	&lt;property name=&quot;war&quot; value=&quot;${project.name}.war&quot;/&gt;
 	&lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;init&quot; description=&quot;create build directory&quot;&gt;
 		&lt;mkdir dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
@@ -45,11 +47,9 @@
 		&lt;/war&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;build&quot; depends=&quot;war&quot;&gt;
-		&lt;antcall target=&quot;deploy&quot;/&gt;
-	&lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;war&quot;/&gt;
 
-	&lt;target name=&quot;deploy&quot;&gt;
+	&lt;target name=&quot;deploy&quot; if=&quot;do.web.deploy&quot;&gt;
         &lt;copy file=&quot;${jar}&quot; todir=&quot;${web.lib.dir}&quot;/&gt;
         &lt;copy file=&quot;${war}&quot; todir=&quot;${web.deploy.dir}&quot;/&gt;
         &lt;copy file=&quot;vergleich2fo.xsl&quot; todir=&quot;../../client/stylesheets&quot;/&gt;
@@ -60,4 +60,15 @@
 		&lt;delete dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
 
+	&lt;target name=&quot;install&quot; &gt;
+		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
+			&lt;fileset dir=&quot;${examples}&quot;&gt;
+				&lt;include name=&quot;kompetenzstern/kompetenzstern.sql&quot; /&gt;
+				&lt;include name=&quot;kompetenzstern/businesscheck.sql&quot; /&gt;
+			&lt;/fileset&gt;
+			&lt;fileset dir=&quot;${db-specific}&quot;&gt;
+				&lt;include name=&quot;${db.close-session}&quot; /&gt;
+			&lt;/fileset&gt;
+		&lt;/sql&gt;
+	&lt;/target&gt;
 &lt;/project&gt;

Modified: branches/eschnepel/install/examples/kompetenzstern/businesscheck.sql
===================================================================
--- branches/eschnepel/install/examples/kompetenzstern/businesscheck.sql	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/kompetenzstern/businesscheck.sql	2007-09-17 18:46:21 UTC (rev 202)
@@ -15,12 +15,12 @@
 
 --- create assessment layers
 INSERT INTO Topic VALUES ('tt-bewertungsebene', 1, 1, 't-chancen',    'Chancen');
-INSERT INTO Topic VALUES ('tt-bewertungsebene', 1, 1, 't-plaene',     'Pl&#228;ne');
-INSERT INTO Topic VALUES ('tt-bewertungsebene', 1, 1, 't-ablaeufe',   'Abl&#228;ufe');
+INSERT INTO Topic VALUES ('tt-bewertungsebene', 1, 1, 't-plaene',     'Pl&#195;&#164;ne');
+INSERT INTO Topic VALUES ('tt-bewertungsebene', 1, 1, 't-ablaeufe',   'Abl&#195;&#164;ufe');
 INSERT INTO Topic VALUES ('tt-bewertungsebene', 1, 1, 't-ergebnisse', 'Ergebnisse');
 INSERT INTO TopicProp VALUES ('t-chancen',  1,   'Name', 'Chancen');
-INSERT INTO TopicProp VALUES ('t-plaene', 1,     'Name', 'Pl&#228;ne');
-INSERT INTO TopicProp VALUES ('t-ablaeufe', 1,   'Name', 'Abl&#228;ufe');
+INSERT INTO TopicProp VALUES ('t-plaene', 1,     'Name', 'Pl&#195;&#164;ne');
+INSERT INTO TopicProp VALUES ('t-ablaeufe', 1,   'Name', 'Abl&#195;&#164;ufe');
 INSERT INTO TopicProp VALUES ('t-ergebnisse', 1, 'Name', 'Ergebnisse');
 
 --- assign assessment layers to template &quot;Business Check&quot;
@@ -39,7 +39,7 @@
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-ziele',      'Ziele');
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-management', 'Management');
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-betrieb',    'Betrieb');
-INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-ertraege',   'Ertr&#228;ge');
+INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-ertraege',   'Ertr&#195;&#164;ge');
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-produkte',   'Produkte');
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-vertrieb',   'Vertrieb');
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-marketing',  'Marketing');
@@ -47,19 +47,19 @@
 INSERT INTO TopicProp VALUES ('t-ziele', 1,      'Name', 'Ziele');
 INSERT INTO TopicProp VALUES ('t-management', 1, 'Name', 'Management');
 INSERT INTO TopicProp VALUES ('t-betrieb', 1,    'Name', 'Betrieb');
-INSERT INTO TopicProp VALUES ('t-ertraege', 1,   'Name', 'Ertr&#228;ge');
+INSERT INTO TopicProp VALUES ('t-ertraege', 1,   'Name', 'Ertr&#195;&#164;ge');
 INSERT INTO TopicProp VALUES ('t-produkte', 1,   'Name', 'Produkte');
 INSERT INTO TopicProp VALUES ('t-vertrieb', 1,   'Name', 'Vertrieb');
 INSERT INTO TopicProp VALUES ('t-marketing', 1,  'Name', 'Marketing');
 INSERT INTO TopicProp VALUES ('t-markt', 1,      'Name', 'Markt');
-INSERT INTO TopicProp VALUES ('t-ziele', 1,      'Hilfe', 'Der Hilfe-Text f&#252;r &quot;Ziele&quot; ...');
-INSERT INTO TopicProp VALUES ('t-management', 1, 'Hilfe', 'Der Hilfe-Text f&#252;r &quot;Management&quot; ...');
-INSERT INTO TopicProp VALUES ('t-betrieb', 1,    'Hilfe', 'Der Hilfe-Text f&#252;r &quot;Betrieb&quot; ...');
-INSERT INTO TopicProp VALUES ('t-ertraege', 1,   'Hilfe', 'Der Hilfe-Text f&#252;r &quot;Ertr&#228;ge&quot; ...');
-INSERT INTO TopicProp VALUES ('t-produkte', 1,   'Hilfe', 'Der Hilfe-Text f&#252;r &quot;Produkte&quot; ...');
-INSERT INTO TopicProp VALUES ('t-vertrieb', 1,   'Hilfe', 'Der Hilfe-Text f&#252;r &quot;Vertrieb&quot; ...');
-INSERT INTO TopicProp VALUES ('t-marketing', 1,  'Hilfe', 'Der Hilfe-Text f&#252;r &quot;Marketing&quot; ...');
-INSERT INTO TopicProp VALUES ('t-markt', 1,      'Hilfe', 'Der Hilfe-Text f&#252;r &quot;Markt&quot; ...');
+INSERT INTO TopicProp VALUES ('t-ziele', 1,      'Hilfe', 'Der Hilfe-Text f&#195;&#188;r &quot;Ziele&quot; ...');
+INSERT INTO TopicProp VALUES ('t-management', 1, 'Hilfe', 'Der Hilfe-Text f&#195;&#188;r &quot;Management&quot; ...');
+INSERT INTO TopicProp VALUES ('t-betrieb', 1,    'Hilfe', 'Der Hilfe-Text f&#195;&#188;r &quot;Betrieb&quot; ...');
+INSERT INTO TopicProp VALUES ('t-ertraege', 1,   'Hilfe', 'Der Hilfe-Text f&#195;&#188;r &quot;Ertr&#195;&#164;ge&quot; ...');
+INSERT INTO TopicProp VALUES ('t-produkte', 1,   'Hilfe', 'Der Hilfe-Text f&#195;&#188;r &quot;Produkte&quot; ...');
+INSERT INTO TopicProp VALUES ('t-vertrieb', 1,   'Hilfe', 'Der Hilfe-Text f&#195;&#188;r &quot;Vertrieb&quot; ...');
+INSERT INTO TopicProp VALUES ('t-marketing', 1,  'Hilfe', 'Der Hilfe-Text f&#195;&#188;r &quot;Marketing&quot; ...');
+INSERT INTO TopicProp VALUES ('t-markt', 1,      'Hilfe', 'Der Hilfe-Text f&#195;&#188;r &quot;Markt&quot; ...');
 
 --- assign top-level criteria to template &quot;Business Check&quot;
 INSERT INTO Association VALUES ('at-composition', 1, 1, 'a-642', '', 't-businesscheck', 1, 't-ziele', 1);
@@ -99,32 +99,32 @@
 INSERT INTO TopicProp VALUES ('t-markterwartungen', 1,  'Name', 'Markterwartungen');
 
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-produktplanung',    'Produktplanung');
-INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-geschaeftsleitung', 'Gesch&#228;ftsleitung');
-INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-techn-loesungen',   'Techn. L&#246;sungen');
+INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-geschaeftsleitung', 'Gesch&#195;&#164;ftsleitung');
+INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-techn-loesungen',   'Techn. L&#195;&#182;sungen');
 INSERT INTO TopicProp VALUES ('t-produktplanung', 1,    'Name', 'Produktplanung');
-INSERT INTO TopicProp VALUES ('t-geschaeftsleitung', 1, 'Name', 'Gesch&#228;ftsleitung');
-INSERT INTO TopicProp VALUES ('t-techn-loesungen', 1,   'Name', 'Techn. L&#246;sungen');
+INSERT INTO TopicProp VALUES ('t-geschaeftsleitung', 1, 'Name', 'Gesch&#195;&#164;ftsleitung');
+INSERT INTO TopicProp VALUES ('t-techn-loesungen', 1,   'Name', 'Techn. L&#195;&#182;sungen');
 
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-kommunikation',       'Kommunikation');
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-produktmarketing',    'Produktmarketing');
-INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-preisattraktivitaet', 'Preisattraktivit&#228;t');
+INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-preisattraktivitaet', 'Preisattraktivit&#195;&#164;t');
 INSERT INTO TopicProp VALUES ('t-kommunikation', 1,       'Name', 'Kommunikation');
 INSERT INTO TopicProp VALUES ('t-produktmarketing', 1,    'Name', 'Produktmarketing');
-INSERT INTO TopicProp VALUES ('t-preisattraktivitaet', 1, 'Name', 'Preisattraktivit&#228;t');
+INSERT INTO TopicProp VALUES ('t-preisattraktivitaet', 1, 'Name', 'Preisattraktivit&#195;&#164;t');
 
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-betriebsstruktur', 'Betriebsstruktur');
-INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-betriebsqualitaet', 'Betriebsqualit&#228;t');
-INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-betriebsablaeufe', 'Betriebsabl&#228;ufe');
+INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-betriebsqualitaet', 'Betriebsqualit&#195;&#164;t');
+INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-betriebsablaeufe', 'Betriebsabl&#195;&#164;ufe');
 INSERT INTO TopicProp VALUES ('t-betriebsstruktur', 1, 'Name', 'Betriebsstruktur');
-INSERT INTO TopicProp VALUES ('t-betriebsqualitaet', 1, 'Name', 'Betriebsqualit&#228;t');
-INSERT INTO TopicProp VALUES ('t-betriebsablaeufe', 1, 'Name', 'Betriebsabl&#228;ufe');
+INSERT INTO TopicProp VALUES ('t-betriebsqualitaet', 1, 'Name', 'Betriebsqualit&#195;&#164;t');
+INSERT INTO TopicProp VALUES ('t-betriebsablaeufe', 1, 'Name', 'Betriebsabl&#195;&#164;ufe');
 
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-vertriebsstruktur',  'Vertriebsstruktur');
-INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-vertriebsqualitaet', 'Vertriebsqualit&#228;t');
-INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-vertriebsablaeufe',  'Vertriebsabl&#228;ufe');
+INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-vertriebsqualitaet', 'Vertriebsqualit&#195;&#164;t');
+INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-vertriebsablaeufe',  'Vertriebsabl&#195;&#164;ufe');
 INSERT INTO TopicProp VALUES ('t-vertriebsstruktur', 1,  'Name', 'Vertriebsstruktur');
-INSERT INTO TopicProp VALUES ('t-vertriebsqualitaet', 1, 'Name', 'Vertriebsqualit&#228;t');
-INSERT INTO TopicProp VALUES ('t-vertriebsablaeufe', 1,  'Name', 'Vertriebsabl&#228;ufe');
+INSERT INTO TopicProp VALUES ('t-vertriebsqualitaet', 1, 'Name', 'Vertriebsqualit&#195;&#164;t');
+INSERT INTO TopicProp VALUES ('t-vertriebsablaeufe', 1,  'Name', 'Vertriebsabl&#195;&#164;ufe');
 
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-wirtschaftlichkeit', 'Wirtschaftlichkeit');
 INSERT INTO Topic VALUES ('tt-kriterium', 1, 1, 't-ertragslage',        'Ertragslage');

Modified: branches/eschnepel/install/examples/kompetenzstern/kompetenzstern.sql
===================================================================
--- branches/eschnepel/install/examples/kompetenzstern/kompetenzstern.sql	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/kompetenzstern/kompetenzstern.sql	2007-09-17 18:46:21 UTC (rev 202)
@@ -118,7 +118,7 @@
 INSERT INTO Topic VALUES ('tt-topictype', 1, 1, 'tt-bewertungsgegenstand', 'Bewertungsgegenstand');
 -- set properties
 INSERT INTO TopicProp VALUES ('tt-bewertungsgegenstand', 1, 'Name', 'Bewertungsgegenstand');
-INSERT INTO TopicProp VALUES ('tt-bewertungsgegenstand', 1, 'Plural Name', 'Bewertungsgegenst&#228;nde');
+INSERT INTO TopicProp VALUES ('tt-bewertungsgegenstand', 1, 'Plural Name', 'Bewertungsgegenst&#195;&#164;nde');
 INSERT INTO TopicProp VALUES ('tt-bewertungsgegenstand', 1, 'Description', '&lt;HTML&gt;&lt;BODY&gt;Die Hilfe zu &lt;I&gt;Bewertungsgegenstand&lt;/I&gt;&lt;/BODY&gt;&lt;/HTML&gt;');
 INSERT INTO TopicProp VALUES ('tt-bewertungsgegenstand', 1, 'Description Query', 'Was ist ein Bewertungsgegenstand?');
 INSERT INTO TopicProp VALUES ('tt-bewertungsgegenstand', 1, 'Icon', 'BewertungsGegenstand.gif');
@@ -340,20 +340,20 @@
 --- assign type to container type
 INSERT INTO Association VALUES ('at-aggregation', 1, 1, 'a-636', '', 'tt-kompetenzsterntemplatecontainer', 1, 'tt-kompetenzsterntemplate', 1);
 
---- &quot;Verkn&#252;pftes Dokument&quot; ---
-INSERT INTO Topic VALUES ('tt-topictype', 1, 1, 'tt-relateddocument', 'Verkn&#252;pftes Dokument');
+--- &quot;Verkn&#195;&#188;pftes Dokument&quot; ---
+INSERT INTO Topic VALUES ('tt-topictype', 1, 1, 'tt-relateddocument', 'Verkn&#195;&#188;pftes Dokument');
 --- set properties
-INSERT INTO TopicProp VALUES ('tt-relateddocument', 1, 'Name', 'Verkn&#252;pftes Dokument');
-INSERT INTO TopicProp VALUES ('tt-relateddocument', 1, 'Plural Name', 'Verkn&#252;pfte Dokumente');
-INSERT INTO TopicProp VALUES ('tt-relateddocument', 1, 'Description Query', 'Was ist ein verkn&#252;pftes Dokument?');
+INSERT INTO TopicProp VALUES ('tt-relateddocument', 1, 'Name', 'Verkn&#195;&#188;pftes Dokument');
+INSERT INTO TopicProp VALUES ('tt-relateddocument', 1, 'Plural Name', 'Verkn&#195;&#188;pfte Dokumente');
+INSERT INTO TopicProp VALUES ('tt-relateddocument', 1, 'Description Query', 'Was ist ein verkn&#195;&#188;pftes Dokument?');
 INSERT INTO TopicProp VALUES ('tt-relateddocument', 1, 'Unique Topic Names', 'on');
 INSERT INTO TopicProp VALUES ('tt-relateddocument', 1, 'Custom Implementation', 'de.deepamehta.kompetenzstern.topics.VerknuepftesDokumentTopic');
 --- derive from &quot;Document&quot;
 INSERT INTO Association VALUES ('at-derivation', 1, 1, 'a-671', '', 'tt-document', 1, 'tt-relateddocument', 1);
 --- container type
-INSERT INTO Topic VALUES ('tt-topictype', 1, 1, 'tt-relateddocumentcontainer', 'Verkn&#252;pfte Dokumente Search');
+INSERT INTO Topic VALUES ('tt-topictype', 1, 1, 'tt-relateddocumentcontainer', 'Verkn&#195;&#188;pfte Dokumente Search');
 --- set properties of container type
-INSERT INTO TopicProp VALUES ('tt-relateddocumentcontainer', 1, 'Name', 'Verkn&#252;pfte Dokumente Search');
+INSERT INTO TopicProp VALUES ('tt-relateddocumentcontainer', 1, 'Name', 'Verkn&#195;&#188;pfte Dokumente Search');
 --- derive container type
 INSERT INTO Association VALUES ('at-derivation', 1, 1, 'a-672', '', 'tt-topiccontainer', 1, 'tt-relateddocumentcontainer', 1);
 --- assign type to container type

Modified: branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/KS.java
===================================================================
--- branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/KS.java	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/KS.java	2007-09-17 18:46:21 UTC (rev 202)
@@ -144,15 +144,15 @@
 	static final String ICON_SHOW_COMPETENCE_STAR = &quot;Kompetenzstern.gif&quot;;
 	//
 	static final String ITEM_SET_ORDER = &quot;Reihenfolge festlegen&quot;;
-	static final String ITEM_CHANGE_ORDER = &quot;Reihenfolge &#138;ndern&quot;;
+	static final String ITEM_CHANGE_ORDER = &quot;Reihenfolge &#195;&#164;ndern&quot;;
 	static final String  CMD_SET_ORDER = &quot;setOrder&quot;;
 	static final String ICON_SET_ORDER = &quot;setOrder.gif&quot;;
 	//
-    static final String ITEM_SHOW_DOCUMENTS = &quot;Verkn&#159;pfte Dokumente anzeigen&quot;;
+    static final String ITEM_SHOW_DOCUMENTS = &quot;Verkn&#195;&#188;pfte Dokumente anzeigen&quot;;
     static final String  CMD_SHOW_DOCUMENTS = &quot;showDocuments&quot;;
     static final String ICON_SHOW_DOCUMENTS = &quot;showDocuments.gif&quot;;
     //
-    static final String ITEM_ASSIGN_DOCUMENT = &quot;Dokument verkn&#159;pfen&quot;;
+    static final String ITEM_ASSIGN_DOCUMENT = &quot;Dokument verkn&#195;&#188;pfen&quot;;
     static final String  CMD_ASSIGN_DOCUMENT = &quot;assignDocument&quot;;
     static final String ICON_ASSIGN_DOCUMENT = &quot;createDocument.gif&quot;;
 	//

Modified: branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics/KompetenzsternTopic.java
===================================================================
--- branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics/KompetenzsternTopic.java	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics/KompetenzsternTopic.java	2007-09-17 18:46:21 UTC (rev 202)
@@ -385,11 +385,11 @@
 		}
 		if (layers == null) {
 			throw new DeepaMehtaException(&quot;Kompetenzstern \&quot;&quot; + getName() + &quot;\&quot; kann &quot; +
-				&quot;nicht angezeigt werden, da sein Template keine Bewertungsebenen enth&#138;lt&quot;);
+				&quot;nicht angezeigt werden, da sein Template keine Bewertungsebenen enth&#239;&#191;&#189;lt&quot;);
 		}
 		if (kriterien == null) {
 			throw new DeepaMehtaException(&quot;Kompetenzstern \&quot;&quot; + getName() + &quot;\&quot; kann &quot; +
-				&quot;nicht angezeigt werden, da sein Template keine Kriterien enth&#138;lt&quot;);
+				&quot;nicht angezeigt werden, da sein Template keine Kriterien enth&#239;&#191;&#189;lt&quot;);
 		}
 		//
 		checkBackground(directives);
@@ -481,7 +481,7 @@
 
 
 	/**
-	 * Adds a &quot;Reihenfolge festlegen&quot;/&quot;Reihenfolge &#138;ndern&quot; command to the specified
+	 * Adds a &quot;Reihenfolge festlegen&quot;/&quot;Reihenfolge &#195;&#164;ndern&quot; command to the specified
 	 * (topic) command set.
 	 * &lt;P&gt;
 	 * References checked: 30.12.2001 (2.0a14-pre5)
@@ -502,7 +502,7 @@
 		} catch (DeepaMehtaException e) {
 			System.out.println(&quot;*** KompetenzsternTopic.addSetOrderCommand(): &quot; + e);
 			directives.add(DIRECTIVE_SHOW_MESSAGE, &quot;Das Kommando \&quot;&quot; + ITEM_SET_ORDER + &quot;\&quot; steht nicht zur &quot; +
-				&quot;Verf&#159;gung (&quot; + e.getMessage() + &quot;)&quot;, new Integer(NOTIFICATION_WARNING));
+				&quot;Verf&#195;&#188;gung (&quot; + e.getMessage() + &quot;)&quot;, new Integer(NOTIFICATION_WARNING));
 		}
 	} */
 
@@ -721,7 +721,7 @@
 			return template.getKriterien();
 		} catch (DeepaMehtaException e) {
 			throw new DeepaMehtaException(&quot;Kompetenzstern \&quot;&quot; + getName() + &quot;\&quot; kann &quot; +
-				&quot;nicht angezeigt werden, da sein Template keine Kriterien enth&#138;lt&quot;);
+				&quot;nicht angezeigt werden, da sein Template keine Kriterien enth&#239;&#191;&#189;lt&quot;);
 		}
 	}
 
@@ -737,7 +737,7 @@
 				TOPICTYPE_BEWERTUNGS_EBENE, 2, true, false);	// throws DME
 		} catch (DeepaMehtaException e) {
 			throw new DeepaMehtaException(&quot;Kompetenzstern \&quot;&quot; + getName() + &quot;\&quot; kann &quot; +
-				&quot;nicht angezeigt werden, da sein Template keine Bewertungsebenen enth&#138;lt&quot;);
+				&quot;nicht angezeigt werden, da sein Template keine Bewertungsebenen enth&#239;&#191;&#189;lt&quot;);
 		}
 	}
 

Modified: branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics/KriteriumTopic.java
===================================================================
--- branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics/KriteriumTopic.java	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/kompetenzstern/src/de/deepamehta/kompetenzstern/topics/KriteriumTopic.java	2007-09-17 18:46:21 UTC (rev 202)
@@ -54,7 +54,7 @@
     private static final String  CMD_HIDE_ALL_SUB_CRITERIA = &quot;HideAllSubCriteria&quot;;
     private static final String ICON_HIDE_ALL_SUB_CRITERIA = &quot;hideUnterkriterien.gif&quot;;
     // ---
-    private static final String ITEM_DELETE_ALL_SUB_CRITERIA = &quot;Kriterium l&#154;schen&quot;;
+    private static final String ITEM_DELETE_ALL_SUB_CRITERIA = &quot;Kriterium l&#195;&#182;chen&quot;;
     private static final String  CMD_DELETE_ALL_SUB_CRITERIA = &quot;DeleteAllSubCriteria&quot;;
     private static final String ICON_DELETE_ALL_SUB_CRITERIA = ICON_DELETE_TOPIC;
 	// ---
@@ -144,7 +144,7 @@
 	        commands.addSeparator();
 			KompetenzsternTopic.addDocumentCommands(hasRelatedDocuments, commands);
 		}
-        // --- L&#154;schen (mit allen Unterkriterien) ---
+        // --- L&#195;&#182;schen (mit allen Unterkriterien) ---
 		// Note: deleting only enabled for subcriteria
 		if (addHideDelete) {
 			commands.addSeparator();
@@ -231,7 +231,7 @@
 			} catch (DeepaMehtaException ex) {
 				System.out.println(&quot;*** KriteriumTopic.propertiesChanged(): &quot; + ex);
 				ex.printStackTrace();	// ###
-				directives.add(DIRECTIVE_SHOW_MESSAGE, &quot;Der ge&#228;nderte Wert kann nicht angezeigt werden (&quot; +
+				directives.add(DIRECTIVE_SHOW_MESSAGE, &quot;Der ge&#239;&#191;&#189;nderte Wert kann nicht angezeigt werden (&quot; +
 					ex.getMessage() + &quot;)&quot;, new Integer(NOTIFICATION_WARNING));
 			}
 		}


Property changes on: branches/eschnepel/install/examples/ldap
___________________________________________________________________
Name: svn:ignore
   + build
LDAPTopics.jar


Modified: branches/eschnepel/install/examples/ldap/build.xml
===================================================================
--- branches/eschnepel/install/examples/ldap/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/ldap/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -7,8 +7,10 @@
 	&lt;property name=&quot;jar&quot; value=&quot;LDAPTopics.jar&quot;/&gt;
 	&lt;property name=&quot;build&quot; location=&quot;build&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;init&quot; description=&quot;create build directory&quot;&gt;
 		&lt;mkdir dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
@@ -16,8 +18,8 @@
 	&lt;target name=&quot;compile&quot; depends=&quot;init&quot;&gt;
 		&lt;javac srcdir=&quot;src&quot; destdir=&quot;${build}&quot; debug=&quot;on&quot; listfiles=&quot;yes&quot;&gt;
 			&lt;classpath&gt;
-				&lt;pathelement location=&quot;${web.lib.dir}/DeepaMehtaService.jar&quot;/&gt;
-				&lt;pathelement location=&quot;${web.lib.dir}/DeepaMehtaTopics.jar&quot;/&gt;
+				&lt;pathelement location=&quot;${server}/DeepaMehtaService.jar&quot;/&gt;
+				&lt;pathelement location=&quot;${server}/DeepaMehtaTopics.jar&quot;/&gt;
 			&lt;/classpath&gt;
 		&lt;/javac&gt;
 	&lt;/target&gt;
@@ -28,8 +30,20 @@
 		&lt;/jar&gt;
 	&lt;/target&gt;
 
+	&lt;target name=&quot;build&quot; depends=&quot;jar&quot;/&gt;
+
 	&lt;target name=&quot;cleanup&quot; description=&quot;remove build directory&quot;&gt;
 		&lt;delete dir=&quot;${build}&quot;/&gt;
 	&lt;/target&gt;
 
+	&lt;target name=&quot;install&quot;&gt;
+		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
+			&lt;fileset dir=&quot;${examples}&quot;&gt;
+				&lt;include name=&quot;ldap/ldap.sql&quot; /&gt;
+			&lt;/fileset&gt;
+			&lt;fileset dir=&quot;${db-specific}&quot;&gt;
+				&lt;include name=&quot;${db.close-session}&quot; /&gt;
+			&lt;/fileset&gt;
+		&lt;/sql&gt;
+	&lt;/target&gt;
 &lt;/project&gt;

Modified: branches/eschnepel/install/examples/messageboard/build.xml
===================================================================
--- branches/eschnepel/install/examples/messageboard/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/messageboard/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -48,11 +48,9 @@
 		&lt;/war&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;build&quot; depends=&quot;war&quot;&gt;
-		&lt;antcall target=&quot;deploy&quot; /&gt;
-	&lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;war&quot;/&gt;
 
-	&lt;target name=&quot;deploy&quot;&gt;
+	&lt;target name=&quot;deploy&quot; if=&quot;do.web.deploy&quot;&gt;
 		&lt;copy file=&quot;${jar}&quot; todir=&quot;${web.lib.dir}&quot; /&gt;
 		&lt;copy file=&quot;${war}&quot; todir=&quot;${web.deploy.dir}&quot; /&gt;
 	&lt;/target&gt;
@@ -60,5 +58,4 @@
 	&lt;target name=&quot;cleanup&quot; description=&quot;remove build directory&quot;&gt;
 		&lt;delete dir=&quot;${build}&quot; /&gt;
 	&lt;/target&gt;
-
 &lt;/project&gt;

Modified: branches/eschnepel/install/examples/movies/build.xml
===================================================================
--- branches/eschnepel/install/examples/movies/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/movies/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -34,13 +34,25 @@
 		&lt;/jar&gt;
 	&lt;/target&gt;
 
+	&lt;target name=&quot;build&quot; depends=&quot;jar&quot;/&gt;
+	
 	&lt;target name=&quot;cleanup&quot; description=&quot;remove build directory&quot;&gt;
 		&lt;delete dir=&quot;${build}&quot; /&gt;
 	&lt;/target&gt;
 
 	&lt;!-- example database &quot;Movies&quot; --&gt;
 
-	&lt;target name=&quot;install&quot; depends=&quot;initdb&quot; /&gt;
+	&lt;target name=&quot;install&quot; depends=&quot;initdb&quot; &gt;
+		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
+			&lt;fileset dir=&quot;${examples}&quot;&gt;
+				&lt;include name=&quot;movies/db/dmdb-movies.sql&quot; /&gt;
+				&lt;include name=&quot;movies/db/dmdb-movies-${dm.instance}.sql&quot; /&gt;
+			&lt;/fileset&gt;
+			&lt;fileset dir=&quot;${db-specific}&quot;&gt;
+				&lt;include name=&quot;${db.close-session}&quot; /&gt;
+			&lt;/fileset&gt;
+		&lt;/sql&gt;
+	&lt;/target&gt;
 
 	&lt;target name=&quot;createmoviesdb&quot;&gt;
 		&lt;ant antfile=&quot;${movies.db.create-db}&quot; target=&quot;createdb&quot; inheritrefs=&quot;true&quot;&gt;


Property changes on: branches/eschnepel/install/examples/musicforum
___________________________________________________________________
Name: svn:ignore
   + musicforum.war


Modified: branches/eschnepel/install/examples/musicforum/build.xml
===================================================================
--- branches/eschnepel/install/examples/musicforum/build.xml	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/install/examples/musicforum/build.xml	2007-09-17 18:46:21 UTC (rev 202)
@@ -7,8 +7,10 @@
 	&lt;property name=&quot;project.name&quot; value=&quot;musicforum&quot;/&gt;
 	&lt;property name=&quot;war&quot; value=&quot;${project.name}.war&quot;/&gt;
 
-	&lt;import file=&quot;../../../config.xml&quot;/&gt;
+	&lt;property name=&quot;dm.base-dir&quot; location=&quot;../../..&quot; /&gt;
 
+	&lt;import file=&quot;${dm.base-dir}/config.xml&quot; /&gt;
+
 	&lt;target name=&quot;war&quot;&gt;
    	    &lt;war warfile=&quot;${war}&quot; webxml=&quot;config/web.xml&quot;&gt;
 		    &lt;classes dir=&quot;../messageboard/build&quot;&gt;
@@ -24,12 +26,20 @@
 		&lt;/war&gt;
 	&lt;/target&gt;
 
-	&lt;target name=&quot;build&quot; depends=&quot;war&quot;&gt;
-		&lt;antcall target=&quot;deploy&quot;/&gt;
-	&lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;war&quot;/&gt;
 
-	&lt;target name=&quot;deploy&quot;&gt;
+	&lt;target name=&quot;deploy&quot; if=&quot;do.web.deploy&quot;&gt;
         &lt;copy file=&quot;${war}&quot; todir=&quot;${web.deploy.dir}&quot;/&gt;
 	&lt;/target&gt;
 
+	&lt;target name=&quot;install&quot;&gt;
+		&lt;sql driver=&quot;${db.driver}&quot; url=&quot;${db.url}&quot; userid=&quot;${db.user}&quot; password=&quot;${db.password}&quot; classpathref=&quot;javalibs&quot; autocommit=&quot;${db.autocommit}&quot;&gt;
+			&lt;fileset dir=&quot;${examples}&quot;&gt;
+				&lt;include name=&quot;musicforum/music.sql&quot; /&gt;
+			&lt;/fileset&gt;
+			&lt;fileset dir=&quot;${db-specific}&quot;&gt;
+				&lt;include name=&quot;${db.close-session}&quot; /&gt;
+			&lt;/fileset&gt;
+		&lt;/sql&gt;
+	&lt;/target&gt;
 &lt;/project&gt;

Added: branches/eschnepel/run.bat
===================================================================
--- branches/eschnepel/run.bat	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/run.bat	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,17 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">+ at echo</A> off
+if &quot;%ANT_HOME%&quot;==&quot;&quot; goto setDefaultAntHome
+
+:stripAntHome
+if not _%ANT_HOME:~-1%==_\ goto testAntHome
+set ANT_HOME=%ANT_HOME:~0,-1%
+goto stripAntHome
+
+:testAntHome
+if exist %ANT_HOME%/bin/ant.bat goto callAnt
+
+:setDefaultAntHome
+rem %~dp0 is expanded pathname of the current script under NT
+set ANT_HOME=%~dp0ant
+
+:callAnt
+call %ANT_HOME%/bin/ant.bat %%

Added: branches/eschnepel/run.sh
===================================================================
--- branches/eschnepel/run.sh	2007-09-17 18:43:08 UTC (rev 201)
+++ branches/eschnepel/run.sh	2007-09-17 18:46:21 UTC (rev 202)
@@ -0,0 +1,34 @@
+#!/bin/sh
+
+if [ &quot;$ANT_HOME&quot; != &quot;&quot; ];then
+	if [ ! -x &quot;$ANT_HOME/bin/ant&quot; ];then
+		export ANT_HOME=
+	else
+		vers=$(&quot;$ANT_HOME/bin/ant&quot; -version 2&gt;/dev/null \
+		| sed -e 's,.* \([0-9]*\.[0-9]*\.[0-9]*\) .*,\1,g'|tr -d -c '0-9.')
+		majorVer=$(echo $vers|cut -d. -f1)
+		minorVer=$(echo $vers|cut -d. -f2)
+		stepVer=$(echo $vers|cut -d. -f3)
+		if [ &quot;$stepVer&quot; != &quot;&quot; ] ; then
+			if	[ $majorVer -lt 1 ] \
+			||	(	[ $majorVer -eq 1 ] \
+				&amp;&amp;	[ $minorVer -lt 7 ] )
+			then
+				echo &quot;Your ant installation (version $vers) is not suiteable. Using my own!&quot; &gt;&amp;2
+				export ANT_HOME=
+			fi
+		else
+			echo &quot;Your ant installation is not suiteable. Using my own!&quot; &gt;&amp;2
+			export ANT_HOME=
+		fi
+	fi
+fi
+
+current=&quot;$(pwd)&quot;
+cd &quot;$(dirname $0)&quot;
+
+#if [ &quot;$ANT_HOME&quot; = &quot;&quot; ];then
+export ANT_HOME=&quot;$(pwd)/ant&quot;
+#fi
+
+${ANT_HOME}/bin/ant $*


Property changes on: branches/eschnepel/run.sh
___________________________________________________________________
Name: svn:executable
   + *


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000046.html">[deepamehta-svn] r201 - in trunk: develop/src/de/deepamehta	develop/src/de/deepamehta/topics install/db/patches
</A></li>
	<LI>Next message: <A HREF="000048.html">[deepamehta-svn] r203 - in branches/eschnepel:	develop/src/de/deepamehta develop/src/de/deepamehta/client	develop/src/de/deepamehta/topics install install/db	install/db/patches
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#47">[ date ]</a>
              <a href="thread.html#47">[ thread ]</a>
              <a href="subject.html#47">[ subject ]</a>
              <a href="author.html#47">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/deepamehta-svn">More information about the deepamehta-svn
mailing list</a><br>
</body></html>
